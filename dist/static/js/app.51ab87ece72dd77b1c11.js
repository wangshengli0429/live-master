webpackJsonp([1],{"/Bry":function(t,e){},"/Uac":function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("BO1k"),r=i.n(s),o=i("R2SV"),l=(i("mw3O"),{getActorList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/users/actors.json",l={start:n,limit:a};s&&((s.distributeStatus||0===s.distributeStatus)&&(l.distributeStatus=s.distributeStatus),(s.status||0===s.status)&&(l.status=s.status),(s.brokerId||""==s.brokerId)&&(l.brokerId=s.brokerId),s.thirdId&&(l.thirdId=s.thirdId),s.id&&(l.id=s.id),s.nickname&&(l.nickname=s.nickname),s.unionId?l.orgId=s.unionId:s.platId&&(l.orgId=s.platId)),Object(o.f)(r,"GET",l,e,i)},getApplyList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/user/actor/apply.json",l={start:n,limit:a};s&&(s.identityName&&(l.identityName=s.identityName),s.mobile&&(l.mobile=s.mobile),s.platId&&(l.platId=s.platId),(s.status||0===s.status)&&(l.status=s.status),s.date&&(l.startDate=new Date(s.date[0]).getTime(),l.endDate=new Date(s.date[1]).getTime())),Object(o.f)(r,"GET",l,e,i)},deleteActor:function(t,e,i){var n=t.list,a=config_server.server_api+"/users/actors.json",s=[],l=!0,u=!1,c=void 0;try{for(var d,f=r()(n);!(l=(d=f.next()).done);l=!0){var h=d.value;s.push(h)}}catch(t){u=!0,c=t}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}Object(o.f)(a,"DELETE",{uuid:s,_method:"delete"},e,i)},assignActor:function(t,e,i){var n=t.orgId,a=t.list,s=config_server.server_api+"/users/actors/distribute.json",l="orgId="+n,u=!0,c=!1,d=void 0;try{for(var f,h=r()(a);!(u=(f=h.next()).done);u=!0){l=l+"&actorId="+f.value}}catch(t){c=!0,d=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw d}}Object(o.f)(s,"POST",l,e,i)},changeApplyStatus:function(t,e,i){var n=t.uuid,a=t.status,s=config_server.server_api+"/user/actor/apply/"+n+"/status.json",r={status:a};Object(o.f)(s,"POST",r,e,i)},deleteApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/user/actor/apply.json?_method=delete",s=!0,l=!1,u=void 0;try{for(var c,d=r()(n);!(s=(c=d.next()).done);s=!0){a=a+"&uuid="+c.value}}catch(t){l=!0,u=t}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}Object(o.f)(a,"DELETE",{},e,i)}});e.a=a()({},l)},"0M98":function(t,e){},"0dgG":function(t,e){},"1npu":function(t,e){},"2dyg":function(t,e){},"2oOq":function(t,e){},"3V4a":function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("2aIq"),r=i.n(s),o=i("BO1k"),l=i.n(o),u=i("mvHQ"),c=i.n(u),d=i("R2SV"),f=(i("mw3O"),{getAccountList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=t.sorters,o=config_server.server_api+"/plat/flow.json?";r&&r.length>0&&(o=o+"&sorters="+encodeURIComponent(c()(r)));var l={start:n,limit:a};s&&(s.unionId?l.orgId=s.unionId:s.platId&&(l.orgId=s.platId),(s.status||0==s.status)&&(l.status=s.status),s.nickname&&(l.nickname=s.nickname),s.thirdId&&(l.thirdId=s.thirdId),s.date&&(l.startDate=new Date(s.date[0]).getTime(),l.endDate=new Date(s.date[1]).getTime()),s.salaryType&&(l.salaryType=s.salaryType)),Object(d.f)(o,"GET",l,e,i)},deleteAccount:function(t,e,i){var n=t.list,a=config_server.server_api+"/plat/flow.json?",s=!0,r=!1,o=void 0;try{for(var u,c=l()(n);!(s=(u=c.next()).done);s=!0){a=a+"&uuid="+u.value}}catch(t){r=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(r)throw o}}Object(d.f)(a,"DELETE",{},e,i)},calculateAccount:function(t,e,i){var n=t.list,a=config_server.server_api+"/plat/flow/calculate.json",s="",r=!0,o=!1,u=void 0;try{for(var c,f=l()(n);!(r=(c=f.next()).done);r=!0){s=s+"&uuid="+c.value}}catch(t){o=!0,u=t}finally{try{!r&&f.return&&f.return()}finally{if(o)throw u}}Object(d.f)(a,"POST",s,e,i)},autoCalculate:function(t,e,i){r()(t);var n=config_server.server_api+"/plat/flow/calculate/auto.json";Object(d.f)(n,"POST",{},e,i)}}),h={getFlowList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/finance/flow.json",o={start:n,limit:a};s&&(s.unionId?o.orgId=s.unionId:s.platId&&(o.orgId=s.platId),(s.status||0==s.status)&&(o.status=s.status),(s.type||0===s.type)&&(o.type=s.type),s.nickname&&(o.nickname=s.nickname),s.thirdId&&(o.thirdId=s.thirdId),s.date&&(o.startDate=new Date(s.date[0]).getTime(),o.endDate=new Date(s.date[1]).getTime()),s.salaryType&&(o.salaryType=s.salaryType)),Object(d.f)(r,"GET",o,e,i)}},p={getReflectList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/finance/cash/apply.json",o={start:n,limit:a};s&&(s.unionId?o.orgId=s.unionId:s.platId&&(o.orgId=s.platId),s.status&&(o.status=s.status),s.nickname&&(o.nickname=s.nickname),s.thirdId&&(o.thirdId=s.thirdId),s.date&&(o.startDate=new Date(s.date[0]).getTime(),o.endDate=new Date(s.date[1]).getTime())),Object(d.f)(r,"GET",o,e,i)},agreeApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/finance/cash/apply/pass.json?",s=!0,r=!1,o=void 0;try{for(var u,c=l()(n);!(s=(u=c.next()).done);s=!0){a=a+"uuid="+u.value}}catch(t){r=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(r)throw o}}Object(d.f)(a,"POST",{},e,i)},rejectApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/finance/cash/apply/reject.json?",s=!0,r=!1,o=void 0;try{for(var u,c=l()(n);!(s=(u=c.next()).done);s=!0){a=a+"uuid="+u.value}}catch(t){r=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(r)throw o}}Object(d.f)(a,"POST",{},e,i)}},v={getAgentList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/salary/broker.json",o={start:n,limit:a};s&&(s.unionId?o.orgId=s.unionId:s.platId&&(o.orgId=s.platId),(s.status||0==s.status)&&(o.status=s.status),s.nickname&&(o.nickname=s.nickname),s.thirdId&&(o.thirdId=s.thirdId),s.date&&(o.startDate=Object(d.d)(s.date),o.endDate=Object(d.e)(s.date))),Object(d.f)(r,"GET",o,e,i)},agreeAgentApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/salary/broker/"+n[0]+"/distribute.json";Object(d.f)(a,"POST","",e,i)},rejectAgentApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/salary/broker/"+n[0]+"/reject.json";Object(d.f)(a,"POST","",e,i)}},m={getActorSalaryList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/salary/actor.json",o={start:n,limit:a};s&&(s.unionId?o.orgId=s.unionId:s.platId&&(o.orgId=s.platId),(s.status||0==s.status)&&(o.status=s.status),s.nickname&&(o.nickname=s.nickname),s.thirdId&&(o.thirdId=s.thirdId),s.date&&(o.startDate=Object(d.d)(s.date),o.endDate=Object(d.e)(s.date))),Object(d.f)(r,"GET",o,e,i)},agreeActorApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/salary/actor/"+n[0]+"/distribute.json";Object(d.f)(a,"POST","",e,i)},rejectActorApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/salary/actor/"+n[0]+"/reject.json";Object(d.f)(a,"POST","",e,i)}},g={getUnionSalaryList:function(t,e,i){var n=t.start,a=t.limit,s=t.filter,r=config_server.server_api+"/salary/union.json",o={start:n,limit:a};s&&(s.unionId?o.orgId=s.unionId:s.platId&&(o.orgId=s.platId),""==s.status&&0!==s.status||(o.status=s.status),s.date&&(o.startDate=Object(d.d)(s.date),o.endDate=Object(d.e)(s.date)),s.salaryType&&(o.salaryType=s.salaryType)),Object(d.f)(r,"GET",o,e,i)},agreeUnionApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/salary/union/"+n[0]+"/confirm.json";Object(d.f)(a,"POST","",e,i)},rejectActorApply:function(t,e,i){var n=t.list,a=config_server.server_api+"/salary/actor/"+n[0]+"/reject.json";Object(d.f)(a,"POST","",e,i)}};e.a=a()({},f,h,p,v,m,g)},"3c81":function(t,e){},"5++W":function(t,e){},"54Yy":function(t,e){},"57Vo":function(t,e){},"5fko":function(t,e){},"675M":function(t,e){},"8Tgh":function(t,e){},"93UE":function(t,e){},"9OpG":function(t,e){},Ap0p:function(t,e){},BDGY:function(t,e){},DP7s:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i("R2SV"),a=function(t){t.filter("timesToDate",function(t,e){return e||(e="yyyy-MM-dd HH:mm"),t?Object(n.g)(t,e):""}),t.filter("filterOrgType",function(t){var e="";switch(t){case"SYSTEM":e="系统";break;case"PLAT":e="平台";break;case"UNION":e="公会"}return e}),t.filter("reflectStatus",function(t){var e="";switch(t){case"WAITING_APPROVAL":e="待审核";break;case"WAITING_PAY":e="待打款";break;case"CASH_DONE":e="提现成功";break;case"APPROVAL_REJECT":e="申请拒绝";break;case"PAY_REJECT":e="打款拒绝"}return e}),t.filter("salaryStatus",function(t){var e="";switch(t){case 0:e="待发放";break;case 1:e="已发放";break;case 2:e="拒绝发放"}return e}),t.filter("filterAutoPay",function(t){var e="";switch(t){case 0:e="手动";break;case 1:e="系统"}return e}),t.filter("actorStatus",function(t){var e="";switch(t){case 0:e="已启用";break;case 1:e="已停用";break;case-1:e="待编辑"}return e}),t.filter("distributeStatus",function(t){var e="";switch(t){case 0:e="未分配";break;case 1:e="已分配"}return e}),t.filter("filterMoney",function(t){return t.toFixed(2)})}},HadF:function(t,e){},I39P:function(t,e){},IcnI:function(t,e,i){"use strict";var n,a,s,r,o,l=i("7+uW"),u=i("NYxO"),c=(i("sax8"),i("bOdI")),d=i.n(c),f=i("BO1k"),h=i.n(f),p={namespaced:!0,modules:{home:{namespaced:!0,state:{scope:"nav_information",openKeys:[],bread_crumb:[],nav:[{name:"我的信息",path:"/information",uuid:"information"},{name:"账号与权限",uuid:"account",children:[{name:"账号管理",path:"/limit/account",uuid:"account_manage",parent:{name:"账号与权限",uuid:"account"}},{name:"账号组管理",path:"/limit/account_group",uuid:"account_group_manage",parent:{name:"账号与权限",uuid:"account"}}]},{name:"平台管理",path:"/platform",uuid:"plat_manage"},{name:"公会管理",path:"/group",uuid:"union_manage"},{name:"艺人管理",uuid:"actor_manage",children:[{name:"艺人分配",path:"/actor/assign",uuid:"actor_assign",parent:{name:"艺人管理",uuid:"actor_manage"}},{name:"艺人信息管理",path:"/actor/management",uuid:"actor_info_manage",parent:{name:"艺人管理",uuid:"actor_manage"}},{name:"艺人申请",path:"/actor/apply",uuid:"actor_apply",parent:{name:"艺人管理",uuid:"actor_apply"}}]},{name:"经纪人管理",path:"/agent",uuid:"broker_manage"},{name:"财务管理",uuid:"finance_manage",children:[{name:"入账管理",path:"/finance/account",uuid:"finance_income",parent:{name:"财务管理",uuid:"finance_manage"}},{name:"财务流水",path:"/finance/flow",uuid:"finance_flow",parent:{name:"财务管理",uuid:"finance_manage"}},{name:"提现管理",path:"/finance/reflect",uuid:"finance_cash",parent:{name:"财务管理",uuid:"finance_manage"}},{name:"艺人薪资结算",path:"/finance/actor",uuid:"finance_cator",parent:{name:"财务管理",uuid:"finance_manage"}},{name:"经纪人薪资结算",path:"/finance/agent",uuid:"finance_broker",parent:{name:"财务管理",uuid:"finance_manage"}},{name:"公会结算",path:"/finance/union",uuid:"finance_union",parent:{name:"财务管理",uuid:"finance_manage"}}]},{name:"统计分析",path:"/analyze",uuid:"analysis_system"},{name:"操作日志",path:"/logs",uuid:"opt_log"}],navMaps:{}},getters:{scope:function(t){return t.scope},openKeys:function(t){return t.openKeys},bread_crumb:function(t){return t.bread_crumb},nav:function(t){return t.nav},navMaps:function(t){return t.navMaps}},actions:{switchScope:function(t,e){var i=t.commit;t.state,i("SWITCH_SCOPE",e)},setOpenKeys:function(t,e){var i=t.commit;t.state,i("SET_OPEN_KEYS",e)},setOpenKeysDirect:function(t,e){var i=t.commit;t.state,i("SET_OPEN_KEYS_DIRECT",e)},setBreadCrumb:function(t,e){var i=t.commit;t.state,i("SET_BREAD_CRUMB",e)},initNav:function(t){var e=t.commit;t.state,e("INIT_NAV")},chagneRouter:function(t,e){t.commit;var i=t.state,n=t.dispatch,a=e.router;n("initNav");var s=a.path,r=i.navMaps,o=null;for(var l in r)r[l].path==s&&(o=r[l]);if(o){n("switchScope",o.uuid);var u=[];u.push(o),o.parent&&u.unshift(o.parent),n("setBreadCrumb",u)}}},mutations:(n={},d()(n,"SWITCH_SCOPE",function(t,e){t.scope=e}),d()(n,"SET_OPEN_KEYS",function(t,e){var i=t.openKeys.findIndex(function(t){return t==e});i>=0?t.openKeys.splice(i,1):t.openKeys.push(e)}),d()(n,"SET_OPEN_KEYS_DIRECT",function(t,e){t.openKeys.findIndex(function(t){return t==e})>=0||t.openKeys.push(e)}),d()(n,"SET_BREAD_CRUMB",function(t,e){e.unshift({name:"主页",uuid:"main",path:"/"}),t.bread_crumb=e}),d()(n,"INIT_NAV",function(t){var e={};!function t(i){var n=!0,a=!1,s=void 0;try{for(var r,o=h()(i);!(n=(r=o.next()).done);n=!0){var l=r.value;e[l.uuid]=l,l.children&&l.children.length>0&&t(l.children)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}}(t.nav),t.navMaps=e}),n)}}},v=i("mvHQ"),m=i.n(v),g=i("//Fk"),_=i.n(g),y={namespaced:!0,modules:{user:{namespaced:!0,state:{user:null,authorities:[],system:null,platInfo:null,unionInfo:null,banner:"",color:""},getters:{user:function(t){return t.user},authorities:function(t){return t.authorities},system:function(t){return t.system},platInfo:function(t){return t.platInfo},unionInfo:function(t){return t.unionInfo},banner:function(t){return t.banner},color:function(t){return t.color}},actions:{login:function(t,e){var i=t.commit,n=(t.state,t.dispatch),a=e.identify,s=e.password;return new _.a(function(t,e){$API.user.login({identify:a,password:s},function(e){i("INIT_USER_INFO",e),e.user&&e.user.authorityGroupId&&n("getUserAuthorities",{uuid:e.user.authorityGroupId}),i("CLEAR_ANALYZE_INFO"),n("getSystemInfo"),n("getSettingInfo"),e.user.platId&&n("getPlatInfo",{uuid:e.user.platId}),e.user.unionId&&n("getUnionInfo",{uuid:e.user.unionId}),t(e)},function(e){t(e)})})},userMy:function(t){var e=t.commit,i=(t.state,t.dispatch);return new _.a(function(t,n){$API.user.userMy(function(n){e("GET_USER_MY_INFO",n),n.user&&n.user.authorityGroupId&&i("getUserAuthorities",{uuid:n.user.authorityGroupId}),e("CLEAR_ANALYZE_INFO"),i("getSystemInfo"),i("getSettingInfo"),n.user.platId&&i("getPlatInfo",{uuid:n.user.platId}),n.user.unionId&&i("getUnionInfo",{uuid:n.user.unionId}),t(n)},function(e){t(e)})})},getUserAnalyzeInfo:function(t,e){var i=t.commit,n=(t.state,t.dispatch),a=e.user;i("CLEAR_ANALYZE_INFO"),n("getSystemInfo"),a.platId&&n("getPlatInfo",{uuid:a.platId}),a.unionId&&n("getUnionInfo",{uuid:a.unionId})},getUserAuthorities:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.uuid);return new _.a(function(t,e){$API.limit.getAccountGroupDetail({uuid:n},function(e){i("INIT_USER_AUTHORITIES",e),t(e)},function(e){t(e)})})},getUserDetail:function(t,e){t.commit,t.state,t.dispatch;var i=e.user_id;return new _.a(function(t,e){$API.user.getUserDetail({user_id:i},function(e){t(e)},function(e){t(e)})})},getSystemInfo:function(t){var e=t.commit;t.state,t.dispatch;return new _.a(function(t,i){$API.user.getSystemInfo(function(i){e("INIT_SYSTEM_INFO",i),t(i)},function(e){t(e)})})},getPlatInfo:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.uuid);return new _.a(function(t,e){$API.user.getOrgInfo({uuid:n},function(e){i("INIT_PLAT_INFO",e),t(e)},function(e){t(e)})})},getUnionInfo:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.uuid);return new _.a(function(t,e){$API.user.getOrgInfo({uuid:n},function(e){i("INIT_UNION_INFO",e),t(e)},function(e){t(e)})})},changeMobile:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.uuid),a=e.mobile;return new _.a(function(t,e){$API.user.changeMobile({uuid:n,mobile:a},function(e){i("CHANGE_MOBILE",a),t(e)},function(e){t(e)})})},getSettingInfo:function(t){var e=t.commit;t.state,t.dispatch;return new _.a(function(t,i){$API.user.getSettingInfo({key:"banner"},function(t){e("GET_USER_SETTING_INFO",{key:"banner",value:t.value})},function(t){}),$API.user.getSettingInfo({key:"color"},function(t){e("GET_USER_SETTING_INFO",{key:"color",value:t.value})},function(t){})})}},mutations:(a={},d()(a,"INIT_USER_INFO",function(t,e){t.user=e.user;var i={token:e.token,plat:"web"};localStorage.setItem("requestParam",m()(i)),$axios.defaults.params=i}),d()(a,"GET_USER_MY_INFO",function(t,e){t.user=e.user}),d()(a,"INIT_USER_AUTHORITIES",function(t,e){t.authorities=e.authorityGroup.authorities}),d()(a,"INIT_SYSTEM_INFO",function(t,e){t.system=e.org}),d()(a,"INIT_PLAT_INFO",function(t,e){t.platInfo=e.org}),d()(a,"INIT_UNION_INFO",function(t,e){t.unionInfo=e.org}),d()(a,"CLEAR_ANALYZE_INFO",function(t,e){t.system=null,t.platInfo=null,t.unionInfo=null}),d()(a,"CHANGE_MOBILE",function(t,e){t.user.mobile=e}),d()(a,"GET_USER_SETTING_INFO",function(t,e){var i=e.key,n=e.value;console.log(i),"color"==i?(console.log(n),n&&(t[i]=JSON.parse(n))):(t[i]||""==t[i])&&(t[i]=n)}),a)}}},b={namespaced:!0,modules:{actor:{namespaced:!0,state:{platFromList:[],groupList:[],agentList:[],actorList:[]},getters:{platFromList:function(t){return t.platFromList},groupList:function(t){return t.groupList},agentList:function(t){return t.agentList},actorList:function(t){return t.actorList}},actions:{getActorList:function(t,e){t.commit,t.state,t.dispatch;var i=e.currentPage,n=e.limit,a=e.filter,s=(i-1)*n;return new _.a(function(t,e){$API.actor.getActorList({start:s,limit:n,filter:a},function(e){t(e)})})},deleteActor:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.actor.deleteActor({list:i},function(e){t(e)})})},assignActor:function(t,e){t.commit,t.state,t.dispatch;var i=e.orgId,n=e.list;return new _.a(function(t,e){$API.actor.assignActor({orgId:i,list:n},function(e){t(e)})})},getApplyList:function(t,e){t.commit,t.state,t.dispatch;var i=e.currentPage,n=e.limit,a=e.filter,s=(i-1)*n;return new _.a(function(t,e){$API.actor.getApplyList({start:s,limit:n,filter:a},function(e){t(e)})})},changeApplyStatus:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid,n=e.status;return new _.a(function(t,e){$API.actor.changeApplyStatus({uuid:i,status:n},function(e){t(e)})})},deleteApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.actor.deleteApply({list:i},function(e){t(e)})})}},mutations:(s={},d()(s,"INIT_PLATFROM_LIST",function(t,e){t.platFromList=e}),d()(s,"INIT_GROUP_LIST",function(t,e){t.groupList=e}),d()(s,"INIT_AGENT_LIST",function(t,e){t.agentList=e}),d()(s,"INIT_ACTOR_LIST",function(t,e){t.actorList=e}),s)}}},I={namespaced:!0,modules:{limit:{namespaced:!0,state:{accountGroup:[],total:0,currentPage:1,limit:10,authorities:[]},getters:{accountGroup:function(t){return t.accountGroup},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit},authorities:function(t){return t.authorities}},actions:{getAccountGroup:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=(n-1)*a;return new _.a(function(t,e){$API.limit.getAccountGroup({start:s,limit:a},function(e){i("INIT_ACCOUNT_GROUP",{resp:e,currentPage:n,limit:a}),t(e)})})},getAuthoritiesList:function(t){var e=t.commit;t.state,t.dispatch;return new _.a(function(t,i){$API.limit.getAuthoritiesList(function(i){e("INIT_AUTHORITIES_LIST",i),t(i)})})},getAccountGroupDetail:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid;return new _.a(function(t,e){$API.limit.getAccountGroupDetail({uuid:i},function(e){t(e)})})},deleteAccountGroup:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid;return new _.a(function(t,e){$API.limit.deleteAccountGroup({uuid:i},function(e){t(e)})})}},mutations:(r={},d()(r,"INIT_ACCOUNT_GROUP",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.accountGroup=i.authorityGroup,t.total=i.count}),d()(r,"INIT_AUTHORITIES_LIST",function(t,e){t.authorities=e.authorities}),r)},account:{namespaced:!0,state:{accountList:[],total:0,currentPage:1,limit:10},getters:{accountList:function(t){return t.accountList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getAccountList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.limit.getAccountList({start:r,limit:a,filter:s},function(e){i("INIT_ACCOUNT_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},deleteAccount:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid;return new _.a(function(t,e){$API.limit.deleteAccount({uuid:i},function(e){t(e)})})}},mutations:d()({},"INIT_ACCOUNT_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.accountList=i.list,t.total=i.count})}}},C={namespaced:!0,modules:{platform:{namespaced:!0,state:{platList:[],total:0,currentPage:1,limit:20},getters:{platList:function(t){return t.platList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getPlatFormList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.orgId),a=e.status,s=e.searchKey,r=e.currentPage,o=e.limit,l=(r-1)*o;return new _.a(function(t,e){$API.platform.getPlatFormList({orgId:n,status:a,searchKey:s,start:l,limit:o},function(e){i("INIT_PLATFROM_LIST",{resp:e,currentPage:r,limit:o}),t(e)})})},deletePlat:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid;return new _.a(function(t,e){$API.platform.deletePlat({uuid:i},function(e){t(e)})})}},mutations:d()({},"INIT_PLATFROM_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.platList=i.list,t.total=i.count})}}},w={namespaced:!0,modules:{group:{namespaced:!0,state:{groupList:[],total:0,currentPage:1,limit:20},getters:{groupList:function(t){return t.groupList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getGroupList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.orgId),a=e.parentId,s=e.filter,r=e.status,o=e.searchKey,l=e.currentPage,u=e.limit,c=(l-1)*u;return new _.a(function(t,e){$API.group.getGroupList({start:c,limit:u,orgId:n,filter:s,parentId:a,status:r,searchKey:o},function(e){i("INIT_GROUP_LIST",{resp:e,currentPage:l,limit:u}),t(e)})})},deleteGroup:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid;return new _.a(function(t,e){$API.group.deleteGroup({uuid:i},function(e){t(e)})})}},mutations:d()({},"INIT_GROUP_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.groupList=i.list,t.total=i.count})}}},k={namespaced:!0,modules:{account:{namespaced:!0,state:{accountList:[],total:0,currentPage:1,limit:20,analyze:{}},getters:{accountList:function(t){return t.accountList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit},analyze:function(t){return t.analyze}},actions:{getAccountList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=e.sorters,o=(n-1)*a;return new _.a(function(t,e){$API.finance.getAccountList({start:o,limit:a,filter:s,sorters:r},function(e){i("INIT_ACCOUNT_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},deleteAccount:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.deleteAccount({list:i},function(e){t(e)})})},calculateAccount:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.calculateAccount({list:i},function(e){t(e)})})},autoCalculate:function(t){t.commit,t.state,t.dispatch;return new _.a(function(t,e){$API.finance.autoCalculate({},function(e){t(e)})})}},mutations:d()({},"INIT_ACCOUNT_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.accountList=i.list,t.total=i.count,t.analyze=i})},flow:{namespaced:!0,state:{flowList:[],total:0,currentPage:1,limit:20},getters:{flowList:function(t){return t.flowList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getFlowList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.finance.getFlowList({start:r,limit:a,filter:s},function(e){i("INIT_FLOW_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})}},mutations:d()({},"INIT_FLOW_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.flowList=i.list,t.total=i.count})},reflect:{namespaced:!0,state:{reflectList:[],total:0,currentPage:1,limit:20},getters:{reflectList:function(t){return t.reflectList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getReflectList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.finance.getReflectList({start:r,limit:a,filter:s},function(e){i("INIT_REFLECT_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},agreeApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.agreeApply({list:i},function(e){t(e)})})},rejectApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.rejectApply({list:i},function(e){t(e)})})}},mutations:d()({},"INIT_REFLECT_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.reflectList=i.list,t.total=i.count})},actor:{namespaced:!0,state:{salaryList:[],total:0,currentPage:1,limit:20},getters:{salaryList:function(t){return t.salaryList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getActorSalaryList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.finance.getActorSalaryList({start:r,limit:a,filter:s},function(e){i("INIT_ACTOR_SALARY_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},agreeApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.agreeActorApply({list:i},function(e){t(e)})})},rejectApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.rejectActorApply({list:i},function(e){t(e)})})}},mutations:d()({},"INIT_ACTOR_SALARY_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.salaryList=i.list,t.total=i.count})},agent:{namespaced:!0,state:{agentList:[],total:0,currentPage:1,limit:20},getters:{agentList:function(t){return t.agentList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getAgentList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.finance.getAgentList({start:r,limit:a,filter:s},function(e){i("INIT_AGENT_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},agreeApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.agreeAgentApply({list:i},function(e){t(e)})})},rejectApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.rejectAgentApply({list:i},function(e){t(e)})})}},mutations:d()({},"INIT_AGENT_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.agentList=i.list,t.total=i.count})},union:{namespaced:!0,state:{salaryList:[],total:0,currentPage:1,limit:20},getters:{salaryList:function(t){return t.salaryList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getUnionSalaryList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.finance.getUnionSalaryList({start:r,limit:a,filter:s},function(e){i("INIT_UNION_SALARY_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},agreeApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.agreeUnionApply({list:i},function(e){t(e)})})},rejectApply:function(t,e){t.commit,t.state,t.dispatch;var i=e.list;return new _.a(function(t,e){$API.finance.rejectActorApply({list:i},function(e){t(e)})})}},mutations:d()({},"INIT_UNION_SALARY_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.salaryList=i.list,t.total=i.count})}}},L={namespaced:!0,modules:{agent:{namespaced:!0,state:{agentList:[],total:0,currentPage:1,limit:20},getters:{agentList:function(t){return t.agentList},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit}},actions:{getAgentList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=e.filter,r=(n-1)*a;return new _.a(function(t,e){$API.agent.getAgentList({start:r,limit:a,filter:s},function(e){i("INIT_AGENT_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},deleteAgent:function(t,e){t.commit,t.state,t.dispatch;var i=e.uuid;return new _.a(function(t,e){$API.agent.deleteAgent({uuid:i},function(e){t(e)})})}},mutations:d()({},"INIT_AGENT_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.agentList=i.list,t.total=i.count})}}},S={namespaced:!0,modules:{logs:{namespaced:!0,state:{logs:[],total:0,currentPage:1,limit:20,logs_types:[],logs_maps:{}},getters:{logs:function(t){return t.logs},total:function(t){return t.total},currentPage:function(t){return t.currentPage},limit:function(t){return t.limit},logs_types:function(t){return t.logs_types},logs_maps:function(t){return t.logs_maps}},actions:{getLogsList:function(t,e){var i=t.commit,n=(t.state,t.dispatch,e.currentPage),a=e.limit,s=(n-1)*a;return new _.a(function(t,e){$API.logs.getLogsList({start:s,limit:a},function(e){i("INIT_LOGS_LIST",{resp:e,currentPage:n,limit:a}),t(e)})})},getLogsTypes:function(t){var e=t.commit;t.state,t.dispatch;return new _.a(function(t,i){$API.logs.getLogsTypes({},function(i){e("INIT_LOGS_TYPES",{resp:i}),t(i)})})}},mutations:(o={},d()(o,"INIT_LOGS_LIST",function(t,e){var i=e.resp,n=e.currentPage,a=e.limit;t.currentPage=n,t.limit=a,t.logs=i.list,t.total=i.count}),d()(o,"INIT_LOGS_TYPES",function(t,e){var i=e.resp;t.logs_types=i.list;var n={},a=!0,s=!1,r=void 0;try{for(var o,l=h()(i.list);!(a=(o=l.next()).done);a=!0){var u=o.value;n[u.value]=u.name}}catch(t){s=!0,r=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw r}}t.logs_maps=n}),o)}}},x=(i("9OpG"),{namespaced:!0,modules:{analyze:{namespaced:!0,state:{},getters:{},actions:{getAnalyzeList:function(t,e){t.commit,t.state,t.dispatch;var i=e.currentPage,n=e.limit,a=e.filter,s=(i-1)*n;return new _.a(function(t,e){$API.analyze.getAnalyzeList({start:s,limit:n,filter:a},function(e){t(e)})})}},mutations:{}}}});l.default.use(u.a);var T=new u.a.Store({modules:{homeStore:p,userStore:y,actorStore:b,limitStore:I,platStore:C,groupStore:w,financeStore:k,agentStore:L,logsStore:S,analyzeStore:x},plugins:[]});e.a=T},KQo8:function(t,e){},LRFw:function(t,e){},LWH4:function(t,e){},M93x:function(t,e,i){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},n,!1,function(t){i("5++W")},null,null);e.a=a.exports},MxK8:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=i("7+uW"),n=i("M93x"),a=i("YaEn"),s=i("IcnI"),r=i("j1ja"),o=(i.n(r),i("zL8q")),l=i.n(o),u=i("tvR6"),c=(i.n(u),i("DP7s"));i("n5Qe"),i("d2gY");e.default.use(l.a),Object(c.a)(e.default),e.default.config.productionTip=!1,t.eventHub=new e.default,t.$router=a.a,new e.default({el:"#app",router:a.a,store:s.a,render:function(t){return t(n.a)}})}.call(e,i("DuR2"))},QRaY:function(t,e){},Qed5:function(t,e,i){"use strict";var n=i("7+uW"),a={methods:{afterEnter:function(){var t=this;this.duration>0&&setTimeout(function(){t.close()},this.duration)},afterLeave:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},close:function(){this.show=!1}},data:function(){return{type:"info",content:"",duration:1500,show:!1,mode:null}},mounted:function(){var t=this;this.$nextTick(function(){t.show=!0})}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"toast-fade"},on:{"after-enter":t.afterEnter,"after-leave":t.afterLeave}},[t.show?i("div",{class:{toast:!0,line:"line"==t.mode,info:"info"==t.type,warn:"warn"==t.type,success:"success"==t.type,error:"error"==t.type}},[t._t("default",[i("div",{staticClass:"icon"}),t._v(" "),i("div",{staticClass:"content"},[t._v(t._s(t.content))])])],2):t._e()])},staticRenderFns:[]};var r=i("VU/8")(a,s,!1,function(t){i("VoCX")},"data-v-411df41f",null).exports,o={props:{content:{type:String,default:null},url:{type:String,default:null}},methods:{refreshWindow:function(){window.location.reload()}},data:function(){return{urlShow:!1}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"line"},[i("div",{staticClass:"line-content"},[i("div",[t._v(t._s(t.content))]),t._v(" "),i("div",{directives:[{name:"title",rawName:"v-title",value:"刷新页面",expression:"'刷新页面'"}],staticClass:"refresh",on:{click:t.refreshWindow}}),t._v(" "),t.url?i("div",{staticClass:"view-url",on:{click:function(e){t.urlShow=!t.urlShow}}},[t._v("查看详情")]):t._e()]),t._v(" "),t.urlShow&&t.url?i("div",{staticClass:"line-url"},[t._v(t._s(t.url))]):t._e()])},staticRenderFns:[]};var u=i("VU/8")(o,l,!1,function(t){i("93UE")},"data-v-1e511f28",null).exports,c=n.default.extend(r),d=void 0,f=void 0,h=function(t){"string"==typeof(t=t||{})&&(t={content:t});var e=void 0;t.render&&"function"==typeof t.render&&(e=t.render,delete t.render),d=new c({data:t}),e&&(d.$slots.default=e(d.$createElement)),document.getElementById("app").appendChild(d.$mount().$el)};h.line={show:function(t){if(t=t||{},f){var e=d.$createElement;d.$slots.default=e(u,{props:{content:"连接服务器失败，请检查网络设置",url:t.url?t.url:null}}),d.$forceUpdate()}else h({type:"warn",mode:"line",duration:0,render:function(e){return e(u,{props:{content:"连接服务器失败，请检查网络设置",url:t.url?t.url:null}})}}),f=d._uid},hide:function(){f&&(d.close(),d=void 0,f=void 0)}};var p=h;e.a=p},R2SV:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"g",function(){return s}),i.d(e,"f",function(){return o}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"e",function(){return d});var n=i("Qed5"),a=function(t,e){var i={path:t,query:{}};$router.push(i)},s=function(t,e){if(""==t||null==t||void 0==t)return"";var i=new Date(parseInt(t));return r(i,e||"yyyy-MM-dd HH:mm:ss")},r=function(t,e){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[t.getDay()+""])),i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e},o=function(t,e,i,s,r){var o={method:e,url:t};"get"==e.toLowerCase()?"string"==typeof i?o.url=o.url+"?"+i:o.params=i:o.data=i,$axios(o).then(function(t){var e=t.data;e.result&&0!=e.result?12==e.result?a("/login"):-10100==e.result||(r?r&&r(e):Object(n.a)({content:e.msg||"报错了",type:"error"})):s&&s(e)}).catch(function(t,e,i){console.log(t),r?r(t):console.log("报错了")})},l=(new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),function(t,e){var i=e.length+11,n=e.length+3;return t.length>i?t.substr(0,5)+"..."+t.substr(t.length-n,n):t}),u=function(t){return t<1024?t+"B":t>1024&&t<1048576?(t/1024).toFixed(2)+"K":t>1048576&&t<1073741824?(t/1048576).toFixed(2)+"M":(t/1073741824).toFixed(2)+"G"},c=function(t){var e=new Date(t);return e.setDate(1),e.getTime()},d=function(t){var e=new Date(t),i=e.getMonth(),n=++i,a=new Date(e.getFullYear(),n,1);return new Date(a-864e5).getTime()}},Rkvy:function(t,e){},SOEi:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("2aIq"),r=i.n(s),o=i("R2SV"),l=(i("mw3O"),{getLogsList:function(t,e,i){var n=t.start,a=t.limit,s=config_server.server_api+"/logs.json",r={start:n,limit:a};Object(o.f)(s,"GET",r,e,i)},getLogsTypes:function(t,e,i){r()(t);var n=config_server.server_api+"/logs/types.json";Object(o.f)(n,"GET",{},e,i)}});e.a=a()({},l)},UZPD:function(t,e){},UcPi:function(t,e){},VoCX:function(t,e){},Xx0c:function(t,e,i){t.exports=i.p+"static/img/banner.b6ede86.jpeg"},YFwf:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("R2SV"),r=(i("mw3O"),{getPlatFormList:function(t,e,i){var n=t.orgId,a=t.status,r=t.searchKey,o=t.start,l=t.limit,u=config_server.server_api+"/org.json",c={orgId:n,orgType:"PLAT",start:o,limit:l};a&&(c.status=a),r&&(c.searchKey=r),Object(s.f)(u,"GET",c,e,i)},deletePlat:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/org/"+n+".json";Object(s.f)(a,"DELETE",{},e,i)}});e.a=a()({},r)},YaEn:function(t,e,i){"use strict";var n=i("Gu7T"),a=i.n(n),s=i("7+uW"),r=i("/ocq"),o=i("IcnI"),l=i("BO1k"),u=i.n(l),c=i("Dd8w"),d=i.n(c),f=i("NYxO"),h={computed:d()({},Object(f.c)({bread_crumb:"homeStore/home/bread_crumb"}))},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"live_breadcrumb"},t._l(t.bread_crumb,function(e,n){return i("div",{staticClass:"items"},[i("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n<t.bread_crumb.length-1&&t.bread_crumb.length>1?i("span",{staticClass:"icon el-icon-arrow-right"}):t._e()])}),0)},staticRenderFns:[]};var v=i("VU/8")(h,p,!1,function(t){i("kql1")},"data-v-44c1a250",null).exports,m=i("R2SV"),g={props:["items"],name:"nav-items",computed:d()({},Object(f.c)({openKeys:"homeStore/home/openKeys",scope:"homeStore/home/scope",user:"userStore/user/user",authorities:"userStore/user/authorities",color:"userStore/user/color"}),{filterStyle:function(){var t=this.color.active_background||"#ffffff",e=this.color.active_font||"#333333",i={};return this.scope==this.items.uuid&&(i={background:t,color:e}),i},isExpand:function(){return this.openKeys.indexOf(this.items.uuid)>=0},showNav:function(){var t=!1;if("information"==this.items.uuid)return t=!0;if(this.user&&"SUPER_ADMIN"==this.user.userType)return t=!0;var e=this.items.children&&this.items.children.length>0?"model":"name",i=this.items.uuid,n=!0,a=!1,s=void 0;try{for(var r,o=u()(this.authorities);!(n=(r=o.next()).done);n=!0){var l=r.value;l[e]!=i||1!=l.readStatus&&1!=l.writeStatus||(t=!0)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return t}}),methods:d()({},Object(f.b)({setOpenKeys:"homeStore/home/setOpenKeys",setBreadCrumb:"homeStore/home/setBreadCrumb"}),{goSwtich:function(){this.items.children&&this.items.children.length>0&&this.setOpenKeys(this.items.uuid),Object(m.a)(this.items.path)}})},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showNav?i("li",{class:{expand:t.isExpand}},[i("div",{staticClass:"title",class:{active:t.scope==t.items.uuid},style:t.filterStyle,on:{click:t.goSwtich}},[t._v(t._s(t.items.name)),t.items.children&&t.items.children.length>0?i("i",{staticClass:"el-icon",class:{"el-icon-arrow-right":!t.isExpand,"el-icon-arrow-down":t.isExpand}}):t._e()]),t._v(" "),t.items.children&&t.items.children.length>0?i("ul",t._l(t.items.children,function(t){return i("nav-items",{key:t.uuid,attrs:{items:t}})}),1):t._e()]):t._e()},staticRenderFns:[]},y=i("VU/8")(g,_,!1,null,null,null).exports,b=i("mvHQ"),I=i.n(b),C=i("d2gY"),w=C.a.server_api,k=function(t,e,i){var n=t.key,a=t.value,s=w+"/plat/setting.json",r={key:n,value:a};Object(m.f)(s,"POST",r,e,i)},L=function(t,e,i){var n=t.key,a=w+"/plat/setting.json",s={key:n};Object(m.f)(a,"GET",s,e,i)},S={components:{},props:{title:{type:String,default:"提示"},isFooter:{type:Boolean,default:!0}},methods:{afterLeave:function(){this.$emit("destroy")},close:function(){this.hide(),this.$emit("close")},submit:function(){var t=this;this.$emit("submit",function(){t.hide()})},hide:function(){this.show=!1}},data:function(){return{show:!1}},mounted:function(){var t=this;this.$nextTick(function(){t.show=!0})}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"modal-fade"},on:{"after-leave":t.afterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"modal"},[i("div",{staticClass:"bg-cover"}),t._v(" "),i("transition",{attrs:{name:"container-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"container"},[i("div",{staticClass:"article"},[i("div",{staticClass:"header"},[i("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),i("span",{staticClass:"close",attrs:{title:"关闭"},on:{click:t.close}})]),t._v(" "),i("div",{staticClass:"body",style:{"padding-bottom":t.isFooter?"0":"20px"}},[t._t("default",null,{close:t.hide})],2),t._v(" "),t.isFooter?i("div",{staticClass:"footer"},[t._t("footer",[i("el-button",{nativeOn:{click:function(e){return t.close(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("确定")])],{close:t.hide})],2):t._e()])])])],1)])},staticRenderFns:[]};var T=i("VU/8")(S,x,!1,function(t){i("fTMt")},"data-v-0274c019",null).exports,P=i("//Fk"),A=i.n(P),N={props:{item:{type:Object,default:null},index:{type:Number,default:0},remove:{type:Function,default:null}},computed:{getProgress:function(){return{width:this.item.progress+"%"}},getExpand:function(){if(this.item.name){var t=this.item.name.split(".");return t[t.length-1]}return""},getFilesName:function(){var t=this.getExpand,e=this.item.name,i=t.length+11,n=t.length+3;return e.length>i?e.substr(0,8)+"..."+e.substr(e.length-n,n):e},getFileSize:function(){var t=this.item.size;return t<1024?t+"B":t>1024&&t<1048576?(t/1024).toFixed(2)+"K":(t/1048576).toFixed(2)+"M"}}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"item"},[i("div",{class:"icon icon-"+t.getExpand}),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"name",class:{error:t.item.error}},[t._v(t._s(t.getFilesName)),i("span",{staticClass:"size"},[t._v(t._s(t.getFileSize))]),t.item.error?i("span",[t._v("（上传失败）")]):t._e()]),t._v(" "),t.item.uuid&&t.item.url?i("div",{staticClass:"result"},[t._v("上传成功")]):i("div",{staticClass:"progress"},[i("div",{staticClass:"rate",style:t.getProgress})])]),t._v(" "),i("div",{staticClass:"operate",on:{click:function(e){return t.remove(t.index)}}},[i("div",{staticClass:"delete"})])])},staticRenderFns:[]};var U=i("VU/8")(N,O,!1,function(t){i("3c81")},"data-v-400f3c7f",null).exports,E=i("Qed5"),D=C.a.server_api,R=(C.a.server_user,{components:{Modal:T,Item:U},methods:{updatePercent:function(t,e){var i=this.list.findIndex(function(e){return t==e.id});i>=0&&(this.list[i].progress=e)},updateUuidUrl:function(t,e,i){var n=this.list.findIndex(function(e){return t==e.id});n>=0&&(this.list[n].uuid=e,this.list[n].url=i)},updateUuidExpand:function(t,e,i){var n=this.list.findIndex(function(e){return t==e.id});n>=0&&(this.list[n].uuid=e,this.list[n].expand=i)},updateUuidError:function(t,e){var i=this.list.findIndex(function(e){return t==e.id});i>=0&&(this.list[i].error=e)},removeFile:function(t){this.list.splice(t,1)},destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy(),this.destroyed&&this.destroyed()},submit:function(t){var e=this.list.filter(function(t){return!t.error&&!!t.uuid}).map(function(t){return{name:t.name,size:t.size,uuid:t.uuid,url:t.url,expand:t.expand}});this.callback&&this.callback(e),t()},uploader:function(){var t=this;Qiniu.uploader({disable_statistics_report:!1,runtimes:"html5,flash,html4",browse_button:this.uploadId,uptoken_func:function(t){return t.uptoken},get_new_uptoken:!0,domain:"http://xinghuo.vnest.net",max_file_size:"1000mb",flash_swf_url:"/static/plupload/js/Moxie.swf",max_retries:3,chunk_size:"4mb",auto_start:!1,init:{FilesAdded:function(e,i){var n=new Array;i.forEach(function(i){t.list.push({id:i.id,name:i.name,size:i.size,progress:0,uuid:null,url:null,error:!1,expand:i.name.replace(/.+\./,"")}),n.push(new A.a(function(n,a){var s,r,o,l,u,c,d,f,h,p,v;s={reqType:t.reqType,name:i.name,expand:i.name.replace(/.+\./,""),size:i.size,resId:t.resId,folderId:t.folderId,projectId:t.projectId},r=function(t){i.uptoken=t.ticket,n(t.ticket)},o=function(a){n(),t.updateUuidError(i.id,!0),Object(E.a)({type:"error",content:a.msg,duration:3e3}),e.removeFile(i)},l=s.reqType,u=s.name,c=s.expand,d=s.size,f=s.resId,h=s.folderId,p=s.projectId,v={req_type:l,name:u,expand:c,size:d},f&&(v.res_id=f),h&&(v.folder_id=h),p&&(v.project_id=p),Object(m.f)(D+"/files/storage/ticket.json","GET",v,r,o)}))}),A.a.all(n).then(function(t){t.some(function(t){return!!t})&&e.start()})},BeforeUpload:function(t,e){},UploadProgress:function(e,i){t.updatePercent(i.id,i.percent)},FileUploaded:function(e,i,n){var a=JSON.parse(n.response);if("ok"==a.error){var s=JSON.parse(a.file);t.updateUuidUrl(i.id,s.uuid,s.url),t.updateUuidExpand(i.id,s.uuid,s.expand)}},Error:function(t,e,i){console.log(e,i)},UploadComplete:function(){},Key:function(t,e){}}})}},data:function(){return{list:[],reqType:"general_file",folderId:null,projectId:null,resId:null,callback:null,destroyed:null,uploadId:null}},created:function(){this.uploadId=(new Date).getTime()+""},mounted:function(){var t=this;this.$nextTick(function(){t.uploader()})}}),M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"上传附件"},on:{destroy:t.destroy},scopedSlots:t._u([{key:"footer",fn:function(e){return[i("div",{staticStyle:{"margin-right":"10px"},attrs:{id:t.uploadId}},[i("el-button",{attrs:{size:"mini"}},[t._v("上传附件")])],1),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(i){return t.submit(e.close)}}},[t._v("确认")])]}}])},[i("div",{staticClass:"upload"},[i("ul",{staticClass:"file-list"},t._l(t.list,function(e,n){return i("item",{key:n,attrs:{item:e,index:n,remove:t.removeFile}})}),1)])])},staticRenderFns:[]};var j=i("VU/8")(R,M,!1,function(t){i("675M")},"data-v-1b2f86d1",null).exports,H=s.default.extend(j),G=void 0,z=function(t){"string"==typeof(t=t||{})&&(t={upload:t}),t.list&&(t.list=JSON.parse(I()(t.list))),G=new H({data:t}),document.getElementById("app").appendChild(G.$mount().$el)},F=i("fZjL"),B=i.n(F),q=i("Zx67"),Q=i.n(q),V=i("Zrlr"),K=i.n(V),Y=i("wxAW"),W=i.n(Y),J=i("zwoO"),X=i.n(J),Z=i("yEsh"),tt=i.n(Z),et=i("Pf15"),it=i.n(et),nt=(i("0dgG"),Quill.import("blots/block/embed")),at=Quill.import("blots/embed"),st=function(t){function e(){return K()(this,e),X()(this,(e.__proto__||Q()(e)).apply(this,arguments))}return it()(e,t),W()(e,null,[{key:"create",value:function(t){var i=tt()(e.__proto__||Q()(e),"create",this).call(this,t);return i.setAttribute("contenteditable",!1),i.setAttribute("style","height:0px; margin-top:10px; margin-bottom:10px;"),i}}]),e}(at);st.blotName="hr",st.tagName="hr";var rt=function(t){function e(){return K()(this,e),X()(this,(e.__proto__||Q()(e)).apply(this,arguments))}return it()(e,t),W()(e,null,[{key:"create",value:function(t){var i=tt()(e.__proto__||Q()(e),"create",this).call(this);return window.n=i,i.dataset.file=I()(t),i.setAttribute("contenteditable",!1),i.setAttribute("title","点击下载"),i.innerHTML=Object(m.b)(t.name,t.expand)+"  "+Object(m.c)(t.size),i}},{key:"value",value:function(t){return JSON.parse(t.dataset.file)}}]),e}(nt);rt.blotName="file",rt.tagName="div",rt.className="ql-module-file";var ot=function(){function t(e){K()(this,t),this.quill=e,this.toolbar=e.getModule("toolbar"),void 0!==this.toolbar&&this.toolbar.addHandler("at",this.checkAt);var i=document.getElementsByClassName("ql-at");i&&[].slice.call(i).forEach(function(t){t.innerHTML='<svg viewBox="0 0 1024 1024" width="18" height="18"><path class="ql-fill" d="M907.6 814.2c-47.8 50.6-104.6 87.6-170.4 110.8C671.4 948.4 602 960 529 960c-69.8 0-133.4-11-190.6-33.2-57.2-22-106.2-52.8-146.6-92.2-40.6-39.4-72-86.6-94.4-141.6-22.4-55-33.4-115-33.4-180 0-64.2 12.2-123.6 36.6-178.2 24.4-54.6 57.6-102 99.8-142.2 42.2-40.2 91.4-71.6 148-94.6C404.6 75.4 465 64 529 64c55.2 0 108.8 8 160.6 24 52 16 98 40.2 138.2 72.2 40.2 32.2 72.2 72.2 96.2 120.4 24 48.2 36 104.8 36 169.8 0 48.2-6.6 90.8-20 127.6-13.4 37-31.2 67.8-53.6 92.8-22.4 25-47.8 43.6-76.6 56-28.8 12.4-59 18.6-90.6 18.6-32.4 0-58.4-7.6-78-22.8-19.4-15.2-29.2-34.6-29.2-57.8l-6 0c-12.2 19.2-30.8 37.6-56 54.8-25.2 17.2-56 26-92.6 26-55.2 0-97.8-18-127.8-54.2-30-36.2-45-83-45-141 0-33.8 5.6-67 17-100 11.4-33 27.6-62.2 48.6-88 21-25.6 46.2-46.4 75.4-62 29.2-15.6 61.6-23.4 97.4-23.4 30.8 0 56.8 6.4 78 19.2 21 12.8 34.8 28.6 41.4 47l1.2 0 9.8-48.2 108.4 0L714 522.8c-1.6 11.2-3.8 23.6-6.6 37.4-2.8 13.6-4.2 26.4-4.2 38.6 0 13.6 2.6 25 8 34.4 5.2 9.2 15.6 13.8 31 13.8 31.6 0 57.8-16.8 78.6-50.6 20.6-33.8 31-79 31-136 0-48.2-8.2-91-24.4-128.2-16.2-37.4-38.8-68.6-67.6-94-28.8-25.2-63.2-44.4-102.8-57.2-39.8-12.8-83.2-19.2-130.2-19.2-51.2 0-98 9-140.6 27s-79 43-109 74.6c-30 31.8-53.4 69-70 112C190.4 418.2 182 464.6 182 514.4c0 53 8.8 100.8 26.2 143.4 17.4 42.6 42 78.8 73.6 109 31.6 30.2 69.4 53.2 113.2 69.2 43.8 16 92.2 24 144.8 24 65.8 0 122.4-10.4 169.8-31.4 47.4-20.8 91-49.8 130.8-86.8L907.6 814.2zM526.6 376c-19.4 0-36.6 5.6-51.2 16.8-14.6 11.2-27 25.4-37.2 42.8-10.2 17.2-17.8 36.4-23.2 57.2-5.2 20.8-8 41-8 60.2 0 9.6 1 19.8 3 30.8 2 10.8 6 20.8 12.2 30.2 6 9.2 14 16.8 23.8 22.8 9.8 6 22.8 9 39 9 22 0 40.6-5.4 56-16.2 15.4-10.8 28-24.4 37.8-41 9.8-16.4 16.8-34.4 21.4-53.6 4.4-19.2 6.6-37 6.6-53 0-12.8-1.2-25.4-3.6-38-2.4-12.4-6.6-23.6-12.8-33.8-6-10-14.4-18.2-25-24.6C555 379.2 542 376 526.6 376z"></path></svg>'})}return W()(t,[{key:"checkAt",value:function(){var t=this.quill.getSelection(),e=(this.quill.getBounds(t.index),this.quill.container.getBoundingClientRect(),t.index);0==e&&this.quill.insertEmbed(e,"empty",Quill.sources.USER)}}]),t}(),lt=function(t){function e(){return K()(this,e),X()(this,(e.__proto__||Q()(e)).apply(this,arguments))}return it()(e,t),W()(e,null,[{key:"create",value:function(t){var i=tt()(e.__proto__||Q()(e),"create",this).call(this);return i.innerHTML="@"+t.name+"&nbsp;&nbsp;",i.setAttribute("user",I()(t)),i}},{key:"value",value:function(t){return t.getAttribute("user")}}]),e}(at);lt.blotName="at",lt.tagName="b";var ut=function(t){function e(){return K()(this,e),X()(this,(e.__proto__||Q()(e)).apply(this,arguments))}return it()(e,t),W()(e,null,[{key:"create",value:function(){var t=tt()(e.__proto__||Q()(e),"create",this).call(this);return t.innerHTML="&nbsp;",t}},{key:"value",value:function(t){}}]),e}(at);ut.blotName="empty",ut.tagName="b";var ct=function(){function t(e){var i=e.container,n=e.toolbar,a=e.theme,s=void 0===a?"bubble":a,r=e.change,o=e.height,l=e.placeholder,u=void 0===l?"":l,c=e.minHeight;K()(this,t),this.container=i,this.toolbar=n||[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"],["emoji"],["at"],["clean"]],this.theme=s,this.change=r,this.height=o,this.minHeight=c,this.placeholder=u,this.id="Editor_"+(new Date).getTime()+"_",this.Quill=null,this.init(),this.create(),this.bind(),mt(),gt(this.id,this.Quill)}return W()(t,[{key:"init",value:function(){Quill.register(st),Quill.register(rt),Quill.register("modules/toolbar_at",ot),Quill.register({"formats/at":lt,"formats/empty":ut})}},{key:"create",value:function(){var t=document.createElement("div");t.id=this.id,this.height&&(t.style.height=this.height),this.minHeight&&(t.style.minHeight=this.minHeight),this.container.appendChild(t),this.Quill=new Quill("#"+this.id,{bounds:"#"+this.id,placeholder:this.placeholder,modules:{formula:!0,syntax:!0,toolbar:{container:this.toolbar,handlers:{emoji:function(){},at:function(){}}},imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"},modules:["Resize","DisplaySize","Toolbar"]},toolbar_emoji:!0,toolbar_at:!0},theme:this.theme})}},{key:"bind",value:function(){var t=this,e=null;document.querySelector("#"+this.id+" .ql-editor").onfocus=function(){e&&clearTimeout(e)},document.querySelector("#"+this.id+" .ql-editor").onblur=function(){e=setTimeout(function(){},4e3)},document.querySelector("#"+this.id+" .ql-editor").onmousedown=function(e){if(2==e.button){document.querySelector("#"+t.id+" .ql-editor").innerHTML.replace(/<img.*?(?:>|\/>)/gi,"[图片]").replace(/<\/?[^>]*>/gi,"").trim()&&!0;var i=t.Quill.getSelection();i&&0!=i.length&&!0}};getRequestParam();dt(document.querySelector("#"+this.id+" .ql-editor"),this.Quill),this.Quill.on("editor-change",function(e,i){"text-change"===e||"selection-change"===e&&i&&t.change&&t.change()}),this.Quill.getModule("toolbar").addHandler("image",function(){var e=t.Quill.getSelection();ft().then(function(i){t.Quill.insertEmbed(e?e.index:0,"image",i.url,Quill.sources.USER)})}),this.Quill.keyboard.addBinding({key:"1",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"header","H1",Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"2",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"header","H2",Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"3",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"header","H3",Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"4",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"header","H4",Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"5",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"header","H5",Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"6",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"header","H6",Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"d",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"hr","hr",Quill.sources.USER),t.Quill.setSelection(e.index+2,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"r",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"blockquote",{},Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"j",shortKey:!0},function(e,i){t.Quill.insertEmbed(e.index+1,"code-block",{},Quill.sources.USER),t.Quill.setSelection(e.index+1,Quill.sources.SILENT)}),this.Quill.keyboard.addBinding({key:"k",shortKey:!0},function(e,i){if(null!=e)if(0==e.length){var n=t.Quill.getFormat();B()(n).forEach(function(e){t.Quill.format(e,!1)})}else t.Quill.removeFormat(e,Quill.sources.USER)}),this.Quill.keyboard.addBinding({key:"f",shortKey:!0},function(e,i){z({callback:function(i){i&&i.length>0&&i.forEach(function(i,n){["jpg","gif","png","gif","jpeg"].indexOf(i.expand)>=0?t.Quill.insertEmbed(e?e.index+n:0,"image",i.url,Quill.sources.USER):t.Quill.insertEmbed(e?e.index+n:0,"file",i,Quill.sources.USER),t.Quill.setSelection(e.index+1+n,Quill.sources.SILENT)})}})})}},{key:"at",get:function(){if(this.Quill){var t=this.Quill.getContents();if(t&&t.ops&&t.ops.length>0)return t.ops.filter(function(t){return!!t.insert&&!!t.insert.at&&"string"==typeof t.insert.at}).map(function(t){return JSON.parse(t.insert.at)})}return[]}}]),t}(),dt=function(t,e){t.onpaste=function(t){console.log("====================="),console.log(t);for(var i=t.clipboardData,n=0;n<i.items.length;n++){var a=i.items[n];if(console.log("====================="),console.log(a),"file"==a.kind&&a.type.match(/^image\//i)){var s=a.getAsFile();showPasteLoading(),ht(s).then(function(t){pt(t.url,e),hidePasteLoading()})}}}},ft=function(){return new A.a(function(t,e){var i=(new Date).getTime()+"quillFile",n=document.createElement("input");n.id=i,n.type="file",n.accept="image/*",n.style.display="none",n.onchange=function(e){e.target.files&&e.target.files.length?ht(e.target.files[0]).then(function(e){t(e),n.parentNode.removeChild(n),n=null}):(n.parentNode.removeChild(n),n=null)},document.body.appendChild(n),n.click()})},ht=function(t){return new A.a(function(e,i){var n=new FileReader;n.onload=function(t){var i=t.target.result;vt().then(function(t){var n=window.url="https://upload.qiniup.com/putb64/-1",a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText);"ok"==t.error&&e(JSON.parse(t.file))}else 4===a.readyState&&void 0!==a.status&&a.status},a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/octet-stream"),a.setRequestHeader("Authorization","UpToken "+t);var s=i.indexOf("base64,");a.send(i.slice(s+7))})},n.readAsDataURL(t)})},pt=function(t,e){var i=e.getSelection();i&&(e.insertEmbed(i.index,"image",t,Quill.sources.USER),e.setSelection(i.index+1,Quill.sources.SILENT))},vt=function(){var t=(new Date).getTime()+"_"+Math.ceil(1e4*Math.random())+".jpeg",e=getRequestParam(),i=new Array;return i.push("token="+e.token,"comp_id="+e.comp_id,"req_type=general_file","name="+t,"expand=jpeg"),new A.a(function(t,e){var n=new XMLHttpRequest;n.open("GET",config_server.server_api+"/files/qiniu/upload_ticket.json?"+i.join("&"),!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText).ticket;t(e)}},n.send()})},mt=function(t){window.quillEditorArray&&window.quillEditorArray.length>0&&(window.quillEditorArray=window.quillEditorArray.filter(function(t){return!!document.querySelector("#"+t.id)}))},gt=function(t,e){window.quillEditorArray||(window.quillEditorArray=[]),window.quillEditorArray.push({id:t,quill:e})},_t={components:{Modal:T},data:function(){return{title:"修改详情",placeholder:"",isEditor:!0,isFiles:!0,content:"",files:[],editorId:"modify_editor",maximize:!1,width:580,height:310,loading:!1,toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],["link"]],lastSaveTime:null,autoSave:!1,intervalId:null,lastContent:null,supportCalendar:!1,calendarTime:-1,currentTag:-1,dateTimeTagList:[{name:"一天后",value:1},{name:"三天后",value:3},{name:"七天后",value:7}]}},methods:{close:function(t){t&&t()},submit:function(t){if(this.isEditor)this.invokeCallback(!0);else{var e=this.$refs.editor.value,i=this.files;this.callback&&this.callback(e,i)}t&&t()},destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},setEditor:function(){var t=this;this.isFiles||(this.height-=30),setTimeout(function(){t.editor=new ct({placeholder:"",theme:"snow",container:t.$refs.editor,toolbar:t.toolbar,change:function(){}}),setTimeout(function(){t.editor.Quill.focus(),t.content&&(t.editor.Quill.pasteHTML(t.content),t.editor.Quill.setSelection(t.content.length))},500)})},goUpload:function(){var t=this;Upload({list:this.files,callback:function(e){t.files=e}})},setModalStyle:function(){var t=310,e=580,i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;this.maximize&&(e=i-60,t=n-51-50-44-20),this.width=e,this.height=t,this.isFiles||(this.height-=30);var a=this.height-73;(a<230||!this.maximize)&&(a=230),$(".ql-container.ql-snow").height(a)},operateModal:function(){this.maximize=!this.maximize,this.setModalStyle()},invokeCallback:function(t){var e=document.querySelector("#"+this.editor.id+" .ql-editor")&&document.querySelector("#"+this.editor.id+" .ql-editor").innerHTML||"",i=e.replace(/<img.*?(?:>|\/>)/gi,"[图片]").replace(/<\/?[^>]*>/gi,""),n=e&&e.match(/<p>[^<>]*<\/p>/);n=n?n[0].replace(/<\/?p[^>]*>/gi,"").replace(/<\/?[^>]*>/gi,""):i.replace(/<\/?p[^>]*>/gi,"").replace(/<\/?[^>]*>/gi,"");var a=this.editor.Quill.getLines();if(a&&a.length>0){var s="",r=!0,o=!1,l=void 0;try{for(var c,d=u()(a);!(r=(c=d.next()).done);r=!0){var f=c.value,h=$(f.domNode).text().trim();h&&""==s&&(s=h)}}catch(t){o=!0,l=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}s&&s!=n&&(n=s)}var p=this.files;if(e=e.replace(/&amp;/gi,"&"),i=i.replace(/&amp;/gi,"&"),t)if(this.supportCalendar){var v=-1;if(this.calendarTime>0?v=this.calendarTime:this.currentTag>0&&(v=(new Date).getTime()+24*this.currentTag*60*60*1e3,v=dateToTimes(timesToDate(v,"yyyy-MM-dd")+" 09:00:00")),v>0){var m=v,g=v+18e5,_=m-3e5,y=timesToDate(_,"s")+" "+timesToDate(_,"m")+" "+timesToDate(_,"H")+" "+timesToDate(_,"d")+" "+timesToDate(_,"M")+" ? "+timesToDate(_,"yyyy");this.callback&&this.callback(e,i,p,n,!1,{startDate:m,endDate:g,cron:y})}else this.callback&&this.callback(e,i,p,n,!1)}else this.callback&&this.callback(e,i,p,n,!1);else i.length>0&&this.lastContent!=e&&(this.lastContent=e,this.lastSaveTime=(new Date).getTime(),this.callback&&this.callback(e,i,p,n,!0))},startAutoSave:function(){this.lastContent=this.content,this.intervalId=setInterval(this.invokeCallback,1e4)},showLoading:function(){this.loading=!0},hideLoading:function(){this.loading=!1},changeTimeDate:function(t){var e=this,i=this.calendarTime;0>=i&&(i=(new Date).getTime()),DatePicker({dom:t.target,value:timesToDate(i,"yyyy-MM-dd HH:mm:ss"),clear:!0,type:"datetime",callback:function(t){t?(e.calendarTime=dateToTimes(t),e.currentTag=-1):e.calendarTime=-1}})},switchTimeTag:function(t){this.currentTag=t.value}},created:function(){this.isEditor&&this.setEditor(),this.autoSave&&this.startAutoSave(),eventHub.$on("fb-show-paste-loading",this.showLoading),eventHub.$on("fb-hide-paste-loading",this.hideLoading)},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId),eventHub.$off("fb-show-paste-loading",this.showLoading),eventHub.$off("fb-hide-paste-loading",this.hideLoading)}},yt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:t.title},on:{destroy:t.destroy},scopedSlots:t._u([{key:"footer",fn:function(e){return[i("el-button",{nativeOn:{click:function(i){return t.close(e.close)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.submit(e.close)}}},[t._v("确定")])]}}])},[i("div",{staticClass:"edit_wrapper"},[i("div",{staticClass:"maximize",class:{reduction:t.maximize},on:{click:t.operateModal}},[i("i",{staticClass:"iconfont",class:{"icon-reduction":t.maximize,"icon-maximize":!t.maximize}})]),t._v(" "),i("div",{staticClass:"editor_container",style:{height:t.height+"px",width:t.width+"px"}},[t.isEditor?i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"editor",staticClass:"editor",attrs:{id:t.editorId}}):i("textarea",{ref:"editor",staticClass:"editor-textarea",attrs:{rows:"10",placeholder:t.placeholder}})])])])},staticRenderFns:[]};var bt=i("VU/8")(_t,yt,!1,function(t){i("QRaY")},"data-v-91680eb2",null).exports,It=s.default.extend(bt),Ct=void 0,wt=function(t){"string"==typeof(t=t||{})&&(t={editor:t}),Ct=new It({data:t}),document.getElementById("app").appendChild(Ct.$mount().$el)},kt={components:{Modal:T},data:function(){return{height:200,kf:{qq:"",mobile:"",wechat:""},banner:"",color:{background:"#f4f4f4",font:"#333333",active_background:"#ffffff",active_font:"#333333"},protocol:""}},computed:{},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var t=this;return this.kf.qq?this.kf.mobile?this.kf.wechat?void k({key:"kf",value:I()(this.kf)},function(){t.$message({message:"保存成功",type:"success"}),t.destroy()}):(this.$message.error("请填写客服微信"),!1):(this.$message.error("请填写客服电话"),!1):(this.$message.error("请填写客服QQ"),!1)},submitBanner:function(){var t=this;this.banner&&k({key:"banner",value:this.banner},function(){t.$message({message:"保存成功",type:"success"}),t.destroy()})},submitColor:function(){var t=this;this.color&&k({key:"color",value:I()(this.color)},function(){t.$message({message:"保存成功",type:"success"}),t.destroy()})},getKfInfo:function(){var t=this;L({key:"kf"},function(e){e.value&&(t.kf=JSON.parse(e.value))})},getBannerInfo:function(){var t=this;L({key:"banner"},function(e){console.log(e.value),e.value&&(t.banner=e.value)})},getColorInfo:function(){var t=this;L({key:"color"},function(e){console.log(e.value),e.value&&(t.color=JSON.parse(e.value))})},getProtocol:function(){var t=this;L({key:"protocol"},function(e){console.log(e.value),e.value&&(t.protocol=e.value)})},modifyProtocol:function(){var t=this;wt({title:"修改用户协议内容",content:this.protocol,callback:function(e){console.log(e),t.protocol=e,k({key:"protocol",value:e},function(){t.$message({message:"保存成功",type:"success"})})}})},setHeight:function(){var t=document.body.clientHeight-150-40;this.height=t},goUpload:function(){var t=this;z({callback:function(e){console.log(e),e&&e.length>0&&(t.banner=e[0].url)}})}},mounted:function(){this.setHeight(),this.getBannerInfo(),this.getKfInfo(),this.getColorInfo(),this.getProtocol()}},Lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"修改配置信息"},on:{destroy:t.destroy}},[i("div",{staticClass:"change_password",style:{height:t.height+"px"}},[i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[t._v("客服信息")]),t._v(" "),i("div",{staticClass:"items clearfix"},[i("div",{staticClass:"name"},[t._v("客服QQ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"客服QQ",type:"text"},model:{value:t.kf.qq,callback:function(e){t.$set(t.kf,"qq",e)},expression:"kf.qq"}})],1)]),t._v(" "),i("div",{staticClass:"items clearfix"},[i("div",{staticClass:"name"},[t._v("客服电话")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"客服电话",type:"text"},model:{value:t.kf.mobile,callback:function(e){t.$set(t.kf,"mobile",e)},expression:"kf.mobile"}})],1)]),t._v(" "),i("div",{staticClass:"items clearfix"},[i("div",{staticClass:"name"},[t._v("客服微信")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"客服微信",type:"text"},model:{value:t.kf.wechat,callback:function(e){t.$set(t.kf,"wechat",e)},expression:"kf.wechat"}})],1)]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.submit}},[t._v("保存客服信息")])],1),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[t._v("banner背景图")]),t._v(" "),i("div",{staticClass:"items"},[t.banner?i("img",{attrs:{src:t.banner}}):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:t.goUpload}},[t._v("上传图片")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.submitBanner}},[t._v("保存banner")])],1)]),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[t._v("左侧导航栏色值")]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"color_items"},[i("span",{staticClass:"demonstration"},[t._v("背景色值：")]),t._v(" "),i("el-color-picker",{model:{value:t.color.background,callback:function(e){t.$set(t.color,"background",e)},expression:"color.background"}})],1),t._v(" "),i("div",{staticClass:"color_items"},[i("span",{staticClass:"demonstration"},[t._v("文字色值：")]),t._v(" "),i("el-color-picker",{model:{value:t.color.font,callback:function(e){t.$set(t.color,"font",e)},expression:"color.font"}})],1),t._v(" "),i("div",{staticClass:"color_items"},[i("span",{staticClass:"demonstration"},[t._v("tab焦点背景色值：")]),t._v(" "),i("el-color-picker",{model:{value:t.color.active_background,callback:function(e){t.$set(t.color,"active_background",e)},expression:"color.active_background"}})],1),t._v(" "),i("div",{staticClass:"color_items"},[i("span",{staticClass:"demonstration"},[t._v("tab焦点文字色值：")]),t._v(" "),i("el-color-picker",{model:{value:t.color.active_font,callback:function(e){t.$set(t.color,"active_font",e)},expression:"color.active_font"}})],1)]),t._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.submitColor}},[t._v("保存色值")])],1)]),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[t._v("用户提现协议")]),t._v(" "),i("div",{staticClass:"items",domProps:{innerHTML:t._s(t.protocol)}}),t._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.modifyProtocol}},[t._v("修改协议内容")])],1)])])])},staticRenderFns:[]};var St=i("VU/8")(kt,Lt,!1,function(t){i("jC5B")},"data-v-32dfd905",null).exports,xt=s.default.extend(St),Tt=void 0,$t=function(t){"string"==typeof(t=t||{})&&(t={ChangeKf:t}),Tt=new xt({data:t}),document.getElementById("app").appendChild(Tt.$mount().$el)},Pt={components:{BreadCrumb:v,NavItems:y},computed:d()({},Object(f.c)({user:"userStore/user/user",nav:"homeStore/home/nav",banner:"userStore/user/banner",color:"userStore/user/color"}),{filterStyle:function(){return{background:this.color.background||"#f4f4f4",color:this.color.font||"#333333"}}}),data:function(){return{}},methods:d()({},Object(f.b)({setOpenKeysDirect:"homeStore/home/setOpenKeysDirect"}),{switchNav:function(){},handleCommand:function(t){if(console.log(t),"signout"==t){$axios.defaults.params={plat:"web"},localStorage.setItem("requestParam",""),Object(m.a)("/login")}else"kf"==t&&$t({})},setAllNavOpen:function(){console.log("set all nav open");var t=!0,e=!1,i=void 0;try{for(var n,a=u()(this.nav);!(t=(n=a.next()).done);t=!0){var s=n.value;s.children&&s.children.length>0&&this.setOpenKeysDirect(s.uuid)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}}}),created:function(){this.$store.dispatch("homeStore/home/initNav"),this.setAllNavOpen()}},At={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app_wrapper"},[n("div",{staticClass:"header"},[n("div",{staticClass:"logo"},[t.banner?[n("img",{attrs:{src:t.banner}})]:[n("img",{attrs:{src:i("Xx0c")}})]],2),t._v(" "),n("div",{staticClass:"user"},[n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n\t\t\t\t    "+t._s(t.user.nickname||t.user.loginName)+"\n\t\t\t\t    "),t.user.platName||t.user.unionName?[t._v("\n\t\t\t\t    \t（"+t._s(t.user.platName)+"\n\t\t\t\t\t    "),t.user.unionName?[t._v("-"+t._s(t.user.unionName))]:t._e(),t._v("\n\t\t\t\t\t    ）\n\t\t\t\t\t")]:t._e(),t._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})],2),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"signout"}},[t._v("退出登录")]),t._v(" "),t.user.platId||t.user.unionId?t._e():n("el-dropdown-item",{attrs:{command:"kf"}},[t._v("修改配置信息")])],1)],1)],1)]),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"aside",style:t.filterStyle},[n("ul",{staticClass:"root"},t._l(t.nav,function(t){return n("nav-items",{key:t.uuid,attrs:{items:t}})}),1)]),t._v(" "),n("div",{staticClass:"wrapper"},["/home"!=t.$route.path?n("div",{staticClass:"bread_crumb"},[n("bread-crumb")],1):t._e(),t._v(" "),n("div",{staticClass:"router_container"},[n("router-view")],1)])])])},staticRenderFns:[]};var Nt=i("VU/8")(Pt,At,!1,function(t){i("r4VY")},"data-v-efc3008a",null).exports,Ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[t._m(0),t._v(" "),i("div",{staticClass:"group"},[i("el-button",[t._v("默认按钮")]),t._v(" "),i("el-button",{attrs:{type:"primary"}},[t._v("主要按钮")]),t._v(" "),i("el-button",{attrs:{type:"success"}},[t._v("成功按钮")]),t._v(" "),i("el-button",{attrs:{type:"info"}},[t._v("信息按钮")]),t._v(" "),i("el-button",{attrs:{type:"warning"}},[t._v("警告按钮")]),t._v(" "),i("el-button",{attrs:{type:"danger"}},[t._v("危险按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{plain:""}},[t._v("朴素按钮")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""}},[t._v("主要按钮")]),t._v(" "),i("el-button",{attrs:{type:"success",plain:""}},[t._v("成功按钮")]),t._v(" "),i("el-button",{attrs:{type:"info",plain:""}},[t._v("信息按钮")]),t._v(" "),i("el-button",{attrs:{type:"warning",plain:""}},[t._v("警告按钮")]),t._v(" "),i("el-button",{attrs:{type:"danger",plain:""}},[t._v("危险按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{round:""}},[t._v("圆形按钮")]),t._v(" "),i("el-button",{attrs:{type:"primary",round:""}},[t._v("主要按钮")]),t._v(" "),i("el-button",{attrs:{type:"success",round:""}},[t._v("成功按钮")]),t._v(" "),i("el-button",{attrs:{type:"info",round:""}},[t._v("信息按钮")]),t._v(" "),i("el-button",{attrs:{type:"warning",round:""}},[t._v("警告按钮")]),t._v(" "),i("el-button",{attrs:{type:"danger",round:""}},[t._v("危险按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{disabled:""}},[t._v("默认按钮")]),t._v(" "),i("el-button",{attrs:{type:"primary",disabled:""}},[t._v("主要按钮")]),t._v(" "),i("el-button",{attrs:{type:"success",disabled:""}},[t._v("成功按钮")]),t._v(" "),i("el-button",{attrs:{type:"info",disabled:""}},[t._v("信息按钮")]),t._v(" "),i("el-button",{attrs:{type:"warning",disabled:""}},[t._v("警告按钮")]),t._v(" "),i("el-button",{attrs:{type:"danger",disabled:""}},[t._v("危险按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{plain:"",disabled:""}},[t._v("朴素按钮")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:"",disabled:""}},[t._v("主要按钮")]),t._v(" "),i("el-button",{attrs:{type:"success",plain:"",disabled:""}},[t._v("成功按钮")]),t._v(" "),i("el-button",{attrs:{type:"info",plain:"",disabled:""}},[t._v("信息按钮")]),t._v(" "),i("el-button",{attrs:{type:"warning",plain:"",disabled:""}},[t._v("警告按钮")]),t._v(" "),i("el-button",{attrs:{type:"danger",plain:"",disabled:""}},[t._v("危险按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{type:"primary",loading:!0}},[t._v("加载中")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",[t._v("默认按钮")]),t._v(" "),i("el-button",{attrs:{size:"medium"}},[t._v("中等按钮")]),t._v(" "),i("el-button",{attrs:{size:"small"}},[t._v("小型按钮")]),t._v(" "),i("el-button",{attrs:{size:"mini"}},[t._v("超小按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{round:""}},[t._v("默认按钮")]),t._v(" "),i("el-button",{attrs:{size:"medium",round:""}},[t._v("中等按钮")]),t._v(" "),i("el-button",{attrs:{size:"small",round:""}},[t._v("小型按钮")]),t._v(" "),i("el-button",{attrs:{size:"mini",round:""}},[t._v("超小按钮")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("备选项")]),t._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("备选项")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-radio",{attrs:{disabled:"",label:"禁用"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("备选项")]),t._v(" "),i("el-radio",{attrs:{disabled:"",label:"选中且禁用"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("备选项")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("备选项")])],1),t._v(" "),i("div",{staticClass:"group"},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),i("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.datetime,callback:function(e){t.datetime=e},expression:"datetime"}})],1),t._v(" "),i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),i("el-time-select",{attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:"选择时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),i("div",{staticClass:"group"},[i("el-button",{attrs:{plain:!0},on:{click:t.open2}},[t._v("成功")]),t._v(" "),i("el-button",{attrs:{plain:!0},on:{click:t.open3}},[t._v("警告")]),t._v(" "),i("el-button",{attrs:{plain:!0},on:{click:t.open}},[t._v("消息")]),t._v(" "),i("el-button",{attrs:{plain:!0},on:{click:t.open4}},[t._v("错误")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:t.open5}},[t._v("点击打开 Message Box")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[this._v("组件库地址："),e("a",{attrs:{href:"http://element-cn.eleme.io/#/zh-CN/component/installation",target:"_blank"}},[this._v("Element")])])}]};var Ut=[{path:"demo",component:i("VU/8")({data:function(){return{radio:"1",checked:!1,input:"",datetime:"",date:"",time:""}},methods:{open:function(){this.$message("这是一条消息提示")},open2:function(){this.$message({message:"恭喜你，这是一条成功消息",type:"success"})},open3:function(){this.$message({message:"警告哦，这是一条警告消息",type:"warning"})},open4:function(){this.$message.error("错了哦，这是一条错误消息")},open5:function(){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},Ot,!1,function(t){i("LWH4")},"data-v-3ea0c8ca",null).exports}],Et={data:function(){return{loginInfo:{identify:"",password:""},locked:!1}},methods:d()({},Object(f.b)({login:"userStore/user/login"}),{goLogin:function(){var t=this;return this.loginInfo.identify?this.loginInfo.password?void(this.locked||(this.locked=!0,setTimeout(function(){t.locked=!1},5e3),this.login({identify:this.loginInfo.identify,password:this.loginInfo.password}).then(function(e){0==e.result?Object(m.a)("/information"):t.$message({message:e.msg||"登录失败，请检查网络连接",type:"error"}),t.locked=!1}))):(this.$message({showClose:!0,message:"请输入密码",type:"error"}),!1):(this.$message({showClose:!0,message:"请输入用户名/手机号",type:"error"}),!1)}})},Dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"login_wrapper"},[i("div",{staticClass:"login_card"},[t._m(0),t._v(" "),i("div",{staticClass:"card_form"},[i("div",{staticClass:"card_title"},[t._v("输入您的帐号、密码登录")]),t._v(" "),i("el-input",{attrs:{autofocus:!0,placeholder:"用户名/手机号",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goLogin(e)}},model:{value:t.loginInfo.identify,callback:function(e){t.$set(t.loginInfo,"identify",e)},expression:"loginInfo.identify"}}),t._v(" "),i("el-input",{attrs:{placeholder:"密码",type:"password",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goLogin(e)}},model:{value:t.loginInfo.password,callback:function(e){t.$set(t.loginInfo,"password",e)},expression:"loginInfo.password"}}),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.locked},on:{click:t.goLogin}},[t._v("登录")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card_header"},[this._v("\n\t\t\t\t登录"),e("span",{staticClass:"name"},[this._v("艺人管理平台")])])}]};var Rt=i("VU/8")(Et,Dt,!1,function(t){i("oJVm")},"data-v-1bdcfcf2",null).exports,Mt=C.a.server_api,jt={components:{Modal:T},data:function(){return{height:200,password:{old:"",new:"",confirm:""}}},computed:{},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){var e,i,n,a,s,r,o,l=this;return this.password.old?this.password.new?this.password.confirm?this.password.new!=this.password.confirm?(this.$message.error("新密码和确认密码不一致"),!1):(e={oldPassword:this.password.old,password:this.password.new},i=function(){l.$message({message:"密码修改成功",type:"success"}),t&&t()},a=e.password,s=e.oldPassword,r=Mt+"/users/password.json",o={oldPassword:s,password:a},void Object(m.f)(r,"POST",o,i,n)):(this.$message.error("请填写确认密码"),!1):(this.$message.error("请填写新密码"),!1):(this.$message.error("请填写旧密码"),!1)},setHeight:function(){this.height=200}},mounted:function(){this.setHeight()}},Ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"修改密码"},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"change_password",style:{height:t.height+"px"}},[i("div",{staticClass:"items clearfix"},[i("div",{staticClass:"name"},[t._v("旧密码")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"旧密码",type:"password"},model:{value:t.password.old,callback:function(e){t.$set(t.password,"old",e)},expression:"password.old"}})],1)]),t._v(" "),i("div",{staticClass:"items clearfix"},[i("div",{staticClass:"name"},[t._v("新密码")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"新密码",type:"password"},model:{value:t.password.new,callback:function(e){t.$set(t.password,"new",e)},expression:"password.new"}})],1)]),t._v(" "),i("div",{staticClass:"items clearfix"},[i("div",{staticClass:"name"},[t._v("确认密码")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"确认密码",type:"password"},model:{value:t.password.confirm,callback:function(e){t.$set(t.password,"confirm",e)},expression:"password.confirm"}})],1)])])])},staticRenderFns:[]};var Gt=i("VU/8")(jt,Ht,!1,function(t){i("ZuOr")},"data-v-c99319ac",null).exports,zt=s.default.extend(Gt),Ft=void 0,Bt=function(t){"string"==typeof(t=t||{})&&(t={ChangePassword:t}),Ft=new zt({data:t}),document.getElementById("app").appendChild(Ft.$mount().$el)},qt={data:function(){return{isEdit:!1,mobile:""}},computed:d()({},Object(f.c)({user:"userStore/user/user",authorities:"userStore/user/authorities",system:"userStore/user/system",platInfo:"userStore/user/platInfo",unionInfo:"userStore/user/unionInfo"}),{filterLimit:function(){if("SUPER_ADMIN"==this.user.userType)return"超级管理员";var t=[];if(this.authorities&&this.authorities.length>0){var e=!0,i=!1,n=void 0;try{for(var a,s=u()(this.authorities);!(e=(a=s.next()).done);e=!0){var r=a.value;(r.readStatus||r.writeStatus)&&t.push(r.summary)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}return t.join("，")}}),methods:{goChangePassword:function(){Bt({callback:function(){}})},getUserAnalyzeInfo:function(){this.user&&this.$store.dispatch("userStore/user/getUserAnalyzeInfo",{user:this.user})},goModify:function(t){$(t.target).parent().find("input").focus(),this.isEdit=!0},cancelModify:function(t){this.isEdit=!1,this.mobile=""},changeMobile:function(t){this.mobile=t},goChangeMobile:function(){var t=this;this.mobile&&this.mobile!=this.user.mobile&&this.$store.dispatch("userStore/user/changeMobile",{uuid:this.user.uuid,mobile:this.mobile}).then(function(){t.isEdit=!1,t.mobile=""})}},mounted:function(){this.getUserAnalyzeInfo()}},Qt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user_info"},[i("div",{staticClass:"title"},[t._v("账号信息")]),t._v(" "),i("div",{staticClass:"group clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("账号名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.user.loginName,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items password"},[i("div",{staticClass:"name"},[t._v("密码")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"password",value:t.user.password,placeholder:"",disabled:!0}}),t._v(" "),i("span",{staticClass:"change_password",on:{click:t.goChangePassword}},[t._v("修改")])],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("账号组")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.user.authorityGroup&&t.user.authorityGroup.name,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("数据级别")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t._f("filterOrgType")(t.user.authorityGroup&&t.user.authorityGroup.orgType),placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("账号ID")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.user.id,placeholder:"",readonly:!0}})],1)])]),t._v(" "),i("div",{staticClass:"title"},[t._v("管理员信息")]),t._v(" "),i("div",{staticClass:"group clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("管理员姓名")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.user.nickname,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items mobile"},[i("div",{staticClass:"name"},[t._v("联系电话")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",value:t.user.mobile,placeholder:"",readonly:!t.isEdit},on:{change:t.changeMobile},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goChangeMobile(e)}}}),t._v(" "),t.isEdit?t._e():i("span",{staticClass:"modify",on:{click:t.goModify}},[t._v("修改")]),t._v(" "),t.isEdit?[i("span",{staticClass:"modify",on:{click:t.cancelModify}},[t._v("取消")]),t._v(" "),i("span",{staticClass:"submit",on:{click:t.goChangeMobile}},[t._v("提交")])]:t._e()],2)])]),t._v(" "),t.system&&t.user&&!t.user.platId&&!t.user.unionId?[i("div",{staticClass:"title"},[t._v("系统信息")]),t._v(" "),i("div",{staticClass:"group clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("系统名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.system.name,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.system.platCount,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.system.unionCount,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("艺人数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.system.actorCount,placeholder:"",readonly:!0}})],1)])])]:t._e(),t._v(" "),t.platInfo&&t.user&&!t.user.unionId?[i("div",{staticClass:"title"},[t._v("平台信息")]),t._v(" "),i("div",{staticClass:"group clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.platInfo.name,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台ID")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.platInfo.id,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台分成")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.platInfo.shareRatio,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("入账阈值")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.platInfo.entryMax,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.platInfo.unionCount,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("艺人数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.platInfo.actorCount,placeholder:"",readonly:!0}})],1)])])]:t._e(),t._v(" "),t.unionInfo?[i("div",{staticClass:"title"},[t._v("公会信息")]),t._v(" "),i("div",{staticClass:"group clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.name,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会ID")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.id,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("归属平台")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.parentOrg&&t.unionInfo.parentOrg.name,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("分成比例")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.shareRatio,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("税点")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.taxRatio,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("代发工资")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:0==t.unionInfo.autoPay?"代发工资":"自动",placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("艺人数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.actorCount,placeholder:"",readonly:!0}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("经纪人数量")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t.unionInfo.brokerCount,placeholder:"",readonly:!0}})],1)])])]:t._e()],2)},staticRenderFns:[]};var Vt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"homepage"},[i("h2",[t._v("概述")]),t._v(" "),i("p",[t._v("主页是管理员登录系统后默认进入的第一层页面；在面包屑导航中随时可以回到主页；主页是管理员对所有管理权限的概览；概览细化至二级菜单，即你拥有某个二级菜单的查看和编辑权限后，即在主页展示该二级菜单相关的概览")]),t._v(" "),i("h2",[t._v("概览对应菜单明细")]),t._v(" "),i("h2",[t._v("我的信息（一级）")]),t._v(" "),i("p",[t._v("我的信息（二级）：无")]),t._v(" "),i("h2",[t._v("账号与权限（一级）")]),t._v(" "),i("p",[t._v("账号组管理（二级）：无")]),t._v(" "),i("p",[t._v("账号管理（二级）：无")]),t._v(" "),i("h2",[t._v("平台管理（一级）")]),t._v(" "),i("p",[t._v("平台管理（二级）：无")]),t._v(" "),i("h2",[t._v("公会管理（一级）")]),t._v(" "),i("p",[t._v("公会管理（二级）：无")]),t._v(" "),i("h2",[t._v("艺人管理（一级）")]),t._v(" "),i("p",[t._v("艺人申请（二级）：今日新增艺人申请人数")]),t._v(" "),i("p",[t._v("艺人分配（二级）：今日新增艺人人数，待分配艺人人数")]),t._v(" "),i("p",[t._v("今日新增艺人数，即，今天导入数据后，与主播库排重后的人数")]),t._v(" "),i("p",[t._v("艺人信息管理（二级）：今日新曾艺人人数，待补充信息艺人人数")]),t._v(" "),i("p",[t._v("待完善艺人数，即由系统代发工资，却未按要求完善信息的人数")]),t._v(" "),i("h2",[t._v("经纪人管理（一级）")]),t._v(" "),i("p",[t._v("经纪人管理（二级）：无")]),t._v(" "),i("p",[t._v("入账管理（二级）：今日待入账账单数，历史累积待入账账单数；")]),t._v(" "),i("p",[t._v("财务流水（二级）：无")]),t._v(" "),i("p",[t._v("提现管理（二级）：待审核账单数，待打款账单数")]),t._v(" "),i("p",[t._v("艺人薪资结算（二级）：无")]),t._v(" "),i("p",[t._v("经纪人薪资结算（二级）：无")]),t._v(" "),i("h2",[t._v("统计分析（一级）")]),t._v(" "),i("p",[t._v("统计分析（二级）：昨日流水，昨日开播主播数量，昨日平均直播时长")]),t._v(" "),i("h2",[t._v("展示方式")]),t._v(" "),i("p",[t._v("展示方式，类似“我的信息”，分段展示；没有输入框，所有数据无修改入口")]),t._v(" "),i("p",[t._v("如果某管理员拥有的二级菜单权限，均无概览，则默认展示UI“欢迎光临星火XXXXX”")])])}]};var Kt={routes:[{path:"/information",component:i("VU/8")(qt,Qt,!1,function(t){i("UZPD")},"data-v-0316a752",null).exports},{path:"/home",component:i("VU/8")({},Vt,!1,function(t){i("54Yy")},"data-v-064e510a",null).exports}],routes_root:[{path:"/login",component:Rt}]},Yt=i("bOdI"),Wt=i.n(Yt),Jt=C.a.server_api,Xt={components:{FbuiModal:T},data:function(){return{title:"选择公会",callback:null,unionList:[],stage_id:"",select_stage:null,key:"",select:[]}},methods:{changeKey:function(t){this.stage=this.lists.filter(function(e){return-1!==e.name.indexOf(t)})},getUnionList:function(){var t=this,e=this.user.orgId,i=this.user.platId||this.user.orgId;$API.group.getGroupList({orgId:e,parentId:i,start:0,limit:50},function(e){t.unionList=e.list})},selectUnion:function(t){var e=!1,i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.select);!(i=(s=r.next()).done);i=!0){s.value.uuid==t.uuid&&(e=!0)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}e?this.select.splice(0,1):this.select.push(t)},isActive:function(t){var e=!1;if(t){var i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.select);!(i=(s=r.next()).done);i=!0){s.value.uuid==t&&(e=!0)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}}return e},destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){this.callback&&this.callback(this.select),t&&t()}},created:function(){this.getUnionList()}},Zt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fbui-modal",{staticClass:"select-stage-modal",attrs:{title:t.title},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"select-stage-body"},[i("ul",{staticClass:"stage-list"},[t.unionList&&t.unionList.length?t._l(t.unionList,function(e){return i("li",{staticClass:"al",class:{active:t.isActive(e.uuid)},on:{click:function(i){return t.selectUnion(e)}}},[t._v(t._s(e.name))])}):[i("li",[t._v("暂无可选数据")])]],2)])])},staticRenderFns:[]};var te=i("VU/8")(Xt,Zt,!1,function(t){i("bLYs")},"data-v-7c5de1ab",null).exports,ee=s.default.extend(te),ie=void 0,ne=function(t){"string"==typeof(t=t||{})&&(t={SelectUnion:t}),ie=new ee({data:t}),document.getElementById("app").appendChild(ie.$mount().$el)},ae={components:{FbuiModal:T},data:function(){return{title:"选择公会",callback:null,unionList:[],key:"",select:[],locked:!1,count:0,limit:30}},watch:{key:function(){var t=this;this.$nextTick(function(){t.getUnionList(0)})}},methods:{changeKey:function(t){this.stage=this.lists.filter(function(e){return-1!==e.name.indexOf(t)})},getUnionList:function(t){var e=this;this.locked=!0,setTimeout(function(){e.locked=!1},5e3),t=t||0,$API.group.getGroupList({orgId:this.orgId,parentId:this.parentId,start:t,limit:this.limit,searchKey:this.key},function(i){e.count=i.count,e.unionList=0==t?i.list:e.unionList.concat(i.list),e.locked=!1})},selectUnion:function(t){var e=!1,i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.select);!(i=(s=r.next()).done);i=!0){s.value.uuid==t.uuid&&(e=!0)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}e?this.select.splice(0,1):this.multi?this.select.push(t):(this.select=[t],this.callback&&this.callback(this.select),this.destroy())},isActive:function(t){var e=!1;if(t){var i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.select);!(i=(s=r.next()).done);i=!0){s.value.uuid==t&&(e=!0)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}}return e},loadMore:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.offsetHeight<=0&&this.unionList.length<this.count&&!this.locked&&(this.lock=!1,this.getUnionList(this.unionList.length))},destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){this.callback&&this.callback(this.select),t&&t()}},created:function(){this.getUnionList()}},se={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fbui-modal",{staticClass:"select-stage-modal",attrs:{title:t.title},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"select-stage-body"},[i("div",{staticClass:"search_wrapper"},[i("el-input",{attrs:{placeholder:"请输入关键字搜索","prefix-icon":"el-icon-search"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),t._v(" "),i("ul",{staticClass:"stage-list",on:{scroll:t.loadMore}},[t.unionList&&t.unionList.length?t._l(t.unionList,function(e){return i("li",{staticClass:"al",class:{active:t.isActive(e.uuid)},on:{click:function(i){return t.selectUnion(e)}}},[t._v(t._s(e.name))])}):[i("li",[t._v("暂无可选数据")])]],2)])])},staticRenderFns:[]};var re,oe=i("VU/8")(ae,se,!1,function(t){i("j3zw")},"data-v-44e3cdf7",null).exports,le=s.default.extend(oe),ue=void 0,ce=function(t){"string"==typeof(t=t||{})&&(t={SelectUnion:t}),ue=new le({data:t}),document.getElementById("app").appendChild(ue.$mount().$el)},de={components:{Modal:T},data:function(){return{height:200,authorityGroup:[],orgType:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],platList:[],unionList:[],disabledPlat:!1,disabledUnion:!1,account:{authorityGroupId:"",authorityGroupOrgType:"",nickname:"",mobile:"",loginName:"",password:"",status:0,platId:"",unionId:"",unionName:"",managerOrgs:[]},locked:!1,selectUnionList:[],parentId:""}},computed:{filterGroups:function(){for(var t="",e=0;e<this.selectUnionList.length;e++)t+=this.selectUnionList[e].name,e<this.selectUnionList.length-1&&(t+="，");return t}},methods:(re={destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},goSelectUnion:function(){var t=this;ne({user:this.user,select:this.selectUnionList,callback:function(e){if(t.account.unionId){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;l.uuid!=t.account.unionId&&i.push(l)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}t.selectUnionList=i}else t.selectUnionList=e}})},changeAuthorityGroup:function(t){var e=this.authorityGroup.filter(function(e){return e.uuid==t});e.length>0?(this.account.authorityGroupOrgType=e[0].orgType,"SYSTEM"==e[0].orgType?(this.disabledPlat=!0,this.disabledUnion=!0):"PLAT"==e[0].orgType?(this.disabledPlat=!1,this.disabledUnion=!0):"UNION"==e[0].orgType&&(this.user.platId?this.disabledPlat=!0:this.disabledPlat=!1,this.disabledUnion=!1)):this.account.authorityGroupOrgType=""},onSame:function(t,e){for(var i=[],n=0;n<e.length;n++){for(var a=e[n].uuid,s=!1,r=0;r<t.length;r++){if(t[r].uuid==a){s=!0;break}}s||i.push(a)}return i},submit:function(t){var e=this;if(!this.account.loginName)return this.$message({message:"请输入登录账号",type:"error"}),!1;if(!this.account.authorityGroupId)return this.$message({message:"请选择账号组",type:"error"}),!1;if(this.account.mobile&&!/^1[0-9]{10}$/.test(this.account.mobile))return this.$message({message:"联系电话格式不正确",type:"error"}),!1;if(!this.locked)if(this.locked=!0,setTimeout(function(){e.locked=!1},5e3),this.account.uuid){var i=this.account.managerOrgs||[],n=this.selectUnionList,a=this.onSame(n,i),s=this.onSame(i,n),r=[],o=!0,l=!1,c=void 0;try{for(var d,f=u()(a);!(o=(d=f.next()).done);o=!0){var h={uuid:d.value,optType:"del"};r.push(h)}}catch(t){l=!0,c=t}finally{try{!o&&f.return&&f.return()}finally{if(l)throw c}}var p=!0,v=!1,g=void 0;try{for(var _,y=u()(s);!(p=(_=y.next()).done);p=!0){h={uuid:_.value,optType:"add"};r.push(h)}}catch(t){v=!0,g=t}finally{try{!p&&y.return&&y.return()}finally{if(v)throw g}}!function(t,e,i,n){var a=Jt+"/users/admins/"+t.uuid+".json",s={loginName:t.loginName,status:t.status};t.authorityGroupId&&(s.authorityGroupId=t.authorityGroupId),t.nickname&&(s.nickname=t.nickname),t.mobile&&(s.mobile=t.mobile),t.password&&(s.password=t.password),t.unionId?s.orgId=t.unionId:t.platId&&(s.orgId=t.platId),e&&e.length>0&&(s.managerOrgs=e),Object(m.f)(a,"PUT",s,i,n)}(this.account,r,function(){e.locked=!1,e.callback&&e.callback(),t&&t()})}else{var b=[],I=!0,C=!1,w=void 0;try{for(var k,L=u()(this.selectUnionList);!(I=(k=L.next()).done);I=!0){h={uuid:k.value.uuid};b.push(h)}}catch(t){C=!0,w=t}finally{try{!I&&L.return&&L.return()}finally{if(C)throw w}}!function(t,e,i,n){var a=Jt+"/users/admins.json",s={loginName:t.loginName,status:t.status};t.authorityGroupId&&(s.authorityGroupId=t.authorityGroupId),t.nickname&&(s.nickname=t.nickname),t.mobile&&(s.mobile=t.mobile),t.password&&(s.password=t.password),t.unionId?s.orgId=t.unionId:t.platId?s.orgId=t.platId:s.orgId="XsXBL85vaJK4zie1yLaxRy",e&&e.length>0&&(s.managerOrgs=e),Object(m.f)(a,"POST",s,i,n)}(this.account,b,function(){e.locked=!1,e.callback&&e.callback(),t&&t()})}},getAccountGroup:function(){var t=this;$API.limit.getAccountGroup({start:0,limit:50},function(e){var i=e.authorityGroup,n=[];if(t.user.platId){var a=!0,s=!1,r=void 0;try{for(var o,l=u()(i);!(a=(o=l.next()).done);a=!0){var c=o.value;"UNION"==c.orgType&&n.push(c)}}catch(t){s=!0,r=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw r}}}else n=i;t.authorityGroup=n})},changePlat:function(t){this.account.platId=t||"",this.parentId=t},changeUnion:function(t){if(t&&this.selectUnionList&&this.selectUnionList.length>0){var e=this.selectUnionList.findIndex(function(e){return e.uuid==t});(e||0==e)&&this.selectUnionList.splice(e,1)}},getPlatList:function(){var t=this,e=this.user.orgId;$API.platform.getPlatFormList({orgId:e,start:0,limit:50},function(e){t.platList=e.list})},filterUnion:function(t){var e=this,i=this.user.orgId,n=this.user.orgId;$API.group.getGroupList({orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t},function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,$API.group.getGroupList({orgId:i,parentId:t,start:0,limit:50},function(t){e.unionList=t.list})}},Wt()(re,"goSelectUnion",function(){var t=this;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){if(e.length){t.account.unionId=e[0].uuid,t.account.unionName=e[0].name;var i=e[0].uuid;if(i&&t.selectUnionList&&t.selectUnionList.length>0){var n=t.selectUnionList.findIndex(function(t){return t.uuid==i});(n||0==n)&&t.selectUnionList.splice(n,1)}}else t.account.unionId="",t.account.unionName=""}})}),Wt()(re,"clearSelectUnion",function(){this.account.unionId="",this.account.unionName=""}),Wt()(re,"setHeight",function(){var t=document.body.clientHeight-150-40;this.height=t}),re),mounted:function(){this.setHeight(),this.getAccountGroup(),this.getPlatList(),this.getUnionList(),this.account&&(this.account.password="",this.account.authorityGroup&&(this.account.authorityGroupOrgType=this.account.authorityGroup.orgType),this.account.managerOrgs&&this.account.managerOrgs.length>0&&(this.selectUnionList=JSON.parse(I()(this.account.managerOrgs)))),this.user&&!this.account.uuid&&this.user.platId&&(this.disabledPlat=!0,this.account.platId=this.user.platId)}},fe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"新增账号"},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"modify_actor",style:{height:t.height+"px"}},[i("div",{staticClass:"group"},[i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("账号名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:20,placeholder:"请输入账号名称"},model:{value:t.account.loginName,callback:function(e){t.$set(t.account,"loginName",e)},expression:"account.loginName"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("密码")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:16,placeholder:"请输入密码"},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password",e)},expression:"account.password"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("账号组")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择账号组"},on:{change:t.changeAuthorityGroup},model:{value:t.account.authorityGroupId,callback:function(e){t.$set(t.account,"authorityGroupId",e)},expression:"account.authorityGroupId"}},t._l(t.authorityGroup,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("数据级别")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!0,placeholder:"请选择数据级别"},model:{value:t.account.authorityGroupOrgType,callback:function(e){t.$set(t.account,"authorityGroupOrgType",e)},expression:"account.authorityGroupOrgType"}},t._l(t.orgType,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("\n                        平台名称\n                    ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:t.disabledPlat,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.account.platId,callback:function(e){t.$set(t.account,"platId",e)},expression:"account.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("\n                        公会名称\n                    ")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.account.unionName,readonly:"",placeholder:"请选择公会"}}),t._v(" "),t.account.unionName?i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("管理员昵称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:20,placeholder:"请输入管理员昵称"},model:{value:t.account.nickname,callback:function(e){t.$set(t.account,"nickname",e)},expression:"account.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("联系电话")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入联系电话"},model:{value:t.account.mobile,callback:function(e){t.$set(t.account,"mobile",e)},expression:"account.mobile"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("状态")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.account.status,callback:function(e){t.$set(t.account,"status",e)},expression:"account.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)])]),t._v(" "),"UNION"==t.account.authorityGroupOrgType?i("div",{staticClass:"clearfix other_group"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("选择多个公会(仅运维管理员可用)")]),t._v(" "),i("div",{staticClass:"content",on:{click:t.goSelectUnion}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"选择多个公会",value:t.filterGroups,readonly:!0}})],1)])]):t._e()])])])},staticRenderFns:[]};var he=i("VU/8")(de,fe,!1,function(t){i("lgrr")},"data-v-2cc20e2a",null).exports,pe=s.default.extend(he),ve=void 0,me=function(t){"string"==typeof(t=t||{})&&(t={NewAccount:t}),ve=new pe({data:t}),document.getElementById("app").appendChild(ve.$mount().$el)},ge=function(t,e,i,n){var a=!1;if(t&&"SUPER_ADMIN"==t.userType)return a=!0;if(i){var s="",r="";if(function t(i){var n=!0,a=!1,o=void 0;try{for(var l,c=u()(i);!(n=(l=c.next()).done);n=!0){var d=l.value;d.path&&d.path==e&&(s=d.uuid,r=d.children&&d.children.length>0?"model":"name"),d.children&&t(d.children)}}catch(t){a=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(a)throw o}}}(i),s){var o=!0,l=!1,c=void 0;try{for(var d,f=u()(n);!(o=(d=f.next()).done);o=!0){var h=d.value;h[r]==s&&1==h.writeStatus&&(a=!0)}}catch(t){l=!0,c=t}finally{try{!o&&f.return&&f.return()}finally{if(l)throw c}}}}return a},_e={data:function(){return{authorityGroup:[],platList:[],unionList:[],tableHeight:200,orgType:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],disabledOrgType:!1,filter:{nickname:"",authorityGroupId:"",authorityGroupOrgType:"",status:"",orgId:"",platId:"",unionId:"",unionName:"",loginName:"",mobile:""},limit:10,parentId:""}},computed:d()({},Object(f.c)({accountList:"limitStore/account/accountList",total:"limitStore/account/total",currentPage:"limitStore/account/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{goAddAccount:function(){var t=this;me({user:this.user,callback:function(){t.getAccountList(1)}})},handleEdit:function(t,e){var i=this;me({user:this.user,account:e,callback:function(){i.getAccountList(1)}})},handleDelete:function(t,e){var i=this;console.log(e);var n="确定要删除账号”"+e.loginName+"“吗？";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$store.dispatch("limitStore/account/deleteAccount",{uuid:e.uuid}).then(function(){i.getAccountList()})}).catch(function(){})},handleSizeChange:function(t){this.limit=t,this.getAccountList(1,t)},handleCurrentChange:function(t){this.getAccountList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},resetFilter:function(){this.filter={nickname:"",authorityGroupId:"",authorityGroupOrgType:"",status:"",orgId:"",platId:"",unionId:"",unionName:"",loginName:"",mobile:""},this.setDefaultOrg(),this.setDefaultOrg(),this.getAccountList(1)},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getAccountList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;console.log(i),this.$store.dispatch("limitStore/account/getAccountList",{currentPage:t,limit:e,filter:i}).then(function(){})},getAccountGroup:function(){var t=this;this.$store.dispatch("limitStore/limit/getAccountGroup",{currentPage:1,limit:50}).then(function(e){if(t.user.platId){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e.authorityGroup);!(n=(r=o.next()).done);n=!0){var l=r.value;"UNION"==l.orgType&&i.push(l)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}t.authorityGroup=i}else t.authorityGroup=e.authorityGroup})},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="",this.filter.orgId=this.filter.unionId||this.filter.platId;var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},changeAuthorityGroup:function(t){console.log(t);var e=this.authorityGroup.filter(function(e){return e.uuid==t});console.log(e),e.length>0?(this.filter.authorityGroupOrgType=e[0].orgType,this.disabledOrgType=!0):(this.disabledOrgType=!1,this.filter.authorityGroupOrgType="")},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name),this.filter.orgId=this.filter.unionId||this.filter.platId,this.filter.platId&&(this.disabledOrgType=!0,this.filter.authorityGroupOrgType="UNION"))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getAccountList()})},created:function(){this.getAccountGroup(),this.getPlatList(),this.getUnionList()}},ye={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t账号名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入账号名称"},model:{value:t.filter.loginName,callback:function(e){t.$set(t.filter,"loginName",e)},expression:"filter.loginName"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t账号组：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择账号组"},on:{change:t.changeAuthorityGroup},model:{value:t.filter.authorityGroupId,callback:function(e){t.$set(t.filter,"authorityGroupId",e)},expression:"filter.authorityGroupId"}},t._l(t.authorityGroup,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t数据级别：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,disabled:t.disabledOrgType,placeholder:"请选择数据级别"},on:{change:function(t){}},model:{value:t.filter.authorityGroupOrgType,callback:function(e){t.$set(t.filter,"authorityGroupOrgType",e)},expression:"filter.authorityGroupOrgType"}},t._l(t.orgType,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t管理员：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入管理员名称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t联系方式：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入管理员联系方式"},model:{value:t.filter.mobile,callback:function(e){t.$set(t.filter,"mobile",e)},expression:"filter.mobile"}})],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAccountList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("el-button",{on:{click:t.goAddAccount}},[t._v("添加")]):t._e()],1),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.accountList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{prop:"loginName",label:"账号名称",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"账号组","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.authorityGroup&&e.row.authorityGroup.name))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"数据级别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterOrgType")(e.row.authorityGroup&&e.row.authorityGroup.orgType)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"platName",label:"平台名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"unionName",label:"公会名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"已启用":"已停用"))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"nickname",label:"管理员","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"mobile",label:"联系电话","show-overflow-tooltip":""}}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),"SUPER_ADMIN"!=e.row.userType?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}],null,!1,649769624)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var be=i("VU/8")(_e,ye,!1,function(t){i("rbWw")},"data-v-0d1fa020",null).exports,Ie=C.a.server_api;C.a.server_api,C.a.server_user;var Ce={props:{isCheck:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},internal:{type:Boolean,default:!1}},methods:{check:function(){this.internal&&(this.internalCheck=!this.internalCheck),this.$emit("check")}},data:function(){return{internalCheck:!1}},created:function(){this.internal&&(this.internalCheck=this.isCheck)}},we={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:{checkbox:!0,disabled:this.disabled,active:this.internal?this.internalCheck:this.isCheck},on:{click:this.check}})},staticRenderFns:[]};var ke={components:{Modal:T,CheckBox:i("VU/8")(Ce,we,!1,function(t){i("lttZ")},"data-v-769c55f1",null).exports},data:function(){return{authoritiesList:[],authoritiesMaps:{},filterList:[],locked:!1}},methods:{filterChecked:function(t){var e=!1;return 1==t&&(e=!0),e},destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){var e=[];for(var i in this.authoritiesMaps)e.push(this.authoritiesMaps[i]);this.callback&&this.callback(e),t&&t()},select:function(t,e){console.log(t.uuid);var i=this.authoritiesMaps[t.uuid];i[e]=0==i[e]?1:0,"writeStatus"==e&&(i.readStatus=1),"readStatus"==e&&0==i[e]&&(i.writeStatus=0),console.log(this.authoritiesMaps)},filterAuthorities:function(){var t={},e=!0,i=!1,n=void 0;try{for(var a,s=u()(this.authoritiesList);!(e=(a=s.next()).done);e=!0){if((_=a.value).list.length>0){var r=!0,o=!1,l=void 0;try{for(var c,d=u()(_.list);!(r=(c=d.next()).done);r=!0){var f=c.value;t[f.uuid]=f}}catch(t){o=!0,l=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}}}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}if(this.authoritiesMaps=t,this.authorities&&this.authorities.length>0){var h=!0,p=!1,v=void 0;try{for(var m,g=u()(this.authorities);!(h=(m=g.next()).done);h=!0){var _=m.value;this.authoritiesMaps[_.uuid]&&(this.authoritiesMaps[_.uuid].readStatus=_.readStatus,this.authoritiesMaps[_.uuid].writeStatus=_.writeStatus)}}catch(t){p=!0,v=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw v}}}console.log(this.authoritiesList),this.filterList=this.authoritiesList}},mounted:function(){this.filterAuthorities()}},Le={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"权限设置"},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"set_limit"},[i("ul",{staticClass:"limit_list"},t._l(t.filterList,function(e){return i("li",[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"name"},[i("span",{staticClass:"el-icon",class:{"el-icon-caret-bottom":e.list.length>1}}),t._v(" "),e.list.length>1?[t._v("\n                            "+t._s(e.modelName)+"\n                        ")]:[t._v("\n                            "+t._s(e.list[0].summary||e.list[0].modelName)+"\n                        ")]],2),t._v(" "),1==e.list.length?i("div",{staticClass:"limit"},[i("span",{staticClass:"check_box_con",on:{click:function(i){return t.select(e.list[0],"readStatus")}}},[i("check-box",{attrs:{"is-check":t.filterChecked(e.list[0].readStatus)}}),t._v("查看\n                        ")],1),t._v(" "),i("span",{staticClass:"check_box_con",on:{click:function(i){return t.select(e.list[0],"writeStatus")}}},[i("check-box",{attrs:{"is-check":t.filterChecked(e.list[0].writeStatus)}}),t._v("编辑\n                        ")],1)]):t._e()]),t._v(" "),e.list.length>1?i("ul",t._l(e.list,function(e){return i("li",[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"name"},[i("span",{staticClass:"el-icon"}),t._v(t._s(e.summary||e.modelName))]),t._v(" "),i("div",{staticClass:"limit"},[i("span",{staticClass:"check_box_con",on:{click:function(i){return t.select(e,"readStatus")}}},[i("check-box",{attrs:{"is-check":t.filterChecked(e.readStatus)}}),t._v("查看\n                                ")],1),t._v(" "),i("span",{staticClass:"check_box_con",on:{click:function(i){return t.select(e,"writeStatus")}}},[i("check-box",{attrs:{"is-check":t.filterChecked(e.writeStatus)}}),t._v("编辑\n                                ")],1)])])])}),0):t._e()])}),0)])])},staticRenderFns:[]};var Se=i("VU/8")(ke,Le,!1,function(t){i("2oOq")},"data-v-43c6a5a0",null).exports,xe=s.default.extend(Se),Te=void 0,$e=function(t){"string"==typeof(t=t||{})&&(t={SetLimit:t}),Te=new xe({data:t}),document.getElementById("app").appendChild(Te.$mount().$el)},Pe={components:{Modal:T},data:function(){return{orgTypeList:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],status:"",statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],authorityGroup:{name:"",orgType:"PLAT",status:0,createDate:(new Date).getTime(),authorities:[]},locked:!1}},computed:{filterLimit:function(){var t=[];if(this.authorityGroup&&this.authorityGroup.authorities){var e=!0,i=!1,n=void 0;try{for(var a,s=u()(this.authorityGroup.authorities);!(e=(a=s.next()).done);e=!0){var r=a.value;(r.readStatus||r.writeStatus)&&t.push(r.summary)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}return t.join("，")}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){var e=this;if(!this.authorityGroup.name.trim())return this.$message({message:"请输入账号组名称",type:"error"}),!1;this.locked||(this.locked=!0,setTimeout(function(){e.locked=!1},5e3),console.log(this.authorityGroup),this.authorityGroup.uuid?function(t,e,i){var n=Ie+"/authority_group/"+t.uuid+".json",a={name:t.name,orgType:t.orgType,status:t.status},s=[];if(t.authorities){var r=!0,o=!1,l=void 0;try{for(var c,d=u()(t.authorities);!(r=(c=d.next()).done);r=!0){var f=c.value,h={uuid:f.uuid,readStatus:f.readStatus,writeStatus:f.writeStatus};s.push(h)}}catch(t){o=!0,l=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}}a.authorities=s,Object(m.f)(n,"PUT",a,e,i)}(this.authorityGroup,function(){e.locked=!1,e.callback&&e.callback(),t&&t()}):function(t,e,i){var n=Ie+"/authority_group.json",a={name:t.name,orgType:t.orgType,status:t.status},s=[];if(t.authorities){var r=!0,o=!1,l=void 0;try{for(var c,d=u()(t.authorities);!(r=(c=d.next()).done);r=!0){var f=c.value,h={uuid:f.uuid,readStatus:f.readStatus,writeStatus:f.writeStatus};s.push(h)}}catch(t){o=!0,l=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}}a.authorities=s,Object(m.f)(n,"POST",a,e,i)}(this.authorityGroup,function(){e.locked=!1,e.callback&&e.callback(),t&&t()}))},goSetLimit:function(){var t=this;$e({authoritiesList:JSON.parse(I()(this.authorities)),authorities:this.authorityGroup.authorities,callback:function(e){console.log("######"),console.log(e),t.authorityGroup.authorities=e}})}},mounted:function(){}},Ae={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"添加账号组"},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"account_group"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:20,placeholder:"名称",value:"平台管理员"},model:{value:t.authorityGroup.name,callback:function(e){t.$set(t.authorityGroup,"name",e)},expression:"authorityGroup.name"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("数据级别")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.authorityGroup.uuid,placeholder:"请选择"},model:{value:t.authorityGroup.orgType,callback:function(e){t.$set(t.authorityGroup,"orgType",e)},expression:"authorityGroup.orgType"}},t._l(t.orgTypeList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("状态")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.authorityGroup.status,callback:function(e){t.$set(t.authorityGroup,"status",e)},expression:"authorityGroup.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("创建日期")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{readonly:!0,placeholder:"创建日期",value:t._f("timesToDate")(t.authorityGroup.createDate,"yyyy-MM-dd")}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("设置权限")]),t._v(" "),i("div",{staticClass:"content",on:{click:t.goSetLimit}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"设置权限",value:t.filterLimit,readonly:!0}})],1)])])])},staticRenderFns:[]};var Ne=i("VU/8")(Pe,Ae,!1,function(t){i("fqrN")},"data-v-8d828e3e",null).exports,Oe=s.default.extend(Ne),Ue=void 0,Ee=function(t){"string"==typeof(t=t||{})&&(t={AccountGroup:t}),Ue=new Oe({data:t}),document.getElementById("app").appendChild(Ue.$mount().$el)},De={data:function(){return{groupList:[],tableHeight:250,limit:10}},computed:d()({},Object(f.c)({accountGroup:"limitStore/limit/accountGroup",total:"limitStore/limit/total",currentPage:"limitStore/limit/currentPage",user:"userStore/user/user",authorities:"limitStore/limit/authorities",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{goAddAccountGroup:function(){var t=this;Ee({authorities:this.authorities,callback:function(){t.getAccountGroup(1)}})},handleEdit:function(t,e){var i=this,n=e.uuid;this.$store.dispatch("limitStore/limit/getAccountGroupDetail",{uuid:n}).then(function(t){Ee({authorityGroup:t.authorityGroup,authorities:i.authorities,callback:function(){i.getAccountGroup(1)}})})},handleDelete:function(t,e){var i=this,n=e.uuid;this.$confirm("确定要删除该账号组吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$store.dispatch("limitStore/limit/deleteAccountGroup",{uuid:n}).then(function(t){i.getAccountGroup(1)})}).catch(function(){})},handleSizeChange:function(t){this.getAccountGroup(1,t)},handleCurrentChange:function(t){this.getAccountGroup(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},getAccountGroup:function(t,e){t=t||this.currentPage,e=e||this.limit,this.$store.dispatch("limitStore/limit/getAccountGroup",{currentPage:t,limit:e}).then(function(){})},getAuthoritiesList:function(){this.$store.dispatch("limitStore/limit/getAuthoritiesList").then(function(){})}},mounted:function(){var t=this;setTimeout(function(){t.setHeight()})},created:function(){this.getAccountGroup(),this.getAuthoritiesList()}},Re={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_group"},[i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("el-button",{on:{click:t.goAddAccountGroup}},[t._v("添加")]):t._e()],1),t._v(" "),i("div",{staticClass:"account_group_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.accountGroup,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{prop:"name",label:"组名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate&&e.row.createDate,"yyyy-MM-dd")||"-"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"数据级别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterOrgType")(e.row.orgType)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"权限","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t  \t"+t._s(0==e.row.configStatus?"未配置":"已配置")+"\n\t\t\t  ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t  \t"+t._s(0==e.row.status?"已启用":"已停用")+"\n\t\t\t  ")]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,268720131)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var Me=[{path:"/limit/account",component:be},{path:"/limit/account_group",component:i("VU/8")(De,Re,!1,function(t){i("1npu")},"data-v-aaf5b834",null).exports}],je=C.a.server_api,He={components:{Modal:T},data:function(){return{height:200,locked:!1,statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],accountList:[],plat:{name:"",shareRatio:"",entryMax:"",status:0,orgType:"PLAT",parentId:"",admin:"",adminName:"",autoTimeMin:0,autoTimeMax:0,autoDayMax:0,handleTimeMax:0,handleTimeMin:0,handleDayMax:0}}},computed:{filterTitle:function(){var t="添加平台";return this.plat.uuid&&(t="修改平台"),t}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},selectAdmin:function(t){this.plat.admin=t},submit:function(t){var e,i,n,a,s,r=this;return this.plat.name?this.plat.shareRatio?this.plat.entryMax?this.plat.admin?void(this.locked||(this.locked=!0,setTimeout(function(){r.locked=!1},5e3),this.plat.uuid?(e=this.plat,i=function(){r.locked=!1,r.callback&&r.callback(),t&&t()},a=je+"/org/"+e.uuid+".json",s={name:e.name,shareRatio:e.shareRatio,entryMax:e.entryMax,status:e.status,orgType:e.orgType,parentId:e.parentId,autoTimeMin:e.autoTimeMin,autoTimeMax:e.autoTimeMax,autoDayMax:e.autoDayMax,handleTimeMax:e.handleTimeMax,handleTimeMin:e.handleTimeMin,handleDayMax:e.handleDayMax},Object(m.f)(a,"PUT",s,i,n)):function(t,e,i){var n=je+"/org.json",a={name:t.name,shareRatio:t.shareRatio,entryMax:t.entryMax,status:t.status,orgType:t.orgType,parentId:t.parentId,autoTimeMin:t.autoTimeMin,autoTimeMax:t.autoTimeMax,autoDayMax:t.autoDayMax,handleTimeMax:t.handleTimeMax,handleTimeMin:t.handleTimeMin,handleDayMax:t.handleDayMax};if(t.admin){var s=[];s.push({uuid:t.admin}),a.admins=s}Object(m.f)(n,"POST",a,e,i)}(this.plat,function(){r.locked=!1,r.callback&&r.callback(),t&&t()}))):(this.$message({message:"请选择管理员",type:"error"}),!1):(this.$message({message:"请输入入账阀值",type:"error"}),!1):(this.$message({message:"请输入平台分成",type:"error"}),!1):(this.$message({message:"请输入平台名称",type:"error"}),!1)},getAccountList:function(){var t=this,e="";this.plat.uuid&&(e=this.plat.uuid),$API.limit.getAdminsList({orgType:"PLAT",orgId:e},function(e){t.accountList=e.list})},setHeight:function(){var t=document.body.clientHeight-150-40;this.height=t}},mounted:function(){this.setHeight(),this.getAccountList(),this.user&&(this.plat.parentId=this.user.orgId),this.plat.majorAdmin&&(this.plat.adminName=this.plat.majorAdmin.loginName,this.plat.admin=this.plat.majorAdmin.uuid)}},Ge={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:t.filterTitle},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"modify_actor",style:{height:t.height+"px"}},[i("div",{staticClass:"group"},[i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:20,placeholder:"请输入平台名称"},model:{value:t.plat.name,callback:function(e){t.$set(t.plat,"name",e)},expression:"plat.name"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台分成")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入平台分成"},model:{value:t.plat.shareRatio,callback:function(e){t.$set(t.plat,"shareRatio",e)},expression:"plat.shareRatio"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("入账阀值")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入入账阀值"},model:{value:t.plat.entryMax,callback:function(e){t.$set(t.plat,"entryMax",e)},expression:"plat.entryMax"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("状态")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.plat.status,callback:function(e){t.$set(t.plat,"status",e)},expression:"plat.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("管理员")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.plat.uuid,placeholder:"请选择管理员"},on:{change:t.selectAdmin},model:{value:t.plat.adminName,callback:function(e){t.$set(t.plat,"adminName",e)},expression:"plat.adminName"}},t._l(t.accountList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.loginName,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("小额提现下限／次")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入小额提现下限／次"},model:{value:t.plat.autoTimeMin,callback:function(e){t.$set(t.plat,"autoTimeMin",e)},expression:"plat.autoTimeMin"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("小额提现上限／次")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入小额提现上限／次"},model:{value:t.plat.autoTimeMax,callback:function(e){t.$set(t.plat,"autoTimeMax",e)},expression:"plat.autoTimeMax"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("小额提现上限／天")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入小额提现上限／天"},model:{value:t.plat.autoDayMax,callback:function(e){t.$set(t.plat,"autoDayMax",e)},expression:"plat.autoDayMax"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("大额提现上限／次")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入大额提现上限／次"},model:{value:t.plat.handleTimeMax,callback:function(e){t.$set(t.plat,"handleTimeMax",e)},expression:"plat.handleTimeMax"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("大额提现下限／次")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入大额提现下限／次"},model:{value:t.plat.handleTimeMin,callback:function(e){t.$set(t.plat,"handleTimeMin",e)},expression:"plat.handleTimeMin"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("大额提现上限／天")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"大额提现上限／天"},model:{value:t.plat.handleDayMax,callback:function(e){t.$set(t.plat,"handleDayMax",e)},expression:"plat.handleDayMax"}})],1)])])])])])},staticRenderFns:[]};var ze=i("VU/8")(He,Ge,!1,function(t){i("rH/6")},"data-v-54fc988a",null).exports,Fe=s.default.extend(ze),Be=void 0,qe=function(t){"string"==typeof(t=t||{})&&(t={NewPlat:t}),Be=new Fe({data:t}),document.getElementById("app").appendChild(Be.$mount().$el)},Qe={data:function(){return{platformList:[],tableHeight:250}},computed:d()({},Object(f.c)({user:"userStore/user/user",total:"platStore/platform/total",currentPage:"platStore/platform/currentPage",limit:"platStore/platform/limit",platList:"platStore/platform/platList",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{goAddPlat:function(){var t=this;qe({user:this.user,callback:function(){t.getPlatList(1)}})},handleEdit:function(t,e){var i=this;qe({user:this.user,plat:e,callback:function(){i.getPlatList()}})},handleDelete:function(t,e){var i=this,n="确定要删除账号”"+e.name+"“吗？";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$store.dispatch("platStore/platform/deletePlat",{uuid:e.uuid}).then(function(){i.getPlatList()})}).catch(function(){})},getPlatList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:i,currentPage:t,limit:e}).then(function(){})},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.operate.offsetHeight-24;console.log(t),this.tableHeight=t}},mounted:function(){var t=this;setTimeout(function(){t.setHeight()})},created:function(){this.getPlatList()}},Ve={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"platform"},[i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("el-button",{on:{click:t.goAddPlat}},[t._v("添加")]):t._e()],1),t._v(" "),i("div",{staticClass:"platform_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.platList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{prop:"id",label:"平台ID",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"平台名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"shareRatio",label:"平台分成","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"entryMax",label:"入账阀值","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"已启用":"已停用"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"管理员","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.majorAdmin&&e.row.majorAdmin.loginName))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"140",prop:"autoTimeMin",label:"小额提现下限／次","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"140",prop:"autoTimeMax",label:"小额提现上限／次","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"140",prop:"autoDayMax",label:"小额提现上限／天","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"140",prop:"handleTimeMax",label:"大额提现上限／次","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"140",prop:"handleTimeMin",label:"大额提现下限／次","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"140",prop:"handleDayMax",label:"大额提现上限／天","show-overflow-tooltip":""}}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,268720131)}):t._e()],1)],1)])},staticRenderFns:[]};var Ke=[{path:"/platform",component:i("VU/8")(Qe,Ve,!1,function(t){i("KQo8")},"data-v-03726c1d",null).exports}],Ye=C.a.server_api,We={components:{Modal:T},data:function(){return{height:200,authorityGroup:[],autoPayList:[{uuid:0,name:"手动"},{uuid:1,name:"系统"}],statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],salaryTypeList:[{uuid:0,name:"日结"},{uuid:1,name:"月结"}],platList:[],accountList:[],managersList:[],disabledPlat:!1,union:{name:"",status:0,parentId:"",shareRatio:"",taxRatio:"",autoPay:0,orgType:"UNION",autoPayDate:"",admin:"",adminName:"",managerId:"",salaryType:""},locked:!1}},computed:{filterTitle:function(){var t="新增公会";return this.union.uuid&&(t="修改公会"),t},disabledAdmins:function(){return!1}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},changeAdmin:function(t){this.union.admin=t},submit:function(t){var e,i,n,a,s,r=this;return console.log(this.union),this.union.name?this.union.parentId?this.union.shareRatio?this.union.taxRatio?this.union.admin?void(this.locked||(this.locked=!0,setTimeout(function(){r.locked=!1},5e3),this.union.uuid?(e=this.union,i=function(){r.locked=!1,r.callback&&r.callback(),t&&t()},a=Ye+"/org/"+e.uuid+".json",s={name:e.name,shareRatio:e.shareRatio,taxRatio:e.taxRatio,status:e.status,orgType:e.orgType,parentId:e.parentId,preSetAutoPay:e.autoPay},e.autoPayDate&&(s.autoPayDate=new Date(e.autoPayDate).getTime()),e.admin&&(s.majorAdmin=e.admin),e.managerId&&(s.managerId=e.managerId),e.salaryType&&(s.salaryType=e.salaryType),Object(m.f)(a,"PUT",s,i,n)):function(t,e,i){var n=Ye+"/org.json",a={name:t.name,shareRatio:t.shareRatio,taxRatio:t.taxRatio,status:t.status,orgType:t.orgType,parentId:t.parentId,autoPay:t.autoPay};if(t.autoPayDate&&(a.autoPayDate=new Date(t.autoPayDate).getTime()),t.admin){var s=[];s.push({uuid:t.admin}),a.admins=s}t.managerId&&(a.managerId=t.managerId),t.salaryType&&(a.salaryType=t.salaryType),Object(m.f)(n,"POST",a,e,i)}(this.union,function(){r.locked=!1,r.callback&&r.callback(),t&&t()}))):(this.$message({message:"请选择管理员",type:"error"}),!1):(this.$message({message:"请输入承担税点",type:"error"}),!1):(this.$message({message:"请输入分成比例",type:"error"}),!1):(this.$message({message:"请选择平台",type:"error"}),!1):(this.$message({message:"请输入公会名称",type:"error"}),!1)},getPlatList:function(){var t=this,e=this.user.orgId;$API.platform.getPlatFormList({orgId:e,start:0,limit:50},function(e){t.platList=e.list})},changePlat:function(){var t=this;setTimeout(function(){t.getAccountList()},500)},getAccountList:function(){var t=this,e="";this.user.platId&&(e=this.user.platId),this.union.parentId&&(e=this.union.parentId),this.union.uuid&&(e=this.union.uuid),e&&$API.limit.getAdminsList({orgType:"UNION",orgId:e},function(e){t.accountList=e.list})},getManagersList:function(){var t=this,e="";this.user.platId&&(e=this.user.platId),this.union.parentId&&(e=this.union.parentId);var i={authorityGroupOrgType:"PLAT",orgId:e};e&&$API.limit.getAccountList({start:0,limit:50,filter:i},function(e){t.managersList=e.list})},setHeight:function(){var t=document.body.clientHeight-150-40;this.height=t}},mounted:function(){this.union.majorAdmin&&(this.union.adminName=this.union.majorAdmin.loginName,this.union.admin=this.union.majorAdmin.uuid),this.setHeight(),this.getAccountList(),this.getManagersList(),this.getPlatList(),this.user.platId&&(this.union.parentId=this.user.platId)}},Je={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:t.filterTitle},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"modify_actor",style:{height:t.height+"px"}},[i("div",{staticClass:"group"},[i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:20,placeholder:"请输入公会名称"},model:{value:t.union.name,callback:function(e){t.$set(t.union,"name",e)},expression:"union.name"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("状态")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.union.status,callback:function(e){t.$set(t.union,"status",e)},expression:"union.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.union.parentId,callback:function(e){t.$set(t.union,"parentId",e)},expression:"union.parentId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("分成比例")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入分成比例"},model:{value:t.union.shareRatio,callback:function(e){t.$set(t.union,"shareRatio",e)},expression:"union.shareRatio"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("承担税点")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入承担税点"},model:{value:t.union.taxRatio,callback:function(e){t.$set(t.union,"taxRatio",e)},expression:"union.taxRatio"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("管理员")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:t.disabledAdmins,placeholder:"请选择管理员"},on:{change:t.changeAdmin},model:{value:t.union.adminName,callback:function(e){t.$set(t.union,"adminName",e)},expression:"union.adminName"}},t._l(t.accountList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.loginName,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("代发工资")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.union.autoPay,callback:function(e){t.$set(t.union,"autoPay",e)},expression:"union.autoPay"}},t._l(t.autoPayList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),1==t.union.autoPay&&t.union.uuid?i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("自动日期")]),t._v(" "),i("div",{staticClass:"content"},[t._v("\n                        "+t._s(t._f("timesToDate")(t.union.autoPayDate,"yyyy-MM-dd HH:mm:ss"))+"\n                          \n                    ")])]):t._e(),t._v(" "),t.union.uuid?i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("即将生效")]),t._v(" "),i("div",{staticClass:"content"},[t._v("\n                        "+t._s(0==t.union.preSetAutoPay?"代发工资":"自动代发工资")+"\n                    ")])]):t._e(),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("负责人")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择负责人"},model:{value:t.union.managerId,callback:function(e){t.$set(t.union,"managerId",e)},expression:"union.managerId"}},t._l(t.managersList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.loginName,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("发薪方式")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择发薪方式"},model:{value:t.union.salaryType,callback:function(e){t.$set(t.union,"salaryType",e)},expression:"union.salaryType"}},t._l(t.salaryTypeList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)])])])])])},staticRenderFns:[]};var Xe=i("VU/8")(We,Je,!1,function(t){i("Zstm")},"data-v-6079bae8",null).exports,Ze=s.default.extend(Xe),ti=void 0,ei=function(t){"string"==typeof(t=t||{})&&(t={NewUnion:t}),ti=new Ze({data:t}),document.getElementById("app").appendChild(ti.$mount().$el)},ii={data:function(){return{accountList:[],accountGroupList:[],tableHeight:200,platList:[],statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],filter:{name:"",id:"",orgId:"",status:0,adminName:"",managerName:"",salaryType:""},disablePlat:!1,disableUnion:!1,limit:10,salaryTypes:[{name:"全部",uuid:""},{name:"日结",uuid:"0"},{name:"月结",uuid:"1"}]}},computed:d()({},Object(f.c)({user:"userStore/user/user",total:"groupStore/group/total",currentPage:"groupStore/group/currentPage",groupList:"groupStore/group/groupList",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{handleEdit:function(t,e){var i=this;ei({user:this.user,union:e,callback:function(){i.getUnionList()}})},handleDelete:function(t,e){var i=this,n="确定要删除”"+e.name+"“吗？";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$store.dispatch("groupStore/group/deleteGroup",{uuid:e.uuid}).then(function(){i.getPlatList()})}).catch(function(){})},goAddUnion:function(){var t=this;ei({user:this.user,callback:function(){t.getUnionList(1)}})},resetFilter:function(){this.filter={name:"",id:"",orgId:"",status:0},this.setDefaultOrg(),this.getUnionList(1)},handleSizeChange:function(t){this.limit=t,this.getUnionList(1,t)},handleCurrentChange:function(t){this.getUnionList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},getUnionList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.user.orgId,n=this.user.orgId,a=this.filter;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,filter:a,currentPage:t,limit:e}).then(function(){})},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},setDefaultOrg:function(){this.user&&(this.filter.orgId=this.user.platId)}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getUnionList()})},created:function(){this.getPlatList()}},ni={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"group_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t归属平台：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择归属平台"},on:{change:function(t){}},model:{value:t.filter.orgId,callback:function(e){t.$set(t.filter,"orgId",e)},expression:"filter.orgId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{disabled:t.disableUnion,placeholder:"请输入公会名称"},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入公会ID"},model:{value:t.filter.id,callback:function(e){t.$set(t.filter,"id",e)},expression:"filter.id"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t管理员：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入管理员名称"},model:{value:t.filter.adminName,callback:function(e){t.$set(t.filter,"adminName",e)},expression:"filter.adminName"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          负责人：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入负责人名称"},model:{value:t.filter.managerName,callback:function(e){t.$set(t.filter,"managerName",e)},expression:"filter.managerName"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          结算方式：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择结算方式"},model:{value:t.filter.salaryType,callback:function(e){t.$set(t.filter,"salaryType",e)},expression:"filter.salaryType"}},t._l(t.salaryTypes,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getUnionList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("el-button",{on:{click:t.goAddUnion}},[t._v("添加")]):t._e()],1),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.groupList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{prop:"id",label:"公会ID","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"公会名称",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"负责人",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.manager&&e.row.manager.loginName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"parentName",label:"归属平台","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"已启用":"已停用"))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"shareRatio",label:"分成比例","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"taxRatio",label:"承担税点","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"代发工资","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterAutoPay")(e.row.autoPay)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"管理员账号",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.majorAdmin&&e.row.majorAdmin.loginName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"结算方式",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.salaryType?"日结":"月结"))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,268720131)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var ai=[{path:"/group",component:i("VU/8")(ii,ni,!1,function(t){i("0M98")},"data-v-76dece82",null).exports}];C.a.server_api,C.a.server_user;var si={components:{Modal:T},data:function(){return{groupList:[],group:"",platList:[],unionList:[],disabledPlat:!1,parentId:""}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){if(!this.actor.unionId)return this.$message({message:"请选择工会",type:"error"}),!1;this.callback&&this.callback(this.actor.unionId),t&&t()},changePlat:function(t){this.actor.platId=t||"",this.actor.unionId="",this.actor.unionName="",this.parentId=t},changeUnion:function(t){t&&(this.actor.unionId=t);var e=null,i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.unionList);!(i=(s=r.next()).done);i=!0){var o=s.value;o.uuid==t&&(e=o)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}e&&(this.actor.unionName=e.name)},getPlatList:function(){var t=this,e=this.user.orgId;$API.platform.getPlatFormList({orgId:e,currentPage:1,limit:50},function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.actor.unionId="";var i=this.user.orgId,n=this.user.orgId;$API.group.getGroupList({orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t},function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,$API.group.getGroupList({orgId:i,parentId:t,currentPage:1,limit:50},function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.actor.unionId=e[0].uuid,t.actor.unionName=e[0].name):(t.actor.unionId="",t.actor.unionName="")}})},clearSelectUnion:function(){this.actor.unionId="",this.actor.unionName=""}},mounted:function(){this.getPlatList();var t=this.actor.platId||"";this.getUnionList(t),this.actor.platId&&(this.disabledPlat=!0)}},ri={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"请分配主播公会归属"},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"assign_actor"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台ID")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:t.disabledPlat,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.actor.platName,callback:function(e){t.$set(t.actor,"platName",e)},expression:"actor.platName"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("昵称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"昵称",disabled:!0,value:t.actor.nickname}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("分配公会")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.actor.unionName,readonly:"",placeholder:"请选择公会"}}),t._v(" "),t.actor.unionName?i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}}):t._e()],1)])])])},staticRenderFns:[]};var oi=i("VU/8")(si,ri,!1,function(t){i("Rkvy")},"data-v-4e3d5b62",null).exports,li=s.default.extend(oi),ui=void 0,ci=function(t){"string"==typeof(t=t||{})&&(t={AssignActor:t}),ui=new li({data:t}),document.getElementById("app").appendChild(ui.$mount().$el)},di={data:function(){return{statusList:[{name:"全部",uuid:""},{name:"待编辑",uuid:-1},{name:"已启用",uuid:0},{name:"已停用",uuid:1}],assignList:[{name:"全部",uuid:""},{name:"未分配",uuid:0},{name:"已分配",uuid:1}],multipleSelection:[],tableHeight:250,agentList:[],platList:[],unionList:[],actorList:[],total:0,currentPage:1,limit:10,filter:{platId:"",platName:"",unionId:"",unionName:"",status:"",distributeStatus:"",brokerId:"",thirdId:"",orgId:""},parentId:""}},computed:d()({},Object(f.c)({user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{resetFilter:function(){this.filter={platId:"",platName:"",unionId:"",unionName:"",status:"",distributeStatus:"",brokerId:"",thirdId:"",orgId:""},this.setDefaultOrg(),this.getActorList(1),this.getUnionList()},goFilter:function(){this.getActorList()},batchDistribute:function(){var t=this,e=this.multipleSelection;if(e.length>0){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}ci({actor:{platId:this.filter.platId||"",platName:this.filter.platName||"",unionId:this.filter.unionId||"",unionName:this.filter.unionName||""},user:this.user,callback:function(e){var n=e;t.$store.dispatch("actorStore/actor/assignActor",{orgId:n,list:i}).then(function(e){t.getActorList(1)})}})}},handleDelete:function(t,e){var i=this,n="确定要删除账号”"+e.nickname+"“吗？";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("actorStore/actor/deleteActor",{list:t}).then(function(){i.getActorList(1)})}).catch(function(){})},handleEdit:function(t,e){var i=this,n=e.uuid;this.$store.dispatch("userStore/user/getUserDetail",{user_id:n}).then(function(t){ci({actor:t.user,user:i.user,callback:function(t){var e=t,a=[];a.push(n),i.$store.dispatch("actorStore/actor/assignActor",{orgId:e,list:a}).then(function(t){i.getActorList(1)})}})})},handleSelectionChange:function(t){this.multipleSelection=t},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},handleSizeChange:function(t){this.limit=t,this.getActorList(1,t)},handleCurrentChange:function(t){this.getActorList(t)},getActorList:function(t,e){var i=this;t=t||this.currentPage,e=e||this.limit;var n=this.filter;this.$store.dispatch("actorStore/actor/getActorList",{currentPage:t,limit:e,filter:n}).then(function(n){i.currentPage=t,i.limit=e,i.actorList=n.list,i.total=n.count})},changePlat:function(t){console.log(t),this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t;var e=!0,i=!1,n=void 0;try{for(var a,s=u()(this.platList);!(e=(a=s.next()).done);e=!0){var r=a.value;r.uuid==t&&(this.filter.platName=r.name)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}},changeUnion:function(t){this.filter.unionId=t;var e=!0,i=!1,n=void 0;try{for(var a,s=u()(this.unionList);!(e=(a=s.next()).done);e=!0){var r=a.value;r.uuid==t&&(this.filter.unionName=r.name,r.parentOrg&&(this.filter.platId=r.parentOrg.uuid,this.filter.platName=r.parentOrg.name))}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},getAgentList:function(){var t=this;this.$store.dispatch("agentStore/agent/getAgentList",{currentPage:1,limit:50}).then(function(e){var i=e.list;i.unshift({nickname:"无",uuid:""}),t.agentList=i})},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getActorList()})},created:function(){this.getPlatList(),this.getUnionList(),this.getAgentList()}},fi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"actor_assign"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t经纪人：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择经纪人"},on:{change:function(t){}},model:{value:t.filter.brokerId,callback:function(e){t.$set(t.filter,"brokerId",e)},expression:"filter.brokerId"}},t._l(t.agentList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.nickname,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t分配：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择是否分配"},on:{change:function(t){}},model:{value:t.filter.distributeStatus,callback:function(e){t.$set(t.filter,"distributeStatus",e)},expression:"filter.distributeStatus"}},t._l(t.assignList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\tID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入ID"},model:{value:t.filter.id,callback:function(e){t.$set(t.filter,"id",e)},expression:"filter.id"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台用户ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入直播平台ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.goFilter}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.filter.platId&&t.edit?i("el-button",{on:{click:t.batchDistribute}},[t._v("分配")]):t._e()],1),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.actorList,height:t.tableHeight,stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[t.edit?i("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),i("el-table-column",{attrs:{label:"入驻时间",width:"122"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"platName",label:"平台","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"nickname",label:"昵称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"120",prop:"thirdId",label:"平台用户ID","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"unionName",label:"工会","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"经纪人","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.broker&&e.row.broker.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"identityName",label:"真实姓名","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"mobile",label:"联系方式","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"结算方式","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterAutoPay")(e.row.autoPay)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"待遇","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.shareType?[t._v(t._s(e.row.shareRatio))]:[t._v("阶梯")],t._v("\n\t\t\t      \t/"+t._s(e.row.payFloor)+"/"+t._s(e.row.taxRatio)+"\n\t\t\t  \t  ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"分配","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.unionId?"已分配":"未分配"))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("分配")])]}}],null,!1,1879810909)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var hi=i("VU/8")(di,fi,!1,function(t){i("2dyg")},"data-v-d57f8d3e",null).exports,pi=C.a.server_api,vi=function(t,e,i){var n=pi+"/users/actors/"+t.uuid+".json",a={};t.orgId&&(a.orgId=t.orgId),t.brokerId?a.brokerId=t.brokerId:a.brokerId="",t.nickname&&(a.nickname=t.nickname),t.identityName&&(a.identityName=t.identityName),t.identityCardId&&(a.identityCardId=t.identityCardId),t.mobile&&(a.mobile=t.mobile),t.qqId&&(a.qqId=t.qqId),t.wechatId&&(a.wechatId=t.wechatId),t.payFloor&&(a.payFloor=t.payFloor),t.validDay&&(a.validDay=t.validDay),t.validDayHour&&(a.validDayHour=t.validDayHour),t.validHour&&(a.validHour=t.validHour),(t.status||0==t.status)&&(a.status=t.status),t.shareRatio&&(a.shareRatio=t.shareRatio),(t.shareType||0==t.shareType)&&(a.shareType=t.shareType),t.taxRatio&&(a.taxRatio=t.taxRatio),t.shareProperties&&(a.shareProperties=t.shareProperties),Object(m.f)(n,"PUT",a,e,i)},mi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"items stage"},[i("div",{staticClass:"name"},[t._v("第"+t._s(t.index+1)+"阶梯")]),t._v(" "),i("div",{staticClass:"content"},[i("span",{staticClass:"part"},[i("el-input",{attrs:{type:"number",placeholder:""},model:{value:t.items.shareRatio,callback:function(e){t.$set(t.items,"shareRatio",e)},expression:"items.shareRatio"}}),t._v("%分成比例")],1),t._v("\n            低于"),i("el-input",{attrs:{type:"number",placeholder:""},model:{value:t.items.maxLimit,callback:function(e){t.$set(t.items,"maxLimit",e)},expression:"items.maxLimit"}}),t._v("元\n            "),i("span",{staticClass:"el-icon el-icon-circle-plus",on:{click:t.goAddItems}}),t._v(" "),t.length>1?i("span",{staticClass:"el-icon el-icon-remove",on:{click:t.goDeleteItems}}):t._e()],1)])},staticRenderFns:[]},gi={components:{Modal:T,ShareItems:i("VU/8")({props:["items","index","optItems","length"],methods:{goAddItems:function(){this.$emit("optItems",this.items,this.index,"add")},goDeleteItems:function(){this.$emit("optItems",this.items,this.index,"delete")}}},mi,!1,null,null,null).exports},data:function(){return{agent:"",agentList:[],platList:[],unionList:[],height:300,calculation:"",shareTypeList:[{uuid:0,name:"固定比例"},{uuid:1,name:"阶梯比例"}],deleteShareList:[],actor:{id:1010,nickname:"艺人aa",avatarUrl:"",sex:"WOMAN",userType:"ACTOR",loginName:"actor1",mobile:"15011519169",email:"",wechatId:"0",qqId:"0",status:0,py:"yraa",pinyin:"yirenaa",password:"d306f206b97f896142fa0957f388a817",orgId:"XEwbjsBfcPU8MM4DALctwu",createDate:1521283411e3,lastUpDate:1521283411e3,platId:null,platName:null,unionId:"XEwbjsBfcPU8MM4DALctwu",unionName:"22111",thirdId:null,thirdNickname:null,identified:0,identityName:"aaa",identityCardId:"12229929292",brokerId:"",broker:null,autoPay:0,shareType:1,shareProperties:null,shareRatio:20,taxRatio:10,payFloor:100,validDay:1,validDayHour:2,validHour:3},autoAccount:null,handleAccount:null,bankAccount:null,parentId:""}},computed:{filterListLength:function(){var t=this.actor.shareProperties,e=0,i=!0,n=!1,a=void 0;try{for(var s,r=u()(t);!(i=(s=r.next()).done);i=!0){0==s.value.delete&&e++}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}return e}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){},changeBroker:function(t){if(console.log(t),t){var e=!0,i=!1,n=void 0;try{for(var a,s=u()(this.agentList);!(e=(a=s.next()).done);e=!0){var r=a.value;r.uuid==t&&(this.actor.brokerId=r.uuid,this.actor.brokerName=r.nickname,this.actor.broker=r)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}else this.actor.brokerId="",this.actor.brokerName="",this.actor.broker=null},getAgentList:function(t){var e=this;$API.agent.getAgentList({start:0,limit:50,filter:t},function(t){e.agentList=t.list})},changePlat:function(t){this.actor.platId=t||"",this.actor.unionId="",this.actor.unionName="",this.parentId=t,this.actor.broker&&this.actor.broker.platId!=t&&(this.actor.brokerId="",this.actor.brokerName="",this.actor.broker=null);var e={platId:t};this.getAgentList(e)},changeUnion:function(t){t&&(this.actor.unionId=t);var e=null,i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.unionList);!(i=(s=r.next()).done);i=!0){var o=s.value;o.uuid==t&&(e=o)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}e&&(this.actor.unionName=e.name,this.actor.autoPay=e.autoPay),this.actor.broker&&this.actor.broker.union!=t&&(this.actor.brokerId="",this.actor.brokerName="",this.actor.broker=null);var l={unionId:t};this.getAgentList(l)},getPlatList:function(){var t=this,e=this.user.orgId;$API.platform.getPlatFormList({orgId:e,currentPage:1,limit:50},function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.actor.unionId="";var i=this.user.orgId,n=this.user.orgId;$API.group.getGroupList({orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t},function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;$API.group.getGroupList({orgId:i,parentId:t,currentPage:1,limit:50},function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){if(e.length){t.actor.unionId=e[0].uuid,t.actor.unionName=e[0].name,t.actor.broker&&t.actor.broker.union!=e[0].uuid&&(t.actor.brokerId="",t.actor.brokerName="",t.actor.broker=null);var i={unionId:e[0].uuid};t.getAgentList(i)}else{t.actor.unionId="",t.actor.unionName="",t.actor.broker&&(t.actor.brokerId="",t.actor.brokerName="",t.actor.broker=null);t.getAgentList({unionId:""})}}})},clearSelectUnion:function(){this.actor.unionId="",this.actor.unionName="",this.actor.broker&&(this.actor.brokerId="",this.actor.brokerName="",this.actor.broker=null);this.getAgentList({unionId:""})},setHeight:function(){var t=document.body.clientHeight-150;this.height=t},optItems:function(t,e,i){"add"==i?this.actor.shareProperties.splice(e+1,0,{shareRatio:"",maxLimit:"",delete:0}):t.uuid?(this.actor.shareProperties.splice(e,1),this.deleteShareList.push(t)):this.actor.shareProperties.splice(e,1)},changeIdentityCard:function(t){t&&(/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(t)?this.actor.identityCardId=t:this.actor.identityCardId="")},changePayFloor:function(t){t&&(/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)?("."==t.substr(t.length-1,t.length)&&(t=t.substr(0,t.length-1)),this.actor.payFloor=t):(console.log("false"),this.actor.payFloor=""))},changeStatus:function(t){var e=this,i={status:t,uuid:this.actor.uuid};vi(i,function(t){e.callback&&e.callback(),e.destroy()})},goModify:function(t){var e=this;switch(console.log(this.actor),t){case 1:var i={orgId:this.actor.unionId||"",brokerId:this.actor.brokerId,nickname:this.actor.nickname};break;case 2:i={identityName:this.actor.identityName,identityCardId:this.actor.identityCardId};break;case 3:i={mobile:this.actor.mobile,qqId:this.actor.qqId,wechatId:this.actor.wechatId};break;case 4:if(0==this.actor.shareType)i={shareRatio:this.actor.shareRatio,shareType:this.actor.shareType,taxRatio:this.actor.taxRatio};else{i={shareType:this.actor.shareType,taxRatio:this.actor.taxRatio};for(var n=[],a=0;a<this.actor.shareProperties.length;a++){var s={shareRatio:(f=this.actor.shareProperties[a]).shareRatio,maxLimit:f.maxLimit,orderNum:a};f.uuid?(s.optType="update",s.uuid=f.uuid):s.optType="add",n.push(s)}if(this.deleteShareList.length>0){var r=!0,o=!1,l=void 0;try{for(var c,d=u()(this.deleteShareList);!(r=(c=d.next()).done);r=!0){var f;s={shareRatio:(f=c.value).shareRatio,maxLimit:f.maxLimit,orderNum:a,uuid:f.uuid,optType:"del"};n.push(s)}}catch(t){o=!0,l=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}}i.shareProperties=n}break;case 5:i={payFloor:this.actor.payFloor,validDay:this.actor.validDay,validDayHour:this.actor.validDayHour,validHour:this.actor.validHour}}i.uuid=this.actor.uuid,vi(i,function(t){e.callback&&e.callback()})},modifyCashAccount:function(t){if(2==t){var e=this.bankAccount;!function(t,e,i){var n=t.uuid,a=t.account,s=pi+"/user/cash/account/"+n+".json",r={};a.bcName&&(r.bcName=a.bcName),a.bcCity&&(r.bcCity=a.bcCity),a.bcBranch&&(r.bcBranch=a.bcBranch),a.accountNum&&(r.accountNum=a.accountNum),Object(m.f)(s,"PUT",r,e,i)}({uuid:e.uuid,account:e},function(){})}}},mounted:function(){this.deleteShareList=[];var t={};this.actor.platId&&(t.platId=this.actor.platId),this.actor.unionId&&(t.unionId=this.actor.unionId),this.getAgentList(t),this.getPlatList();var e=this.actor.platId||"";this.getUnionList(e),this.setHeight();if(this.actor.shareProperties&&0==this.actor.shareProperties.length&&this.actor.shareProperties.push({shareRatio:"",maxLimit:"",delete:0}),this.actor.cashAccounts&&this.actor.cashAccounts.length>0){var i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.actor.cashAccounts);!(i=(s=r.next()).done);i=!0){var o=s.value;0==o.accountType&&0==o.deleted&&(this.autoAccount=o),1==o.accountType&&0==o.deleted&&(this.handleAccount=o),2==o.accountType&&0==o.deleted&&(this.bankAccount=o)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}}}},_i={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"编辑艺人信息","is-footer":!1},on:{destroy:t.destroy}},[i("div",{staticClass:"modify_actor",style:{height:t.height+"px"}},[i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("账号信息\n            ")]),t._v(" "),i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("ID")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{disabled:!0,placeholder:"请输入ID"},model:{value:t.actor.id,callback:function(e){t.$set(t.actor,"id",e)},expression:"actor.id"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("入驻时间")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{value:t._f("timesToDate")(t.actor.createDate,"yyyy-MM-dd"),disabled:!0,placeholder:"请输入入驻时间"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.actor.platName,callback:function(e){t.$set(t.actor,"platName",e)},expression:"actor.platName"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台ID")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{disabled:!0,value:t.actor.platId,placeholder:""}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.actor.unionName,readonly:"",placeholder:"请选择公会"}}),t._v(" "),t.actor.unionName?i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("昵称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入昵称"},model:{value:t.actor.nickname,callback:function(e){t.$set(t.actor,"nickname",e)},expression:"actor.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("经纪人")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择经纪人"},on:{change:t.changeBroker},model:{value:t.actor.brokerName,callback:function(e){t.$set(t.actor,"brokerName",e)},expression:"actor.brokerName"}},t._l(t.agentList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.nickname,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("代发工资")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{disabled:!0,value:t._f("filterAutoPay")(t.actor.autoPay),placeholder:"代发工资"}})],1)])]),t._v(" "),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goModify(1)}}},[t._v("保存")])],1)]),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("身份信息\n            ")]),t._v(" "),i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("姓名")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入姓名"},model:{value:t.actor.identityName,callback:function(e){t.$set(t.actor,"identityName",e)},expression:"actor.identityName"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("身份证")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:15,maxlength:18,placeholder:"请输入身份证"},on:{change:t.changeIdentityCard},model:{value:t.actor.identityCardId,callback:function(e){t.$set(t.actor,"identityCardId",e)},expression:"actor.identityCardId"}})],1)])]),t._v(" "),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goModify(2)}}},[t._v("保存")])],1)]),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("提现账户\n            ")]),t._v(" "),t.bankAccount?[i("div",{staticClass:"t_title"},[t._v("银行卡账号")]),t._v(" "),i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("开户银行")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入开户银行"},model:{value:t.bankAccount.bcName,callback:function(e){t.$set(t.bankAccount,"bcName",e)},expression:"bankAccount.bcName"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("所在城市")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入开户银行"},model:{value:t.bankAccount.bcCity,callback:function(e){t.$set(t.bankAccount,"bcCity",e)},expression:"bankAccount.bcCity"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("开户支行")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入开户银行"},model:{value:t.bankAccount.bcBranch,callback:function(e){t.$set(t.bankAccount,"bcBranch",e)},expression:"bankAccount.bcBranch"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("银行卡号")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:20,placeholder:"请输入开户银行"},model:{value:t.bankAccount.accountNum,callback:function(e){t.$set(t.bankAccount,"accountNum",e)},expression:"bankAccount.accountNum"}})],1)])]),t._v(" "),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.modifyCashAccount(2)}}},[t._v("保存")])],1)]:t._e()],2),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("联系方式\n            ")]),t._v(" "),i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("电话")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:1,maxlength:11,type:"number",placeholder:"请输入电话"},model:{value:t.actor.mobile,callback:function(e){t.$set(t.actor,"mobile",e)},expression:"actor.mobile"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("QQ号")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{minlength:5,maxlength:11,type:"number",placeholder:"请输入QQ号"},model:{value:t.actor.qqId,callback:function(e){t.$set(t.actor,"qqId",e)},expression:"actor.qqId"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("微信号")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入微信号"},model:{value:t.actor.wechatId,callback:function(e){t.$set(t.actor,"wechatId",e)},expression:"actor.wechatId"}})],1)])]),t._v(" "),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goModify(3)}}},[t._v("保存")])],1)]),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("分成计算\n            ")]),t._v(" "),i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("计算方法")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.actor.shareType,callback:function(e){t.$set(t.actor,"shareType",e)},expression:"actor.shareType"}},t._l(t.shareTypeList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("个税")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入个税"},model:{value:t.actor.taxRatio,callback:function(e){t.$set(t.actor,"taxRatio",e)},expression:"actor.taxRatio"}}),t._v("%\n                        "),i("div",{staticClass:"info"},[t._v("个税范围为3~8")])],1)]),t._v(" "),0==t.actor.shareType?[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("分成比例")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入分成比例"},model:{value:t.actor.shareRatio,callback:function(e){t.$set(t.actor,"shareRatio",e)},expression:"actor.shareRatio"}}),t._v("%\n                        ")],1)])]:[t._l(t.actor.shareProperties,function(e,n){return[i("share-items",{attrs:{items:e,length:t.filterListLength,index:n},on:{optItems:t.optItems}})]})]],2),t._v(" "),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goModify(4)}}},[t._v("保存")])],1)]),t._v(" "),i("div",{staticClass:"group payFloor"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("保底政策\n            ")]),t._v(" "),i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("保底薪资")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入保底薪资"},on:{change:t.changePayFloor},model:{value:t.actor.payFloor,callback:function(e){t.$set(t.actor,"payFloor",e)},expression:"actor.payFloor"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("日有效小时")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入日有效小时"},model:{value:t.actor.validDayHour,callback:function(e){t.$set(t.actor,"validDayHour",e)},expression:"actor.validDayHour"}}),t._v("小时\n                    ")],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("月有效天数")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入月有效天数"},model:{value:t.actor.validDay,callback:function(e){t.$set(t.actor,"validDay",e)},expression:"actor.validDay"}}),t._v(" "),t.actor.validDay?i("div",{staticClass:"info"},[t._v("当日直播时长超过"+t._s(t.actor.validDayHour)+"小时记为有效天")]):t._e()],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("月有效总时长")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入有效时长"},model:{value:t.actor.validHour,callback:function(e){t.$set(t.actor,"validHour",e)},expression:"actor.validHour"}}),t._v("小时\n                    ")],1)])]),t._v(" "),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goModify(5)}}},[t._v("保存")])],1)]),t._v(" "),i("div",{staticClass:"group"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon"}),t._v("状态\n            ")]),t._v(" "),i("div",{staticClass:"btns",staticStyle:{"margin-top":"10px"}},[0!=t.actor.status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.changeStatus(0)}}},[t._v("启用")]):t._e(),t._v(" "),1!=t.actor.status?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.changeStatus(1)}}},[t._v("停用")]):t._e()],1)])])])},staticRenderFns:[]};var yi=i("VU/8")(gi,_i,!1,function(t){i("UcPi")},"data-v-7470fd48",null).exports,bi=s.default.extend(yi),Ii=void 0,Ci=function(t){if("string"==typeof(t=t||{})&&(t={NewActor:t}),t.actor.shareProperties){var e=!0,i=!1,n=void 0;try{for(var a,s=u()(t.actor.shareProperties);!(e=(a=s.next()).done);e=!0)a.value.delete=0}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}else t.actor.shareProperties=[{shareRatio:"",maxLimit:"",delete:0}];Ii=new bi({data:t}),document.getElementById("app").appendChild(Ii.$mount().$el)},wi={data:function(){return{statusList:[{name:"全部",uuid:""},{name:"待编辑",uuid:-1},{name:"已启用",uuid:0},{name:"已停用",uuid:1}],assignList:[{name:"全部",uuid:""},{name:"未分配",uuid:0},{name:"已分配",uuid:1}],multipleSelection:[],tableHeight:250,agentList:[],platList:[],unionList:[],actorList:[],total:0,currentPage:1,limit:10,filter:{platId:"",unionId:"",unionName:"",status:"",distributeStatus:"",brokerId:"",thirdId:"",orgId:"",id:"",nickname:""},parentId:""}},computed:d()({},Object(f.c)({user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)},isSuperAdmin:function(){var t=!1;return this.user&&"SUPER_ADMIN"==this.user.userType&&(t=!0),t}}),methods:{resetFilter:function(){this.filter={platId:"",unionId:"",unionName:"",status:"",distributeStatus:"",brokerId:"",thirdId:"",orgId:"",id:"",nickname:""},this.setDefaultOrg(),this.getActorList(1),this.getUnionList()},filterCard:function(t,e){var i="";t&&(i=JSON.parse(t)[e]);return i},viewImg:function(t){t&&window.open(t)},goFilter:function(){this.getActorList()},batchDelete:function(){var t=this,e=this.multipleSelection;if(e.length>0){var i="确定要删除这"+e.length+"条数据吗？";this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}t.$store.dispatch("actorStore/actor/deleteActor",{list:i}).then(function(){t.getActorList(1)})}).catch(function(){})}},handleDelete:function(t,e){var i=this,n="确定要删除账号”"+e.nickname+"“吗？";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("actorStore/actor/deleteActor",{list:t}).then(function(){i.getActorList(1)})}).catch(function(){})},handleEdit:function(t,e){var i=this,n=e.uuid;this.$store.dispatch("userStore/user/getUserDetail",{user_id:n}).then(function(t){var e=JSON.parse(I()(t.user));e.broker&&(e.brokerName=e.broker.nickname),Ci({actor:e,user:i.user,callback:function(){i.getActorList(i.currentPage)}})})},handleSelectionChange:function(t){this.multipleSelection=t},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},handleSizeChange:function(t){this.limit=t,this.getActorList(1,t)},handleCurrentChange:function(t){this.getActorList(t)},getActorList:function(t,e){var i=this;t=t||this.currentPage,e=e||this.limit;var n=this.filter;this.$store.dispatch("actorStore/actor/getActorList",{currentPage:t,limit:e,filter:n}).then(function(n){i.currentPage=t,i.limit=e,i.actorList=n.list,i.total=n.count})},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},getAgentList:function(){var t=this;this.$store.dispatch("agentStore/agent/getAgentList",{currentPage:1,limit:50}).then(function(e){var i=e.list;i.unshift({nickname:"无",uuid:""}),t.agentList=i})},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getActorList()})},created:function(){this.getPlatList(),this.getUnionList(),this.getAgentList()}},ki={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"actor_assign"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t经纪人：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择经纪人"},on:{change:function(t){}},model:{value:t.filter.brokerId,callback:function(e){t.$set(t.filter,"brokerId",e)},expression:"filter.brokerId"}},t._l(t.agentList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.nickname,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\tID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入ID"},model:{value:t.filter.id,callback:function(e){t.$set(t.filter,"id",e)},expression:"filter.id"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台用户ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入直播平台ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.goFilter}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.isSuperAdmin?i("el-button",{attrs:{type:"danger"},on:{click:t.batchDelete}},[t._v("删除")]):t._e()],1),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.actorList,height:t.tableHeight,stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[t.edit?i("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),i("el-table-column",{attrs:{width:"150",prop:"nickname",label:"昵称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"120",prop:"thirdId",label:"平台用户ID","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"结算方式","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterAutoPay")(e.row.autoPay)))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"130",label:"待遇（比/底/税）","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.shareType?[t._v(t._s(e.row.shareRatio))]:[t._v("阶梯")],t._v("\n\t\t\t      \t/"+t._s(e.row.payFloor)+"/"+t._s(e.row.taxRatio)+"\n\t\t\t  \t  ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",label:"保底政策（日/月/总）","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t      \t"+t._s(e.row.validDayHour)+"/"+t._s(e.row.validDay)+"/"+t._s(e.row.validHour)+"\n\t\t\t  \t  ")]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"120",prop:"mobile",label:"联系方式","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"unionName",label:"公会","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"经纪人","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.broker&&e.row.broker.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"入驻时间",width:"122"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("actorStatus")(e.row.status)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"info",width:"122",label:"身份证照片","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.info?[i("div",{staticClass:"img_box"},[i("img",{attrs:{src:t.filterCard(e.row.info,0)},on:{click:function(i){t.viewImg(t.filterCard(e.row.info,0))}}}),t._v(" "),i("img",{attrs:{src:t.filterCard(e.row.info,1)},on:{click:function(i){t.viewImg(t.filterCard(e.row.info,1))}}})])]:t._e()]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),t.isSuperAdmin?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}],null,!1,3289989256)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var Li=i("VU/8")(wi,ki,!1,function(t){i("LRFw")},"data-v-2792ddaa",null).exports,Si={data:function(){return{statusList:[{name:"全部",uuid:""},{name:"未审核",uuid:0},{name:"已审核",uuid:1}],multipleSelection:[],tableHeight:250,agentList:[],platList:[],unionList:[],actorList:[],total:0,currentPage:1,limit:10,filter:{platId:"",identityName:"",mobile:"",date:"",status:""}}},computed:d()({},Object(f.c)({user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{resetFilter:function(){this.filter={platId:"",identityName:"",mobile:"",date:"",status:""},this.setDefaultOrg(),this.getApplyList(1)},viewImg:function(t){t&&window.open(t)},goFilter:function(){this.getApplyList()},batchDistribute:function(){var t=this,e=this.multipleSelection;if(e.length>0){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}ci({actor:{platId:"",platName:"",unionId:"",unionName:""},user:this.user,callback:function(e){var n=e;t.$store.dispatch("actorStore/actor/assignActor",{orgId:n,list:i}).then(function(e){t.getApplyList(1)})}})}},handleDelete:function(t,e){var i=this;this.$confirm("确定要删除该申请吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("actorStore/actor/deleteApply",{list:t}).then(function(){i.getApplyList(1)})}).catch(function(){})},handleEdit:function(t,e){var i=this,n=e.uuid;this.$confirm("确定审核通过吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$store.dispatch("actorStore/actor/changeApplyStatus",{uuid:n,status:1}).then(function(){i.getApplyList(1)})}).catch(function(){})},handleSelectionChange:function(t){this.multipleSelection=t},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-(this.$refs.operate&&this.$refs.operate.offsetHeight||0)-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},handleSizeChange:function(t){this.limit=t,this.getApplyList(1,t)},handleCurrentChange:function(t){this.getApplyList(t)},getApplyList:function(t,e){var i=this;t=t||this.currentPage,e=e||this.limit;var n=this.filter;this.$store.dispatch("actorStore/actor/getApplyList",{currentPage:t,limit:e,filter:n}).then(function(n){i.currentPage=t,i.limit=e,i.actorList=n.list,i.total=n.count})},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.getUnionList(t)},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},getAgentList:function(){var t=this;this.$store.dispatch("agentStore/agent/getAgentList",{currentPage:1,limit:50}).then(function(e){var i=e.list;i.unshift({nickname:"无",uuid:""}),t.agentList=i})},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId)}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getApplyList()})},created:function(){this.getPlatList()}},xi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"actor_assign"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t申请日期：\n\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t申请平台：\n\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t状态：\n\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t真实姓名：\n\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:t.filter.identityName,callback:function(e){t.$set(t.filter,"identityName",e)},expression:"filter.identityName"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t联系电话：\n\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.filter.mobile,callback:function(e){t.$set(t.filter,"mobile",e)},expression:"filter.mobile"}})],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.goFilter}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.actorList,height:t.tableHeight,stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{label:"申请时间",width:"122"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"platName",label:"申请平台","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"identityName",label:"真实姓名","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"mobile",label:"联系电话","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"wechat",label:"微信号","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"qq",label:"QQ号","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"summary",label:"接触渠道","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"未审核":"已审核"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"照片","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"img_box"},[t._l(e.row.attachments,function(e){return[i("img",{attrs:{src:e.url},on:{click:function(i){return t.viewImg(e.url)}}})]})],2)]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("审核通过")]):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,2953167067)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var Ti=[{path:"/actor/assign",component:hi},{path:"/actor/management",component:Li},{path:"/actor/apply",component:i("VU/8")(Si,xi,!1,function(t){i("5fko")},"data-v-416e0dbc",null).exports}],$i=C.a.server_api,Pi={components:{Modal:T},data:function(){return{height:200,statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],accountList:[],unionList:[],platList:[],agent:{nickname:"",shareRatio:"",taxRatio:"",status:0,platId:"",platName:"",unionId:"",unionName:""},locked:!1,parentId:""}},computed:{filterTitle:function(){var t="添加经纪人";return this.agent.uuid&&(t="修改经纪人"),t}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(t){var e,i,n,a,s,r=this;return this.agent.nickname?this.agent.shareRatio?this.agent.taxRatio?this.agent.unionId?void(this.locked||(this.locked=!0,setTimeout(function(){r.locked=!1},5e3),this.agent.uuid?(e=this.agent,i=function(){r.locked=!1,r.callback&&r.callback(),t&&t()},a=$i+"/users/brokers/"+e.uuid+".json",s={nickname:e.nickname,shareRatio:e.shareRatio,taxRatio:e.taxRatio,status:e.status,orgId:e.unionId},Object(m.f)(a,"PUT",s,i,n)):function(t,e,i){var n=$i+"/users/brokers.json",a={nickname:t.nickname,shareRatio:t.shareRatio,taxRatio:t.taxRatio,status:t.status,orgId:t.unionId};Object(m.f)(n,"POST",a,e,i)}(this.agent,function(){r.locked=!1,r.callback&&r.callback(),t&&t()}))):(this.$message({message:"请选择工会",type:"error"}),!1):(this.$message({message:"请输入个税",type:"error"}),!1):(this.$message({message:"请输入分成比例",type:"error"}),!1):(this.$message({message:"请输入经纪人名称",type:"error"}),!1)},changePlat:function(t){this.agent.platId=t||"",this.agent.unionId="",this.agent.unionName="",this.parentId=t},changeUnion:function(t){t&&(this.agent.unionId=t);var e=null,i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.unionList);!(i=(s=r.next()).done);i=!0){var o=s.value;o.uuid==t&&(e=o)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}e&&(this.agent.unionName=e.name,this.agent.autoPay=e.autoPay)},getPlatList:function(){var t=this,e=this.user.orgId;$API.platform.getPlatFormList({orgId:e,currentPage:1,limit:50},function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.agent.unionId="";var i=this.user.orgId,n=this.user.orgId;$API.group.getGroupList({orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t},function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,$API.group.getGroupList({orgId:i,parentId:t,currentPage:1,limit:50},function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.agent.unionId=e[0].uuid,t.agent.unionName=e[0].name,t.agent.autoPay=e[0].autoPay):(t.agent.unionId="",t.agent.unionName="",t.agent.autoPay=0)}})},clearSelectUnion:function(){this.agent.unionId="",this.agent.unionName="",this.agent.autoPay=0},getAccountList:function(){},setHeight:function(){var t=document.body.clientHeight-150-40;this.height=t}},mounted:function(){this.user&&this.user.platId&&(this.agent.platId=this.user.platId,this.agent.platName=this.user.platName),this.user&&this.user.unionId&&(this.agent.unionId=this.user.unionId,this.agent.unionName=this.user.unionName),this.setHeight(),this.getAccountList(),this.getPlatList(),this.getUnionList()}},Ai={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:t.filterTitle},on:{destroy:t.destroy,submit:t.submit}},[i("div",{staticClass:"modify_actor",style:{height:t.height+"px"}},[i("div",{staticClass:"group"},[i("div",{staticClass:"warpper clearfix"},[i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("经纪人名称")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,minlength:1,maxlength:20,placeholder:"请输入经纪人"},model:{value:t.agent.nickname,callback:function(e){t.$set(t.agent,"nickname",e)},expression:"agent.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("平台")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.agent.platName,callback:function(e){t.$set(t.agent,"platName",e)},expression:"agent.platName"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("公会")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.agent.unionName,readonly:"",placeholder:"请选择公会"}}),t._v(" "),t.agent.unionName?i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("状态")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.agent.status,callback:function(e){t.$set(t.agent,"status",e)},expression:"agent.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("分成比例")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入分成比例"},model:{value:t.agent.shareRatio,callback:function(e){t.$set(t.agent,"shareRatio",e)},expression:"agent.shareRatio"}})],1)]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"name"},[t._v("个税")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"number",placeholder:"请输入个税"},model:{value:t.agent.taxRatio,callback:function(e){t.$set(t.agent,"taxRatio",e)},expression:"agent.taxRatio"}})],1)])])])])])},staticRenderFns:[]};var Ni=i("VU/8")(Pi,Ai,!1,function(t){i("HadF")},"data-v-67714903",null).exports,Oi=s.default.extend(Ni),Ui=void 0,Ei=function(t){"string"==typeof(t=t||{})&&(t={NewAgent:t}),Ui=new Oi({data:t}),document.getElementById("app").appendChild(Ui.$mount().$el)},Di={data:function(){return{accountGroupList:[],tableHeight:200,platList:[],unionList:[],statusList:[{uuid:1,name:"已停用"},{uuid:0,name:"已启用"}],filter:{nickname:"",id:"",platId:"",unionId:"",unionName:"",status:0},limit:10,parentId:""}},computed:d()({},Object(f.c)({agentList:"agentStore/agent/agentList",total:"agentStore/agent/total",currentPage:"agentStore/agent/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{resetFilter:function(){this.filter={nickname:"",id:"",platId:"",unionId:"",unionName:"",status:0},this.setDefaultOrg(),this.getAgentList(1),this.getUnionList()},handleEdit:function(t,e){var i=this;Ei({user:this.user,agent:e,callback:function(){i.getAgentList(1)}})},handleDelete:function(t,e){var i=this;console.log(e);var n="确定要删除”"+e.nickname+"“吗？";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$store.dispatch("agentStore/agent/deleteAgent",{uuid:e.uuid}).then(function(){i.getAgentList()})}).catch(function(){})},handleSizeChange:function(t){this.limit=t,this.getAgentList(1,t)},handleCurrentChange:function(t){this.getAgentList(t)},goAddAgent:function(){var t=this;Ei({user:this.user,callback:function(){t.getAgentList(1)}})},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},goFilter:function(){this.getAgentList(1)},getAgentList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;this.$store.dispatch("agentStore/agent/getAgentList",{currentPage:t,limit:e,filter:i}).then(function(){})},changePlat:function(t){this.filter.platId=t||"",this.filter.unionId="",this.filter.unionName="",this.parentId=t},changeUnion:function(t){t&&(this.filter.unionId=t);var e=null,i=!0,n=!1,a=void 0;try{for(var s,r=u()(this.unionList);!(i=(s=r.next()).done);i=!0){var o=s.value;o.uuid==t&&(e=o)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}e&&(this.filter.unionName=e.name)},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getAgentList()})},created:function(){this.getPlatList(),this.getUnionList()}},Ri={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"agent_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t经纪人名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入经纪人名称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t经纪人ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{placeholder:"请输入经纪人ID"},model:{value:t.filter.id,callback:function(e){t.$set(t.filter,"id",e)},expression:"filter.id"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.goFilter}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("el-button",{on:{click:t.goAddAgent}},[t._v("添加")]):t._e()],1),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.agentList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{prop:"id",label:"经纪人ID"}}),t._v(" "),i("el-table-column",{attrs:{prop:"nickname",label:"经纪人名称",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"platName",label:"平台名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"unionName",label:"公会名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"已启用":"已停用"))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"shareRatio",label:"分成比例","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"taxRatio",label:"个税","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"actorsCount",label:"主播数量","show-overflow-tooltip":""}}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,268720131)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var Mi=[{path:"/agent",component:i("VU/8")(Di,Ri,!1,function(t){i("BDGY")},"data-v-f3be2908",null).exports}],ji=C.a.server_api,Hi=(C.a.server_user,{components:{Modal:T},data:function(){return{rule:!1,groupId:null,progress:0,uploading:!1,importing:!1,platList:[],result:{success:0,fail:0,done:0,total:0,list:[],showList:[]},orgName:""}},methods:{destroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy()},ruleShow:function(){this.rule=!this.rule},getPlatList:function(){var t=this;$API.platform.getPlatFormList({orgId:this.orgId,start:0,limit:50},function(e){t.platList=e.list})},changePlat:function(t){this.orgId=t,this.initUpload()},exportFailData:function(){var t=C.a.server_api+"/plat/flow/import/result/fail/excel.json?opt_id="+this.groupId;window.open(t)},importProgress:function(){var t,e,i,n,a,s=this;t={groupId:this.groupId},e=function(t){s.result.total=t.count,s.result.success=t.successCount,s.result.fail=t.failCount,s.result.done=t.done,t.done==t.count?(Object(E.a)({content:"导入成功",type:"success"}),s.importing=!1):setTimeout(function(){s.importProgress()},1e3)},i=t.groupId,n=ji+"/plat/flow/import/result.json",a={optId:i},Object(m.f)(n,"GET",a,e)},showResultList:function(t){"total"==t?this.result.showList=this.result.list:"success"==t?this.result.showList=this.result.list.filter(function(t){return 1==t.status}):"fail"==t&&(this.result.showList=this.result.list.filter(function(t){return 2==t.status||3==t.status}))},initUpload:function(){var t=this,e="/api/plat/flow/import.json?token="+this.token+"&plat="+this.plat+"&orgId="+this.orgId;console.log("init upload"),console.log(e);$("#importFileUpload").fileupload({url:e,autoUpload:!0,add:function(e,i){if(console.log("add files"),console.log(t.uploading),console.log(t.importing),t.uploading||t.importing)Object(E.a)({content:"正在进行导入...",type:"error"});else{var n=i.originalFiles[0].name;if(!/\.(xls|xlsx|XLS|XLSX|csv|CSV)$/.test(n))return Object(E.a)({content:"格式不正确",type:"error"}),!1;t.uploading=!0,t.result.total=0,t.result.success=0,t.result.fail=0,t.result.done=0,t.result.list=[],i.submit()}},progressall:function(e,i){t.progress=i.loaded/i.total*100+"%"},success:function(e){if(t.uploading=!1,0!=e.result)return Object(E.a)({content:e.msg,type:"error"}),!1;t.groupId=e.optId,t.importing=!0,t.importProgress()}})}},mounted:function(){var t=this;setTimeout(function(){t.initUpload(),t.getPlatList()},500)},created:function(){this.user&&this.user.platId&&(this.orgId=this.user.platId,this.orgName=this.user.platName)}}),Gi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{title:"导入流水","is-footer":!1},on:{destroy:t.destroy}},[i("div",{staticClass:"import_task_wrapper"},[i("div",{staticClass:"import-task-group clearfix"},[t._v("\n            选择导入平台：\n            "),i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择导入平台"},on:{change:t.changePlat},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1),t._v(" "),i("div",{staticClass:"import-task-group clearfix"},[i("div",{staticClass:"content"},[i("p",[i("a",{staticClass:"import-btn"},[i("span",{staticClass:"box"},[t.uploading||t.importing?t._e():[t._v("上传本地文件")],t._v(" "),t.uploading?[t._v("上传 "+t._s(t.progress))]:t._e(),t._v(" "),t.importing?[t._v("导入中...")]:t._e()],2),t._v(" "),i("input",{staticClass:"import-file",attrs:{type:"file",id:"importFileUpload",name:"file"}})])])])]),t._v(" "),i("div",{staticClass:"import-task-group clearfix"},[i("div",{staticClass:"content"},[i("p",[t._v("数据导入成功并反馈导入信息；")]),t._v(" "),t.result.total>0?i("p",[i("span",{staticClass:"num-item total",on:{click:function(e){return t.showResultList("total")}}},[t._v("总数："+t._s(t.result.total)+"条")]),t._v(" "),i("span",{staticClass:"num-item success",on:{click:function(e){return t.showResultList("success")}}},[t._v("成功："+t._s(t.result.success)+"条")]),t._v(" "),i("span",{staticClass:"num-item fail",on:{click:function(e){return t.showResultList("fail")}}},[t._v("失败："+t._s(t.result.fail)+"条")])]):t._e(),t._v(" "),0!=t.result.fail?[i("span",{staticStyle:{"margin-top":"6px"}},[i("el-button",{attrs:{type:"warning",plain:""},on:{click:t.exportFailData}},[t._v("导出失败数据")])],1)]:t._e()],2)])])])},staticRenderFns:[]};var zi=i("VU/8")(Hi,Gi,!1,function(t){i("/Bry")},"data-v-6d3a1e12",null).exports,Fi=s.default.extend(zi),Bi=void 0,qi=function(t){"string"==typeof(t=t||{})&&(t={ImportFlow:t}),Bi=new Fi({data:t}),document.getElementById("app").appendChild(Bi.$mount().$el)},Qi={data:function(){return{platList:[],unionList:[],tableHeight:200,orgType:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],statusList:[{uuid:1,name:"已入账"},{uuid:0,name:"待入账"}],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:0,salaryType:""},multipleSelection:[],limit:10,sorters:[],parentId:"",salaryTypes:[{name:"全部",uuid:""},{name:"日结",uuid:"0"},{name:"月结",uuid:"1"}]}},computed:d()({},Object(f.c)({accountList:"financeStore/account/accountList",analyze:"financeStore/account/analyze",total:"financeStore/account/total",currentPage:"financeStore/account/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)},batchDelete:function(){var t=!1;return!this.edit||this.user.unionId||this.user.managerOrgs&&0!=this.user.managerOrgs.length||(t=!0),t},isSuperAdmin:function(){var t=!1;return this.user&&"SUPER_ADMIN"==this.user.userType&&(t=!0),t}}),methods:{sortChange:function(t){if(console.log(t),t.prop){var e=t.prop;"shareNum"==e&&(e="share_num");var i={column:e,direction:"ascending"==t.order?"asc":"desc"};this.sorters.push(i)}else this.sorters=[];this.getAccountList()},handleSelectionChange:function(t){this.multipleSelection=t},goAutoCalculate:function(){var t=this;this.$confirm("确定要自动入账吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("financeStore/account/autoCalculate").then(function(){t.getAccountList()})}).catch(function(){})},handleDelete:function(t,e){var i=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/account/deleteAccount",{list:t}).then(function(){i.getAccountList()})}).catch(function(){})},batchCalculate:function(){var t=this,e=this.multipleSelection;if(e.length>0){this.$confirm("确定要批量入账吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}t.$store.dispatch("financeStore/account/calculateAccount",{list:i}).then(function(){t.getAccountList()})}).catch(function(){})}},goBatchDelete:function(){var t=this,e=this.multipleSelection;if(e.length>0){this.$confirm("确定要批量删除这些数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}t.$store.dispatch("financeStore/account/deleteAccount",{list:i}).then(function(){t.getAccountList()})}).catch(function(){})}},handleEdit:function(t,e){var i=this;this.$confirm("确定要入账吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/account/calculateAccount",{list:t}).then(function(){i.getAccountList()})}).catch(function(){})},goImportFlow:function(){var t=localStorage.getItem("requestParam");t&&(t=JSON.parse(t)),qi({token:t.token,plat:t.plat,orgId:this.user.orgId,user:this.user,callback:function(){}})},handleSizeChange:function(t){this.limit=t,this.getAccountList(1,t)},handleCurrentChange:function(t){this.getAccountList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight,e=this.$refs.filter.offsetHeight,i=this.$refs.operate.offsetHeight,n=this.$refs.page.offsetHeight,a=t-e-i-this.$refs.analyze.offsetHeight-n-24;console.log(a),this.tableHeight=a},resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:0},this.setDefaultOrg(),this.getAccountList(1),this.getUnionList()},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getAccountList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter,n=this.sorters;console.log(this.filter),this.$store.dispatch("financeStore/account/getAccountList",{currentPage:t,limit:e,filter:i,sorters:n}).then(function(){})},goExport:function(){var t=config_server.server_api+"/plat/flow/export.json?",e=this.filter;e&&(e.unionId?t=t+"&orgId="+e.unionId:e.platId&&(t=t+"&orgId="+e.platId),(e.status||0==e.status)&&(t=t+"&status="+e.status),e.nickname&&(t=t+"&nickname="+e.nickname),e.thirdId&&(t=t+"&thirdId="+e.thirdId),e.date&&(t=(t=t+"&startDate="+new Date(e.date[0]).getTime())+"&endDate="+new Date(e.date[1]).getTime()),e.salaryType&&(t=t+"&salaryType="+e.salaryType));var i=getRequestParam().token;i&&(t=t+"&token="+i,console.log(t),window.open(t))},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getAccountList()})},created:function(){this.getPlatList(),this.getUnionList()}},Vi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t直播ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入直播ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t账单状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          结算方式：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择结算方式"},model:{value:t.filter.salaryType,callback:function(e){t.$set(t.filter,"salaryType",e)},expression:"filter.salaryType"}},t._l(t.salaryTypes,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAccountList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("el-button",{on:{click:t.batchCalculate}},[t._v("批量入账")]):t._e(),t._v(" "),t.batchDelete?i("el-button",{on:{click:t.goBatchDelete}},[t._v("批量删除")]):t._e(),t._v(" "),i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goExport}},[t._v("账单导出")])],1),t._v(" "),t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length||!t.edit?t._e():i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goAutoCalculate}},[t._v("自动入账")]),t._v(" "),i("el-button",{on:{click:t.goImportFlow}},[t._v("账单导入")])],1)],1),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.accountList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange}},[t.edit?i("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{label:"日期",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.day,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"trackNum",label:"账单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"公会","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.unionName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"昵称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"120",label:"平台用户ID","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.thirdId))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"showHour",label:"直播时长","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"120",prop:"todayFansCount",label:"今日粉丝量","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{width:"120",prop:"yesterdayFansCount",label:"昨日粉丝量","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"shareNum",label:"入账金额/元",width:"120",sortable:"custom","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.shareNum)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"账单状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"待入账":"已入账"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"结算方式",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.creator.salaryType?"日结":"月结"))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.creator.unionId&&0==e.row.creator.status&&1!=e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("入账")])]:1==e.row.status?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"",placement:"bottom"}},[i("el-button",{attrs:{size:"mini",disabled:""}},[t._v("已入账")])],1)]:[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配公会并且已启用才可入账",placement:"bottom"}},[i("el-button",{attrs:{size:"mini",disabled:""}},[t._v("入账")])],1)],t._v(" "),t.isSuperAdmin?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}],null,!1,3615486517)}):t._e()],1)],1),t._v(" "),i("div",{ref:"analyze",staticClass:"count_analyze"},[i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t今日导入账单金额/元\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.todayShareNum||0)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t今日导入账单数\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.todayShareCount||0)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t今日已入账金额/元\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.todayDoneShareNum||0)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t今日待入账金额/元\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.todayWaitShareNum||0)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t今日待入账账单数\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.todayWaitShareCount||0)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t历史待入账账单数\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.shareCount||0)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"top"},[t._v("\n\t\t\t\t\t\t入账阀值/元\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t\t\t"+t._s(t.analyze&&t.analyze.maxEntry||0)+"\n\t\t\t\t\t")])])]),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var Ki=i("VU/8")(Qi,Vi,!1,function(t){i("I39P")},"data-v-15207b83",null).exports,Yi={data:function(){return{platList:[],unionList:[],tableHeight:200,orgType:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],statusList:[{uuid:0,name:"入账"},{uuid:1,name:"提现"}],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",type:"",salaryType:""},limit:10,parentId:"",salaryTypes:[{name:"全部",uuid:""},{name:"日结",uuid:"0"},{name:"月结",uuid:"1"}]}},computed:d()({},Object(f.c)({flowList:"financeStore/flow/flowList",total:"financeStore/flow/total",currentPage:"financeStore/flow/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{handleDelete:function(t,e){},handleSizeChange:function(t){this.limit=t,this.getFlowList(1,t)},handleCurrentChange:function(t){this.getFlowList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",type:""},this.setDefaultOrg(),this.getFlowList(1),this.getUnionList()},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getFlowList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;this.$store.dispatch("financeStore/flow/getFlowList",{currentPage:t,limit:e,filter:i}).then(function(){})},goExport:function(){var t=config_server.server_api+"/finance/flow/export.json?",e=this.filter;e&&(e.unionId?t=t+"&orgId="+e.unionId:e.platId&&(t=t+"&orgId="+e.platId),(e.status||0==e.status)&&(t=t+"&status="+e.status),(e.type||0===e.type)&&(t=t+"&type="+e.type),e.nickname&&(t=t+"&nickname="+e.nickname),e.thirdId&&(t=t+"&thirdId="+e.thirdId),e.date&&(t=(t=t+"&startDate="+new Date(e.date[0]).getTime())+"&endDate="+new Date(e.date[1]).getTime()),e.salaryType&&(t=t+"&salaryType="+e.salaryType));var i=getRequestParam().token;i&&(t=t+"&token="+i,window.open(t))},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getFlowList()})},created:function(){this.getPlatList(),this.getUnionList()}},Wi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t直播ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入直播ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t动账类型：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择动账类型"},on:{change:function(t){}},model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          结算方式：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择结算方式"},model:{value:t.filter.salaryType,callback:function(e){t.$set(t.filter,"salaryType",e)},expression:"filter.salaryType"}},t._l(t.salaryTypes,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getFlowList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goExport}},[t._v("账单导出")])],1):t._e()]),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.flowList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{label:"日期",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.day||e.row.createDate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"trackNum",label:"账单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"平台","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.platName))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"unionName",label:"公会","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.unionName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"昵称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"120",label:"直播ID","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.thirdId))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"真实姓名","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.identityName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"待遇","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.payFloor))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"动账类型","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.type?"入账":"提现"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"动账基数","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.moneyBase)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"动账前余额/元",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.moneyBefore)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"动账/元","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.type?"":"-")+" "+t._s(t._f("filterMoney")(e.row.moneyNum)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"动账后余额/元",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.moneyAfter)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"结算方式",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.creator.salaryType?"日结":"月结"))]}}])})],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var Ji=i("VU/8")(Yi,Wi,!1,function(t){i("8Tgh")},"data-v-b28eb468",null).exports,Xi={data:function(){return{platList:[],unionList:[],multipleSelection:[],tableHeight:200,orgType:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],statusList:[{uuid:"WAITING_APPROVAL",name:"待审核"},{uuid:"WAITING_PAY",name:"待打款"},{uuid:"CASH_DONE",name:"提现成功"},{uuid:"APPROVAL_REJECT",name:"申请拒绝"},{uuid:"PAY_REJECT",name:"打款拒绝"}],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},limit:10,parentId:""}},computed:d()({},Object(f.c)({reflectList:"financeStore/reflect/reflectList",total:"financeStore/reflect/total",currentPage:"financeStore/reflect/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{handleSelectionChange:function(t){this.multipleSelection=t},batchAgree:function(){var t=this,e=this.multipleSelection;if(e.length>0){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}var c="确定要通过这"+i.length+"条申请吗？";this.$confirm(c,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("financeStore/reflect/agreeApply",{list:i}).then(function(){t.getReflectList()})}).catch(function(){})}},batchReject:function(){var t=this,e=this.multipleSelection;if(e.length>0){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=u()(e);!(n=(r=o.next()).done);n=!0){var l=r.value;i.push(l.uuid)}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}var c="确定要拒绝这"+i.length+"条申请吗？";this.$confirm(c,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("financeStore/reflect/rejectApply",{list:i}).then(function(){t.getReflectList()})}).catch(function(){})}},agreeApply:function(t,e){var i=this;this.$confirm("确定要通过该申请吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/reflect/agreeApply",{list:t}).then(function(){i.getReflectList()})}).catch(function(){})},rejectApply:function(t,e){var i=this;this.$confirm("确定要拒绝该申请吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/reflect/rejectApply",{list:t}).then(function(){i.getReflectList()})}).catch(function(){})},handleSizeChange:function(t){this.limit=t,this.getReflectList(1,t)},handleCurrentChange:function(t){this.getReflectList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},this.setDefaultOrg(),this.getReflectList(1),this.getUnionList()},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getReflectList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;this.$store.dispatch("financeStore/reflect/getReflectList",{currentPage:t,limit:e,filter:i}).then(function(){})},goExport:function(){var t=config_server.server_api+"/finance/cash/apply/export.json?",e=this.filter;e&&(e.unionId?t=t+"&orgId="+e.unionId:e.platId&&(t=t+"&orgId="+e.platId),e.status&&(t=t+"&status="+e.status),e.nickname&&(t=t+"&nickname="+e.nickname),e.thirdId&&(t=t+"&thirdId="+e.thirdId),e.date&&(t=(t=t+"&startDate="+new Date(e.date[0]).getTime())+"&endDate="+new Date(e.date[1]).getTime()));var i=getRequestParam().token;i&&(t=t+"&token="+i,window.open(t))},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getReflectList()})},created:function(){this.getPlatList(),this.getUnionList()}},Zi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t直播ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入直播ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t提现状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择提现状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getReflectList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?[i("el-button",{on:{click:t.batchAgree}},[t._v("批量通过\t")]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:t.batchReject}},[t._v("批量拒绝")]),t._v(" "),i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goExport}},[t._v("订单导出")])],1)]:t._e()],2),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.reflectList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"日期",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.lastUpdate,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"trackNum",label:"提现单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"平台","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.platName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"公会","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.unionName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"昵称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"120",label:"直播ID","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.thirdId))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"真实姓名","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.identityName))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"cashAccount",label:"提现账号","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"可提现金额",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.validMoney)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"提现金额","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.money)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"提现后金额",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.remainMoney)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"提现状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("reflectStatus")(e.row.status)))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return["WAITING_APPROVAL"==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.agreeApply(e.$index,e.row)}}},[t._v("通过")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.rejectApply(e.$index,e.row)}}},[t._v("拒绝")])]:"WAITING_PAY"==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.agreeApply(e.$index,e.row)}}},[t._v("打款")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.rejectApply(e.$index,e.row)}}},[t._v("拒绝")])]:"APPROVAL_REJECT"==e.row.status||"PAY_REJECT"==e.row.status?[i("el-button",{attrs:{size:"mini"}},[t._v("已拒绝")])]:t._e()]}}],null,!1,3479718123)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var tn=i("VU/8")(Xi,Zi,!1,function(t){i("57Vo")},"data-v-6f6ee675",null).exports,en={data:function(){return{platList:[],unionList:[],tableHeight:200,statusList:[{uuid:0,name:"待发放"},{uuid:1,name:"已发放"},{uuid:2,name:"拒绝发放"}],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},limit:10,parentId:""}},computed:d()({},Object(f.c)({salaryList:"financeStore/actor/salaryList",total:"financeStore/actor/total",currentPage:"financeStore/actor/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{agreeApply:function(t,e){var i=this;this.$confirm("确定要发放薪资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/actor/agreeApply",{list:t}).then(function(){i.getActorSalaryList()})}).catch(function(){})},rejectApply:function(t,e){var i=this;this.$confirm("确定要拒绝发放薪资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/actor/rejectApply",{list:t}).then(function(){i.getActorSalaryList()})}).catch(function(){})},handleSizeChange:function(t){this.limit=t,this.getActorSalaryList(1,t)},handleCurrentChange:function(t){this.getActorSalaryList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},this.setDefaultOrg(),this.getActorSalaryList(1),this.getUnionList()},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getActorSalaryList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;this.$store.dispatch("financeStore/actor/getActorSalaryList",{currentPage:t,limit:e,filter:i}).then(function(){})},goExport:function(){var t=config_server.server_api+"/salary/actor/export.json?",e=this.filter;e&&(e.unionId?t=t+"&orgId="+e.unionId:e.platId&&(t=t+"&orgId="+e.platId),(e.status||0==e.status)&&(t=t+"&status="+e.status),e.nickname&&(t=t+"&nickname="+e.nickname),e.thirdId&&(t=t+"&thirdId="+e.thirdId),e.date&&(t=(t=t+"&startDate="+new Date(e.date[0]).getTime())+"&endDate="+new Date(e.date[1]).getTime()));var i=getRequestParam().token;i&&(t=t+"&token="+i,window.open(t))},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getActorSalaryList()})},created:function(){this.getPlatList(),this.getUnionList()}},nn={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t直播ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入直播ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t薪资状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择薪资状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getActorSalaryList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goExport}},[t._v("订单导出")])],1):t._e()]),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.salaryList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{label:"月份",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.day,"yyyy-MM")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"trackNum",label:"结算单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"平台","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.platName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"公会","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.unionName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"昵称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"120",label:"平台用户ID","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.thirdId))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"真实姓名","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.identityName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"待遇","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.creator.payFloor)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"直播平台流水",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.thirdFlow)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"platFlow",label:"平台分成收入",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.platFlow)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"pretaxIncome",label:"税前收入","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.pretaxIncome)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"税后收入","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.income)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"保底条件","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.floored?"不满足":"满足"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"收入结算","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.creator.autoPay?"人工代发工资":"系统自动代发工资"))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"应发工资","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.income)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"发放状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("salaryStatus")(e.row.status)))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.agreeApply(e.$index,e.row)}}},[t._v("发放")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.rejectApply(e.$index,e.row)}}},[t._v("拒绝")])]:t._e()]}}],null,!1,3786457187)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var an=i("VU/8")(en,nn,!1,function(t){i("oISl")},"data-v-352bd418",null).exports,sn={data:function(){return{platList:[],unionList:[],tableHeight:200,orgType:[{uuid:"SYSTEM",name:"系统"},{uuid:"PLAT",name:"平台"},{uuid:"UNION",name:"公会"}],statusList:[{uuid:0,name:"待发放"},{uuid:1,name:"已发放"},{uuid:2,name:"拒绝发放"}],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},limit:10,parentId:""}},computed:d()({},Object(f.c)({agentList:"financeStore/agent/agentList",total:"financeStore/actor/total",currentPage:"financeStore/actor/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{agreeApply:function(t,e){var i=this;this.$confirm("确定要发放薪资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/agent/agreeApply",{list:t}).then(function(){i.getAgentList()})}).catch(function(){})},rejectApply:function(t,e){var i=this;this.$confirm("确定要拒绝发放薪资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/agent/rejectApply",{list:t}).then(function(){i.getAgentList()})}).catch(function(){})},handleSizeChange:function(t){this.limit=t,this.getAgentList(1,t)},handleCurrentChange:function(t){this.getAgentList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},this.setDefaultOrg(),this.getAgentList(1),this.getUnionList()},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},getAgentList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;this.$store.dispatch("financeStore/agent/getAgentList",{currentPage:t,limit:e,filter:i}).then(function(){})},goExport:function(){var t=config_server.server_api+"/salary/broker/export.json?",e=this.filter;e&&(e.unionId?t=t+"&orgId="+e.unionId:e.platId&&(t=t+"&orgId="+e.platId),(e.status||0==e.status)&&(t=t+"&status="+e.status),e.nickname&&(t=t+"&nickname="+e.nickname),e.thirdId&&(t=t+"&thirdId="+e.thirdId),e.date&&(t=(t=t+"&startDate="+new Date(e.date[0]).getTime())+"&endDate="+new Date(e.date[1]).getTime()));var i=getRequestParam().token;i&&(t=t+"&token="+i,window.open(t))},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getAgentList()})},created:function(){this.getPlatList(),this.getUnionList()}},rn={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t昵称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入昵称"},model:{value:t.filter.nickname,callback:function(e){t.$set(t.filter,"nickname",e)},expression:"filter.nickname"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t直播ID：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{clearable:!0,placeholder:"请输入直播ID"},model:{value:t.filter.thirdId,callback:function(e){t.$set(t.filter,"thirdId",e)},expression:"filter.thirdId"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t薪资状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择薪资状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAgentList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[t.edit?i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goExport}},[t._v("订单导出")])],1):t._e()]),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.agentList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{label:"月份",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.day,"yyyy-MM")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"trackNum",label:"结算单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"平台","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.platName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"公会","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.unionName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"经纪人ID","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.id))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"经纪人名称",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.nickname))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"actorThirdFlow",label:"所辖艺人流水/元",width:"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.actorThirdFlow)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"totalSalary",label:"分成/元","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.totalSalary)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"应发工资/元",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.income)))]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"120",label:"分成比例 %","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.shareRatio))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"税率 %","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.creator.taxRatio))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"发放状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("salaryStatus")(e.row.status)))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.agreeApply(e.$index,e.row)}}},[t._v("发放")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.rejectApply(e.$index,e.row)}}},[t._v("拒绝")])]:t._e()]}}],null,!1,3786457187)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var on=i("VU/8")(sn,rn,!1,function(t){i("q5bN")},"data-v-6187fe76",null).exports,ln={data:function(){return{platList:[],unionList:[],tableHeight:200,statusList:[{uuid:"",name:"全部"},{uuid:1,name:"已结算"},{uuid:0,name:"未结算"}],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:"",salaryType:""},limit:10,parentId:"",salaryTypes:[{name:"全部",uuid:""},{name:"日结",uuid:"0"},{name:"月结",uuid:"1"}]}},computed:d()({},Object(f.c)({salaryList:"financeStore/union/salaryList",total:"financeStore/union/total",currentPage:"financeStore/union/currentPage",user:"userStore/user/user",nav:"homeStore/home/nav",authorities_nav:"userStore/user/authorities"}),{edit:function(){var t=this.$route.path;return ge(this.user,t,this.nav,this.authorities_nav)}}),methods:{agreeApply:function(t,e){var i=this;this.$confirm("确定要结算薪资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/union/agreeApply",{list:t}).then(function(){i.getUnionSalaryList()})}).catch(function(){})},rejectApply:function(t,e){var i=this;this.$confirm("确定要拒绝发放薪资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.uuid),i.$store.dispatch("financeStore/union/rejectApply",{list:t}).then(function(){i.getUnionSalaryList()})}).catch(function(){})},handleSizeChange:function(t){this.limit=t,this.getUnionSalaryList(1,t)},handleCurrentChange:function(t){this.getUnionSalaryList(t)},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-this.$refs.operate.offsetHeight-this.$refs.page.offsetHeight-24;console.log(t),this.tableHeight=t},resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:"",nickname:"",thirdId:"",status:""},this.setDefaultOrg(),this.getUnionSalaryList(1),this.getUnionList()},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getUnionSalaryList:function(t,e){t=t||this.currentPage,e=e||this.limit;var i=this.filter;this.$store.dispatch("financeStore/union/getUnionSalaryList",{currentPage:t,limit:e,filter:i}).then(function(){})},goExport:function(){var t=config_server.server_api+"/salary/union/export.json?",e=this.filter;e&&(e.unionId?t=t+"&orgId="+e.unionId:e.platId&&(t=t+"&orgId="+e.platId),(e.status||0==e.status)&&(t=t+"&status="+e.status),e.date&&(t=(t=t+"&startDate="+Object(m.d)(e.date))+"&endDate="+Object(m.e)(e.date)),e.salaryType&&(t=t+"&salaryType="+e.salaryType));var i=getRequestParam().token;i&&(t=t+"&token="+i,window.open(t))},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name):(t.filter.unionId="",t.filter.unionName="")}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getUnionSalaryList()})},created:function(){this.getPlatList(),this.getUnionList()}},un={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"account_list"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t结算状态：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择结算状态"},on:{change:function(t){}},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          结算方式：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择结算方式"},model:{value:t.filter.salaryType,callback:function(e){t.$set(t.filter,"salaryType",e)},expression:"filter.salaryType"}},t._l(t.salaryTypes,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getUnionSalaryList(1)}}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"operate",staticClass:"operate"},[i("div",{staticClass:"opt_right",staticStyle:{float:"right"}},[i("el-button",{on:{click:t.goExport}},[t._v("导出账单")])],1)]),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.salaryList,height:t.tableHeight,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[i("el-table-column",{attrs:{label:"月份",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.day,"yyyy-MM")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"trackNum",label:"账单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"平台名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.org&&e.row.org.parentName))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"公会名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.org&&e.row.org.name))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"公会ID","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.org&&e.row.org.uuid))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"unionThirdFlow",label:"月流水/元",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.unionThirdFlow)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"unionPlatFlow",label:"平台入账/元",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.unionPlatFlow)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"分成%","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.org&&e.row.org.shareRatio))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"税点%","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.org&&e.row.org.taxRatio))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"艺人工资代发","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterAutoPay")(e.row.autoPay)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"公会应结算","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterMoney")(e.row.income)))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"结算状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"未结算":"已结算"))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"结算方式",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.salaryType?"日结":"月结"))]}}])}),t._v(" "),t.edit?i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.agreeApply(e.$index,e.row)}}},[t._v("结算")])]:t._e()]}}],null,!1,152225849)}):t._e()],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var cn=[{path:"/finance/account",component:Ki},{path:"/finance/flow",component:Ji},{path:"/finance/reflect",component:tn},{path:"/finance/actor",component:an},{path:"/finance/agent",component:on},{path:"/finance/union",component:i("VU/8")(ln,un,!1,function(t){i("Ap0p")},"data-v-0d51e91e",null).exports}],dn={data:function(){return{statusList:[{name:"已启用",uuid:0},{name:"已停用",uuid:1}],multipleSelection:[],tableHeight:250,agentList:[],platList:[],unionList:[],analyzeList:[],total:0,currentPage:1,limit:10,adminList:[],managerList:[],filter:{orgId:"",platId:"",unionId:"",unionName:"",date:"",adminId:"",salaryType:"",managerId:""},parentId:"",salaryTypes:[{name:"全部",uuid:""},{name:"日结",uuid:"0"},{name:"月结",uuid:"1"}]}},computed:d()({},Object(f.c)({user:"userStore/user/user"})),methods:{resetFilter:function(){this.filter={orgId:"",platId:"",unionId:"",unionName:"",date:""},this.setDefaultOrg(),this.getAnalyzeList(1)},goFilter:function(){this.getAnalyzeList()},handleSelectionChange:function(t){this.multipleSelection=t},setHeight:function(){var t=this.$refs.container.offsetHeight-this.$refs.filter.offsetHeight-(this.$refs.charts&&this.$refs.charts.offsetHeight||0)-this.$refs.page.offsetHeight-24;console.log(t),t<200&&(t=200),this.tableHeight=t},handleSizeChange:function(t){this.limit=t,this.getAnalyzeList(1,t)},handleCurrentChange:function(t){this.getAnalyzeList(t)},getAnalyzeList:function(t,e){var i=this;t=t||this.currentPage,e=e||this.limit;var n=this.filter;this.$store.dispatch("analyzeStore/analyze/getAnalyzeList",{currentPage:t,limit:e,filter:n}).then(function(n){i.currentPage=t,i.limit=e,i.analyzeList=n.list,i.total=n.count,i.showCharts(n.list)})},showCharts:function(t){var e=echarts.init(document.getElementById("analyze_charts")),i=[],n=[],a=[],s={},r=!0,o=!1,l=void 0;try{for(var c,d=u()([{name:"流水金额",key:"thirdFlow"},{name:"入账金额",key:"income"},{name:"提现金额",key:"cashMoney"},{name:"开播人数",key:"showUserNum"},{name:"平均直播时长",key:"showHourAvg"}]);!(r=(c=d.next()).done);r=!0){var f=c.value;i.push(f.name);var h={name:f.name,type:"line",stack:"总量",data:[]};s[f.key]=h,a.push(h)}}catch(t){o=!0,l=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw l}}var p=!0,v=!1,g=void 0;try{for(var _,y=u()(t);!(p=(_=y.next()).done);p=!0){var b=_.value,I=Object(m.g)(b.day,"yyyy-MM-dd");n.push(I),s.thirdFlow.data.push(b.thirdFlow),s.income.data.push(b.income),s.cashMoney.data.push(b.cashMoney),s.showUserNum.data.push(b.showUserNum),s.showHourAvg.data.push(b.showHourAvg)}}catch(t){v=!0,g=t}finally{try{!p&&y.return&&y.return()}finally{if(v)throw g}}var C=C={title:{text:""},tooltip:{trigger:"axis"},legend:{data:i},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:n},yAxis:{type:"value"},series:a};e.setOption(C)},changePlat:function(t){this.filter.orgId=t||"",this.filter.unionId="",this.parentId=t,this.getManagerList(t)},changeUnion:function(t){t?this.filter.orgId=t:this.filter.platId&&(this.filter.orgId=this.filter.platId)},getPlatList:function(){var t=this,e=this.user.orgId;this.$store.dispatch("platStore/platform/getPlatFormList",{orgId:e,currentPage:1,limit:50}).then(function(e){t.platList=e.list})},filterUnion:function(t){var e=this;this.filter.unionId="",this.filter.orgId="";var i=this.user.orgId,n=this.user.orgId;this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:n,currentPage:1,limit:50,searchKey:t}).then(function(t){e.unionList=t.list})},getUnionList:function(t){var e=this,i=this.user.orgId;t=t||this.user.orgId,this.$store.dispatch("groupStore/group/getGroupList",{orgId:i,parentId:t,currentPage:1,limit:50}).then(function(t){e.unionList=t.list})},goSelectUnion:function(){var t=this;if(this.user.unionId)return!1;ce({user:this.user,orgId:this.user.orgId,parentId:this.parentId||this.user.orgId,callback:function(e){e.length?(t.filter.unionId=e[0].uuid,t.filter.unionName=e[0].name,t.filter.salaryType=e[0].salaryType):(t.filter.unionId="",t.filter.unionName="",t.filter.salaryType=void 0,t.filter.adminId=""),t.getAdminsList()}})},clearSelectUnion:function(){this.filter.unionId="",this.filter.unionName=""},getAdminsList:function(){var t=this,e=this.filter.unionId;e?$API.limit.getAdminsList({orgType:"UNION",orgId:e},function(e){t.adminList=e.list}):this.adminList=[]},getManagerList:function(t){var e=this,i="";this.user.platId&&(i=this.user.platId),t&&(i=t),i?$API.limit.getAdminsList({orgType:"PLAT",orgId:i},function(t){e.managerList=t.list}):this.managerList=[]},changeAdmin:function(){},setDefaultOrg:function(){this.user&&(this.filter.platId=this.user.platId,this.filter.unionId=this.user.unionId,this.filter.unionName=this.user.unionName,!this.user.unionId&&this.user.managerOrgs&&this.user.managerOrgs.length>0&&(this.filter.unionId=this.user.managerOrgs[0].uuid,this.filter.unionName=this.user.managerOrgs[0].name))}},watch:{user:function(){this.setDefaultOrg()}},mounted:function(){var t=this;setTimeout(function(){t.setHeight(),t.setDefaultOrg(),t.getAnalyzeList(),t.getManagerList()})},created:function(){this.getPlatList(),this.getUnionList()}},fn={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"actor_assign"},[i("div",{ref:"filter",staticClass:"filter clearfix"},[i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t平台名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{disabled:!!t.user.platId,clearable:!0,placeholder:"请选择平台"},on:{change:t.changePlat},model:{value:t.filter.platId,callback:function(e){t.$set(t.filter,"platId",e)},expression:"filter.platId"}},t._l(t.platList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t公会名称：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content",staticStyle:{cursor:"pointer"},on:{click:t.goSelectUnion}},[i("el-input",{attrs:{value:t.filter.unionName,disabled:!!t.user.unionId,placeholder:"请选择公会"}}),t._v(" "),!t.filter.unionName||t.user.unionId||t.user.managerOrgs&&0!=t.user.managerOrgs.length?t._e():i("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.clearSelectUnion(e)}}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          管理员：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择管理员"},on:{change:t.changeAdmin},model:{value:t.filter.adminId,callback:function(e){t.$set(t.filter,"adminId",e)},expression:"filter.adminId"}},t._l(t.adminList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.nickname,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          负责人：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择负责人"},on:{change:t.changeAdmin},model:{value:t.filter.managerId,callback:function(e){t.$set(t.filter,"managerId",e)},expression:"filter.managerId"}},t._l(t.managerList,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.nickname,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t日期：\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1)]),t._v(" "),i("div",{staticClass:"filter_items"},[i("div",{staticClass:"name"},[t._v("\n          结算方式：\n        ")]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{clearable:!0,placeholder:"请选择结算方式"},model:{value:t.filter.salaryType,callback:function(e){t.$set(t.filter,"salaryType",e)},expression:"filter.salaryType"}},t._l(t.salaryTypes,function(t){return i("el-option",{key:t.uuid,attrs:{label:t.name,value:t.uuid}})}),1)],1)]),t._v(" "),i("div",{staticClass:"opt_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.goFilter}},[t._v("查询")]),t._v(" "),i("el-button",{on:{click:t.resetFilter}},[t._v("重置")])],1)]),t._v(" "),i("div",{ref:"charts",staticClass:"charts"},[i("div",{attrs:{id:"analyze_charts"}})]),t._v(" "),i("div",{staticClass:"filter_list"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.analyzeList,height:t.tableHeight,stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{label:"日期",width:"122"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timesToDate")(e.row.day,"yyyy-MM-dd")))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"thirdFlow",label:"流水金额（元）","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"income",label:"入账金额（元）","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"cashMoney",label:"提现金额（元）","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"showUserNum",label:"开播人数","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"showHourAvg",label:"平均直播时长","show-overflow-tooltip":""}})],1)],1),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var hn=[{path:"/analyze",component:i("VU/8")(dn,fn,!1,function(t){i("dVww")},"data-v-56e0df88",null).exports}],pn={data:function(){return{limit:10}},computed:d()({},Object(f.c)({logs:"logsStore/logs/logs",total:"logsStore/logs/total",currentPage:"logsStore/logs/currentPage",logs_types:"logsStore/logs/logs_types",logs_maps:"logsStore/logs/logs_maps",user:"userStore/user/user"})),methods:{handleSizeChange:function(t){this.limit=t,this.getLogsList(1,t)},handleCurrentChange:function(t){this.getLogsList(t)},getLogsList:function(t,e){var i=this;t=t||this.currentPage,e=e||this.limit,this.logs_types&&0!=this.logs_types.length?this.$store.dispatch("logsStore/logs/getLogsList",{currentPage:t,limit:e}).then(function(){}):this.$store.dispatch("logsStore/logs/getLogsTypes",{}).then(function(){i.$store.dispatch("logsStore/logs/getLogsList",{currentPage:t,limit:e}).then(function(){})})}},mounted:function(){},created:function(){this.getLogsList()}},vn={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"logs_wrapper"},[i("div",{staticClass:"logs_list"},[i("ul",t._l(t.logs,function(e){return i("li",[i("span",{staticClass:"time"},[t._v(t._s(t._f("timesToDate")(e.createDate,"yyyy-MM-dd HH:mm:ss")))]),t._v("\n\t\t\t\t用户\n\t\t\t\t"),i("span",{staticClass:"items"},[t._v(" "+t._s(e.creator.nickname)+" ")]),t._v("在\n\t\t\t\t"),i("span",{staticClass:"items"},[t._v(t._s(t.logs_maps[e.subjectType]))]),t._v("\n\t\t\t\t菜单\n\t\t\t\t"),i("span",{domProps:{innerHTML:t._s(e.content)}})])}),0)]),t._v(" "),i("div",{ref:"page",staticClass:"page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var mn=[{path:"/logs",component:i("VU/8")(pn,vn,!1,function(t){i("MxK8")},"data-v-40468e65",null).exports}];s.default.use(r.a);var gn=[{path:"/",component:Nt,children:[].concat(a()(Ut),a()(Kt.routes),a()(Me),a()(Ke),a()(ai),a()(Ti),a()(Mi),a()(cn),a()(hn),a()(mn))}].concat(a()(Kt.routes_root)),_n=new r.a({routes:gn});_n.beforeEach(function(t,e,i){if(console.log(t),o.a.dispatch("homeStore/home/chagneRouter",{router:t}),"/login"!=t.path){var n=getRequestParam();if(!n||!n.token)return console.log("跳转"),i({path:"/login"}),!1;var a=o.a.getters["userStore/user/user"];n&&n.token&&!a?o.a.dispatch("userStore/user/userMy").then(function(){i()}):i()}else i()});e.a=_n},Zstm:function(t,e){},ZuOr:function(t,e){},bLYs:function(t,e){},d2gY:function(t,e,i){"use strict";(function(t){var i={server_api:"/api",server_user:"/proxy"};t.config_server=i,e.a=i}).call(e,i("DuR2"))},dVww:function(t,e){},fTMt:function(t,e){},fqrN:function(t,e){},fy9G:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("R2SV"),r=(i("mw3O"),{login:function(t,e,i){var n=t.identify,a=t.password,r=config_server.server_api+"/users/login.json",o={loginName:n,password:a};Object(s.f)(r,"POST",o,e,i)},userMy:function(t,e){var i=config_server.server_api+"/users/my.json";Object(s.f)(i,"GET",{},t,e)},getUserDetail:function(t,e,i){var n=t.user_id,a=config_server.server_api+"/users/"+n+".json";Object(s.f)(a,"GET",{},e,i)},getSystemInfo:function(t,e){var i=config_server.server_api+"/org/system.json";Object(s.f)(i,"GET",{},t,e)},getOrgInfo:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/org/"+n+".json";Object(s.f)(a,"GET",{},e,i)},changeMobile:function(t,e,i){var n=t.uuid,a=t.mobile,r=config_server.server_api+"/users/admins/"+n+".json",o={mobile:a};Object(s.f)(r,"PUT",o,e,i)},getSettingInfo:function(t,e,i){var n=t.key,a=config_server.server_api+"/plat/setting.json",r={key:n};Object(s.f)(a,"GET",r,e,i)}});e.a=a()({},r)},j3zw:function(t,e){},jC5B:function(t,e){},kql1:function(t,e){},lgrr:function(t,e){},lttZ:function(t,e){},n5Qe:function(t,e,i){"use strict";(function(t){var e=i("mvHQ"),n=i.n(e),a=i("//Fk"),s=i.n(a),r=i("mtWM"),o=i.n(r),l=i("fy9G"),u=i("YFwf"),c=i("w95I"),d=i("skpL"),f=i("/Uac"),h=i("syKY"),p=i("3V4a"),v=i("SOEi"),m=i("qQ/N");o.a.interceptors.request.use(function(t){return t},function(t){return s.a.reject(t)}),o.a.defaults.headers.common.Authorization="AUTH_TOKEN",o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",t.getRequestParam=function(){var t=localStorage.getItem("requestParam")||n()({plat:"web"});return JSON.parse(t)},t.$axios=o.a.create({baseURL:"/",validateStatus:function(t){return t<400},params:getRequestParam()}),t.$API={user:l.a,platform:u.a,group:c.a,agent:d.a,actor:f.a,limit:h.a,finance:p.a,logs:v.a,analyze:m.a}}).call(e,i("DuR2"))},oISl:function(t,e){},oJVm:function(t,e){},q5bN:function(t,e){},"qQ/N":function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("R2SV"),r=(i("mw3O"),{getAnalyzeList:function(t,e,i){var n=t.start,a=t.limit,r=t.filter,o=config_server.server_api+"/analyze/user/actor/day.json",l={start:n,limit:a};r&&(r.unionId?l.orgId=r.unionId:r.platId&&(l.orgId=r.platId),r.date&&(l.startDate=new Date(r.date[0]).getTime(),l.endDate=new Date(r.date[1]).getTime()),r.adminId&&(l.adminId=r.adminId),r.managerId&&(l.managerId=r.managerId),r.salaryType&&(l.salaryType=r.salaryType)),Object(s.f)(o,"GET",l,e,i)}});e.a=a()({},r)},r4VY:function(t,e){},"rH/6":function(t,e){},rbWw:function(t,e){},skpL:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("R2SV"),r=(i("mw3O"),{getAgentList:function(t,e,i){var n=t.start,a=t.limit,r=t.filter,o=config_server.server_api+"/users/brokers.json",l={start:n,limit:a};r&&(r.unionId?l.orgId=r.unionId:r.platId&&(l.orgId=r.platId),(r.status||0==r.status)&&(l.status=r.status),r.nickname&&(l.nickname=r.nickname),r.id&&(l.id=r.id)),Object(s.f)(o,"GET",l,e,i)},deleteAgent:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/users/brokers/"+n+".json";Object(s.f)(a,"DELETE",{},e,i)}});e.a=a()({},r)},syKY:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("R2SV"),r=(i("mw3O"),{getAccountGroup:function(t,e,i){var n=t.start,a=t.limit,r=config_server.server_api+"/authority_group.json",o={start:n,limit:a};Object(s.f)(r,"GET",o,e,i)},getAuthoritiesList:function(t,e){var i=config_server.server_api+"/authorities.json";Object(s.f)(i,"GET",{},t,e)},getAccountGroupDetail:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/authority_group/"+n+".json";Object(s.f)(a,"GET",{},e,i)},deleteAccountGroup:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/authority_group/"+n+".json";Object(s.f)(a,"DELETE",{_method:"delete"},e,i)}}),o={getAccountList:function(t,e,i){var n=t.start,a=t.limit,r=t.filter,o=t.scope,l=config_server.server_api+"/users/admins.json",u={start:n,limit:a};r&&(r.nickname&&(u.nickname=r.nickname),r.authorityGroupId&&(u.authorityGroupId=r.authorityGroupId),r.authorityGroupOrgType&&(u.authorityGroupOrgType=r.authorityGroupOrgType),(r.status||0==r.status)&&(u.status=r.status),r.loginName&&(u.loginName=r.loginName),r.mobile&&(u.mobile=r.mobile),r.orgId&&(u.orgId=r.orgId)),o&&(u.scope=o),Object(s.f)(l,"GET",u,e,i)},deleteAccount:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/users/admins/"+n+".json";Object(s.f)(a,"DELETE",{},e,i)},getAdminsList:function(t,e,i){var n=t.orgType,a=t.orgId,r=config_server.server_api+"/users/admins/major/select.json",o={orgType:n,orgId:a};Object(s.f)(r,"GET",o,e,i)}};e.a=a()({},r,o)},tvR6:function(t,e){},w95I:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("R2SV"),r=(i("mw3O"),{getGroupList:function(t,e,i){var n=t.orgId,a=t.parentId,r=t.filter,o=t.status,l=t.searchKey,u=t.start,c=t.limit,d=config_server.server_api+"/org.json",f={orgId:n,orgType:"UNION",start:u,limit:c};o&&(f.status=o),l&&(f.searchKey=l),a&&(f.parentId=a),r&&(r.name&&(f.searchKey=r.name),(r.status||0==r.status)&&(f.status=r.status),r.id&&(f.id=r.id),r.orgId&&(f.orgId=r.orgId),r.adminName&&(f.adminName=r.adminName),r.managerName&&(f.managerName=r.managerName),r.salaryType&&(f.salaryType=r.salaryType)),Object(s.f)(d,"GET",f,e,i)},deleteGroup:function(t,e,i){var n=t.uuid,a=config_server.server_api+"/org/"+n+".json";Object(s.f)(a,"DELETE",{},e,i)}});e.a=a()({},r)}},["NHnr"]);
//# sourceMappingURL=app.51ab87ece72dd77b1c11.js.map